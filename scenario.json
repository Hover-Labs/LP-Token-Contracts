[{"shortname": "FA12", "longname": "FA12", "scenario": [{"action": "html", "tag": "h1", "inner": "FA1.2 template - Fungible assets", "line_no": 160}, {"action": "html", "tag": "p", "inner": "[[TABLEOFCONTENTS]]", "line_no": 162}, {"action": "html", "tag": "h1", "inner": "Accounts", "line_no": 170}, {"action": "show", "html": true, "stripStrings": false, "expression": "(list 171 (account_of_seed \"Administrator\" 165) (account_of_seed \"Alice\" 166) (account_of_seed \"Robert\" 167))", "compile": false, "line_no": 171}, {"action": "html", "tag": "h1", "inner": "Contract", "line_no": 173}, {"action": "html", "tag": "h1", "inner": "Entry points", "line_no": 176}, {"action": "newContract", "id": "(static_id 0 54)", "export": "(storage (record 54 (administrator (reduce (attr (account_of_seed \"Administrator\" 165) \"address\" 165) 165)) (balances (type_annotation (big_map 57 ) (bigmap (unknown 2) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 57)) (metadata (type_annotation (big_map 45 ((literal (string \"\") 177) (literal (bytes \"0x74657a6f732d73746f726167653a64617461\") 47)) ((literal (string \"data\") 177) (literal (bytes \"0x00\") 43))) (bigmap \"string\" \"bytes\") 45)) (paused (literal (bool False) 54)) (token_metadata (type_annotation (big_map 34 ((literal (nat 0) 21) (tuple 177 (literal (nat 0) 21) (type_annotation (map 23 ((literal (string \"name\") 177) (literal (bytes \"0x00\") 25)) ((literal (string \"decimals\") 177) (literal (bytes \"0x00\") 26)) ((literal (string \"symbol\") 177) (literal (bytes \"0x00\") 27)) ((literal (string \"icon\") 177) (literal (bytes \"0x00\") 28))) (map \"string\" \"bytes\") 23)))) (bigmap \"nat\" (tuple \"nat\" (map \"string\" \"bytes\"))) 34)) (totalSupply (literal (intOrNat 0) 54)))\nstorage_type (())\nmessages ((approve True ((set_type (params 82) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 83) (ifBlock (invert (contains (attr (data) \"balances\" 95) (sender) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (sender) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (invert (attr (data) \"paused\" 148) 89) 89) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 95) (sender) 90) \"approvals\" 90) (attr (params 82) \"spender\" 90) (literal (intOrNat 0) 90) 90) (literal (intOrNat 0) 91) 91) (eq (attr (params 82) \"value\" 91) (literal (intOrNat 0) 91) 91) 91) (literal (string \"UnsafeAllowanceChange\") 91) 91) (set (getItem (attr (getItem (attr (data) \"balances\" 95) (sender) 92) \"approvals\" 92) (attr (params 82) \"spender\" 90) 92) (attr (params 82) \"value\" 91) 92))) (burn True ((set_type (params 123) (record ((address \"address\") (value \"nat\")) None) 124) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 127) 127) 127) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 129) \"balance\" 129) (attr (params 123) \"value\" 129) 129) 129) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (attr (params 123) \"value\" 129) 130) 130) \"Some\" \"None\" 130) 130) (set (attr (data) \"totalSupply\" 131) (openVariant (isNat (sub (attr (data) \"totalSupply\" 131) (attr (params 123) \"value\" 129) 131) 131) \"Some\" \"None\" 131) 131))) (getAdministrator True ((bind \"__s1\" ((set_type (first (params 143) 177) \"unit\" 144) (result (attr (data) \"administrator\" 134) 145))) (set_type (second (params 143) 177) (contract \"address\") 177) (set (operations 177) (cons (transfer (getLocal \"__s1\" 177) (literal (mutez 0) 177) (second (params 143) 177) 143) (operations 177) 177) 177))) (getAllowance True ((bind \"__s2\" ((result (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (first (params 103) 177) \"owner\" 104) 104) \"approvals\" 104) (attr (first (params 103) 177) \"spender\" 104) 104) 104))) (set_type (second (params 103) 177) (contract \"nat\") 177) (set (operations 177) (cons (transfer (getLocal \"__s2\" 177) (literal (mutez 0) 177) (second (params 103) 177) 103) (operations 177) 177) 177))) (getBalance True ((bind \"__s3\" ((result (attr (getItem (attr (data) \"balances\" 95) (first (params 99) 177) 100) \"balance\" 100) 100))) (set_type (second (params 99) 177) (contract \"nat\") 177) (set (operations 177) (cons (transfer (getLocal \"__s3\" 177) (literal (mutez 0) 177) (second (params 99) 177) 99) (operations 177) 177) 177))) (getTotalSupply True ((bind \"__s4\" ((set_type (first (params 107) 177) \"unit\" 108) (result (attr (data) \"totalSupply\" 131) 109))) (set_type (second (params 107) 177) (contract \"nat\") 177) (set (operations 177) (cons (transfer (getLocal \"__s4\" 177) (literal (mutez 0) 177) (second (params 107) 177) 107) (operations 177) 177) 177))) (mint True ((set_type (params 112) (record ((address \"address\") (value \"nat\")) None) 113) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 116) 116) 116) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (attr (params 112) \"value\" 119) 119) 119) (set (attr (data) \"totalSupply\" 131) (add (attr (data) \"totalSupply\" 131) (attr (params 112) \"value\" 119) 120) 120))) (setAdministrator True ((set_type (params 137) \"address\" 138) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 139) (set (attr (data) \"administrator\" 134) (params 137) 140))) (setPause True ((set_type (params 151) \"bool\" 152) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 153) (set (attr (data) \"paused\" 148) (params 151) 154))) (transfer True ((set_type (params 68) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 69) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (and (invert (attr (data) \"paused\" 148) 71) (or (eq (attr (params 68) \"from_\" 72) (sender) 72) (ge (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 73) \"approvals\" 73) (sender) 73) (attr (params 68) \"value\" 73) 73) 72) 71) 70) 70) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 75) \"balance\" 75) (attr (params 68) \"value\" 73) 75) 75) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (attr (params 68) \"value\" 73) 76) 76) \"Some\" \"None\" 76) 76) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (attr (params 68) \"value\" 73) 77) 77) (ifBlock (and (neq (attr (params 68) \"from_\" 72) (sender) 78) (invert (eq (sender) (attr (data) \"administrator\" 134) 134) 78) 78) ((set (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (attr (params 68) \"value\" 73) 79) 79) \"Some\" \"None\" 79) 79)) 78))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 177, "show": true, "accept_unknown_types": false}, {"action": "html", "tag": "h2", "inner": "Admin mints a few coins", "line_no": 178}, {"action": "message", "id": "(static_id 0 54)", "dynamic": false, "message": "mint", "params": "(record 179 (address (reduce (attr (account_of_seed \"Alice\" 166) \"address\" 166) 166)) (value (literal (intOrNat 12) 179)))", "line_no": 179, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": "(literal (timestamp 0) 54)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 179)", "show": true, "valid": "(literal (bool True) 179)", "voting_powers": "(map 179 )", "export": true}, {"action": "message", "id": "(static_id 0 54)", "dynamic": false, "message": "mint", "params": "(record 180 (address (reduce (attr (account_of_seed \"Alice\" 166) \"address\" 166) 166)) (value (literal (intOrNat 3) 180)))", "line_no": 180, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": "(literal (timestamp 0) 54)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 180)", "show": true, "valid": "(literal (bool True) 180)", "voting_powers": "(map 180 )", "export": true}, {"action": "message", "id": "(static_id 0 54)", "dynamic": false, "message": "mint", "params": "(record 181 (address (reduce (attr (account_of_seed \"Alice\" 166) \"address\" 166) 166)) (value (literal (intOrNat 3) 181)))", "line_no": 181, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": "(literal (timestamp 0) 54)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 181)", "show": true, "valid": "(literal (bool True) 181)", "voting_powers": "(map 181 )", "export": true}, {"action": "html", "tag": "h2", "inner": "Alice transfers to Bob", "line_no": 182}, {"action": "message", "id": "(static_id 0 54)", "dynamic": false, "message": "transfer", "params": "(record 183 (from_ (reduce (attr (account_of_seed \"Alice\" 166) \"address\" 166) 166)) (to_ (reduce (attr (account_of_seed \"Robert\" 167) \"address\" 167) 167)) (value (literal (intOrNat 4) 183)))", "line_no": 183, "title": "", "messageClass": "", "source": "none", "sender": "seed:Alice", "chain_id": "", "time": "(literal (timestamp 0) 54)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 183)", "show": true, "valid": "(literal (bool True) 183)", "voting_powers": "(map 183 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 54) 183) \"balances\" 184) (reduce (attr (account_of_seed \"Alice\" 166) \"address\" 166) 166) 184) \"balance\" 184) (literal (intOrNat 14) 184) 184)", "line_no": 184}, {"action": "html", "tag": "h2", "inner": "Bob tries to transfer from Alice but he doesn't have her approval", "line_no": 185}, {"action": "message", "id": "(static_id 0 54)", "dynamic": false, "message": "transfer", "params": "(record 186 (from_ (reduce (attr (account_of_seed \"Alice\" 166) \"address\" 166) 166)) (to_ (reduce (attr (account_of_seed \"Robert\" 167) \"address\" 167) 167)) (value (literal (intOrNat 4) 186)))", "line_no": 186, "title": "", "messageClass": "", "source": "none", "sender": "seed:Robert", "chain_id": "", "time": "(literal (timestamp 0) 54)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 186)", "show": true, "valid": "(literal (bool False) 186)", "voting_powers": "(map 186 )", "export": true}, {"action": "html", "tag": "h2", "inner": "Alice approves Bob and Bob transfers", "line_no": 187}, {"action": "message", "id": "(static_id 0 54)", "dynamic": false, "message": "approve", "params": "(record 188 (spender (reduce (attr (account_of_seed \"Robert\" 167) \"address\" 167) 167)) (value (literal (intOrNat 5) 188)))", "line_no": 188, "title": "", "messageClass": "", "source": "none", "sender": "seed:Alice", "chain_id": "", "time": "(literal (timestamp 0) 54)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 188)", "show": true, "valid": "(literal (bool True) 188)", "voting_powers": "(map 188 )", "export": true}, {"action": "message", "id": "(static_id 0 54)", "dynamic": false, "message": "transfer", "params": "(record 189 (from_ (reduce (attr (account_of_seed \"Alice\" 166) \"address\" 166) 166)) (to_ (reduce (attr (account_of_seed \"Robert\" 167) \"address\" 167) 167)) (value (literal (intOrNat 4) 189)))", "line_no": 189, "title": "", "messageClass": "", "source": "none", "sender": "seed:Robert", "chain_id": "", "time": "(literal (timestamp 0) 54)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 189)", "show": true, "valid": "(literal (bool True) 189)", "voting_powers": "(map 189 )", "export": true}, {"action": "html", "tag": "h2", "inner": "Bob tries to over-transfer from Alice", "line_no": 190}, {"action": "message", "id": "(static_id 0 54)", "dynamic": false, "message": "transfer", "params": "(record 191 (from_ (reduce (attr (account_of_seed \"Alice\" 166) \"address\" 166) 166)) (to_ (reduce (attr (account_of_seed \"Robert\" 167) \"address\" 167) 167)) (value (literal (intOrNat 4) 191)))", "line_no": 191, "title": "", "messageClass": "", "source": "none", "sender": "seed:Robert", "chain_id": "", "time": "(literal (timestamp 0) 54)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 191)", "show": true, "valid": "(literal (bool False) 191)", "voting_powers": "(map 191 )", "export": true}, {"action": "html", "tag": "h2", "inner": "Admin burns Bob token", "line_no": 192}, {"action": "message", "id": "(static_id 0 54)", "dynamic": false, "message": "burn", "params": "(record 193 (address (reduce (attr (account_of_seed \"Robert\" 167) \"address\" 167) 167)) (value (literal (intOrNat 1) 193)))", "line_no": 193, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": "(literal (timestamp 0) 54)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 193)", "show": true, "valid": "(literal (bool True) 193)", "voting_powers": "(map 193 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 54) 193) \"balances\" 194) (reduce (attr (account_of_seed \"Alice\" 166) \"address\" 166) 166) 194) \"balance\" 194) (literal (intOrNat 10) 194) 194)", "line_no": 194}, {"action": "html", "tag": "h2", "inner": "Alice tries to burn Bob token", "line_no": 195}, {"action": "message", "id": "(static_id 0 54)", "dynamic": false, "message": "burn", "params": "(record 196 (address (reduce (attr (account_of_seed \"Robert\" 167) \"address\" 167) 167)) (value (literal (intOrNat 1) 196)))", "line_no": 196, "title": "", "messageClass": "", "source": "none", "sender": "seed:Alice", "chain_id": "", "time": "(literal (timestamp 0) 54)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 196)", "show": true, "valid": "(literal (bool False) 196)", "voting_powers": "(map 196 )", "export": true}, {"action": "html", "tag": "h2", "inner": "Admin pauses the contract and Alice cannot transfer anymore", "line_no": 197}, {"action": "message", "id": "(static_id 0 54)", "dynamic": false, "message": "setPause", "params": "(literal (bool True) 198)", "line_no": 198, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": "(literal (timestamp 0) 54)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 198)", "show": true, "valid": "(literal (bool True) 198)", "voting_powers": "(map 198 )", "export": true}, {"action": "message", "id": "(static_id 0 54)", "dynamic": false, "message": "transfer", "params": "(record 199 (from_ (reduce (attr (account_of_seed \"Alice\" 166) \"address\" 166) 166)) (to_ (reduce (attr (account_of_seed \"Robert\" 167) \"address\" 167) 167)) (value (literal (intOrNat 4) 199)))", "line_no": 199, "title": "", "messageClass": "", "source": "none", "sender": "seed:Alice", "chain_id": "", "time": "(literal (timestamp 0) 54)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 199)", "show": true, "valid": "(literal (bool False) 199)", "voting_powers": "(map 199 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 54) 199) \"balances\" 200) (reduce (attr (account_of_seed \"Alice\" 166) \"address\" 166) 166) 200) \"balance\" 200) (literal (intOrNat 10) 200) 200)", "line_no": 200}, {"action": "html", "tag": "h2", "inner": "Admin transfers while on pause", "line_no": 201}, {"action": "message", "id": "(static_id 0 54)", "dynamic": false, "message": "transfer", "params": "(record 202 (from_ (reduce (attr (account_of_seed \"Alice\" 166) \"address\" 166) 166)) (to_ (reduce (attr (account_of_seed \"Robert\" 167) \"address\" 167) 167)) (value (literal (intOrNat 1) 202)))", "line_no": 202, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": "(literal (timestamp 0) 54)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 202)", "show": true, "valid": "(literal (bool True) 202)", "voting_powers": "(map 202 )", "export": true}, {"action": "html", "tag": "h2", "inner": "Admin unpauses the contract and transferts are allowed", "line_no": 203}, {"action": "message", "id": "(static_id 0 54)", "dynamic": false, "message": "setPause", "params": "(literal (bool False) 204)", "line_no": 204, "title": "", "messageClass": "", "source": "none", "sender": "seed:Administrator", "chain_id": "", "time": "(literal (timestamp 0) 54)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 204)", "show": true, "valid": "(literal (bool True) 204)", "voting_powers": "(map 204 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 54) 204) \"balances\" 205) (reduce (attr (account_of_seed \"Alice\" 166) \"address\" 166) 166) 205) \"balance\" 205) (literal (intOrNat 9) 205) 205)", "line_no": 205}, {"action": "message", "id": "(static_id 0 54)", "dynamic": false, "message": "transfer", "params": "(record 206 (from_ (reduce (attr (account_of_seed \"Alice\" 166) \"address\" 166) 166)) (to_ (reduce (attr (account_of_seed \"Robert\" 167) \"address\" 167) 167)) (value (literal (intOrNat 1) 206)))", "line_no": 206, "title": "", "messageClass": "", "source": "none", "sender": "seed:Alice", "chain_id": "", "time": "(literal (timestamp 0) 54)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 206)", "show": true, "valid": "(literal (bool True) 206)", "voting_powers": "(map 206 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 0 54) 206) \"totalSupply\" 208) (literal (intOrNat 17) 208) 208)", "line_no": 208}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 54) 206) \"balances\" 209) (reduce (attr (account_of_seed \"Alice\" 166) \"address\" 166) 166) 209) \"balance\" 209) (literal (intOrNat 8) 209) 209)", "line_no": 209}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 54) 206) \"balances\" 209) (reduce (attr (account_of_seed \"Robert\" 167) \"address\" 167) 167) 210) \"balance\" 210) (literal (intOrNat 9) 210) 210)", "line_no": 210}], "decompile": false, "kind": "test"}, {"shortname": "updateBalance_-_updates_balance", "longname": "updateBalance - updates balance", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 3) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 91) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 67) (record ((address \"address\") (value \"nat\")) None) 68) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 69) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 70) \"balance\" 70) (attr (params 67) \"value\" 70) 70) 70) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (attr (params 67) \"value\" 70) 71) 71) \"Some\" \"None\" 71) 71) (set (attr (data) \"totalSupply\" 72) (openVariant (isNat (sub (attr (data) \"totalSupply\" 72) (attr (params 67) \"value\" 70) 72) 72) \"Some\" \"None\" 72) 72))) (getAdministrator True ((bind \"__s5\" ((set_type (first (params 85) 173) \"unit\" 86) (result (attr (data) \"administrator\" 76) 87))) (set_type (second (params 85) 173) (contract \"address\") 173) (set (operations 173) (cons (transfer (getLocal \"__s5\" 173) (literal (mutez 0) 173) (second (params 85) 173) 85) (operations 173) 173) 173))) (getAllowance True ((bind \"__s6\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 41) 173) \"owner\" 42) 42) \"approvals\" 42) (attr (first (params 41) 173) \"spender\" 42) 42) 42))) (set_type (second (params 41) 173) (contract \"nat\") 173) (set (operations 173) (cons (transfer (getLocal \"__s6\" 173) (literal (mutez 0) 173) (second (params 41) 173) 41) (operations 173) 173) 173))) (getBalance True ((bind \"__s7\" ((result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 173) 38) \"balance\" 38) 38))) (set_type (second (params 37) 173) (contract \"nat\") 173) (set (operations 173) (cons (transfer (getLocal \"__s7\" 173) (literal (mutez 0) 173) (second (params 37) 173) 37) (operations 173) 173) 173))) (getTotalSupply True ((bind \"__s8\" ((set_type (first (params 45) 173) \"unit\" 46) (result (attr (data) \"totalSupply\" 72) 47))) (set_type (second (params 45) 173) (contract \"nat\") 173) (set (operations 173) (cons (transfer (getLocal \"__s8\" 173) (literal (mutez 0) 173) (second (params 45) 173) 45) (operations 173) 173) 173))) (mint True ((set_type (params 59) (record ((address \"address\") (value \"nat\")) None) 60) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 61) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (attr (params 59) \"value\" 63) 63) 63) (set (attr (data) \"totalSupply\" 72) (add (attr (data) \"totalSupply\" 72) (attr (params 59) \"value\" 63) 64) 64))) (setAdministrator True ((set_type (params 79) \"address\" 80) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 81) (set (attr (data) \"administrator\" 76) (params 79) 82))) (setPause True ((set_type (params 94) \"bool\" 95) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 96) (set (attr (data) \"paused\" 91) (params 94) 97))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 76) 76) (and (invert (attr (data) \"paused\" 91) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 76) 76) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 173, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 28)", "export": "(storage (record 28 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 32 ) (bigmap (unknown 4) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 32)) (paused (literal (bool False) 28)) (state (literal (intOrNat 0) 28)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (totalSupply (literal (intOrNat 0) 28)) (underlyingBalance (literal (nat 0) 39)))\nstorage_type (())\nmessages ((approve True ((set_type (params 82) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 83) (ifBlock (invert (contains (attr (data) \"balances\" 95) (sender) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (sender) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (invert (attr (data) \"paused\" 148) 89) 89) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 95) (sender) 90) \"approvals\" 90) (attr (params 82) \"spender\" 90) (literal (intOrNat 0) 90) 90) (literal (intOrNat 0) 91) 91) (eq (attr (params 82) \"value\" 91) (literal (intOrNat 0) 91) 91) 91) (literal (string \"UnsafeAllowanceChange\") 91) 91) (set (getItem (attr (getItem (attr (data) \"balances\" 95) (sender) 92) \"approvals\" 92) (attr (params 82) \"spender\" 90) 92) (attr (params 82) \"value\" 91) 92))) (burn True ((set_type (params 123) (record ((address \"address\") (value \"nat\")) None) 124) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 127) 127) 127) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 129) \"balance\" 129) (attr (params 123) \"value\" 129) 129) 129) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (attr (params 123) \"value\" 129) 130) 130) \"Some\" \"None\" 130) 130) (set (attr (data) \"totalSupply\" 131) (openVariant (isNat (sub (attr (data) \"totalSupply\" 131) (attr (params 123) \"value\" 129) 131) 131) \"Some\" \"None\" 131) 131))) (deposit True ((set_type (params 45) \"nat\" 46) (defineLocal \"newTokens\" (mul (params 45) (literal (intOrNat 1000000000000000000) 49) 49) 49) (ifBlock (neq (attr (data) \"totalSupply\" 131) (literal (nat 0) 50) 50) ((defineLocal \"newUnderlyingBalance\" (add (attr (data) \"underlyingBalance\" 51) (params 45) 51) 51) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 45) (literal (intOrNat 1000000000000000000) 52) 52) (getLocal \"newUnderlyingBalance\" 52) 52) 52) (set (getLocal \"newTokens\" 179) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 53) (attr (data) \"totalSupply\" 131) 53) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 53) (getLocal \"fractionOfPoolOwnership\" 53) 53) 53) \"Some\" \"None\" 53) 53) 53)) 50) (set (attr (data) \"underlyingBalance\" 51) (add (attr (data) \"underlyingBalance\" 51) (params 45) 56) 56) (set (operations 69) (cons (transfer (record 59 (from_ (sender)) (to_ (to_address (self) \"None\")) (value (params 45))) (literal (mutez 0) 69) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 64) \"Some\" \"None\" 64) 69) (operations 69) 69) 69) (set (operations 81) (cons (transfer (record 72 (address (sender)) (value (getLocal \"newTokens\" 74))) (literal (mutez 0) 81) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 76) \"Some\" \"None\" 76) 81) (operations 81) 81) 81))) (getAdministrator True ((bind \"__s9\" ((set_type (first (params 143) 179) \"unit\" 144) (result (attr (data) \"administrator\" 134) 145))) (set_type (second (params 143) 179) (contract \"address\") 179) (set (operations 179) (cons (transfer (getLocal \"__s9\" 179) (literal (mutez 0) 179) (second (params 143) 179) 143) (operations 179) 179) 179))) (getAllowance True ((bind \"__s10\" ((result (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (first (params 103) 179) \"owner\" 104) 104) \"approvals\" 104) (attr (first (params 103) 179) \"spender\" 104) 104) 104))) (set_type (second (params 103) 179) (contract \"nat\") 179) (set (operations 179) (cons (transfer (getLocal \"__s10\" 179) (literal (mutez 0) 179) (second (params 103) 179) 103) (operations 179) 179) 179))) (getBalance True ((bind \"__s11\" ((result (attr (getItem (attr (data) \"balances\" 95) (first (params 99) 179) 100) \"balance\" 100) 100))) (set_type (second (params 99) 179) (contract \"nat\") 179) (set (operations 179) (cons (transfer (getLocal \"__s11\" 179) (literal (mutez 0) 179) (second (params 99) 179) 99) (operations 179) 179) 179))) (getTotalSupply True ((bind \"__s12\" ((set_type (first (params 107) 179) \"unit\" 108) (result (attr (data) \"totalSupply\" 131) 109))) (set_type (second (params 107) 179) (contract \"nat\") 179) (set (operations 179) (cons (transfer (getLocal \"__s12\" 179) (literal (mutez 0) 179) (second (params 107) 179) 107) (operations 179) 179) 179))) (mint True ((set_type (params 112) (record ((address \"address\") (value \"nat\")) None) 113) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 116) 116) 116) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (attr (params 112) \"value\" 119) 119) 119) (set (attr (data) \"totalSupply\" 131) (add (attr (data) \"totalSupply\" 131) (attr (params 112) \"value\" 119) 120) 120))) (redeem True ((set_type (params 85) \"nat\" 86) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 85) (literal (intOrNat 1000000000000000000) 88) 88) (attr (data) \"totalSupply\" 131) 88) 88) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 89) (attr (data) \"underlyingBalance\" 51) 89) (literal (intOrNat 1000000000000000000) 89) 89) 89) (set (attr (data) \"underlyingBalance\" 51) (openVariant (isNat (sub (attr (data) \"underlyingBalance\" 51) (getLocal \"tokensToReceive\" 92) 92) 92) \"Some\" \"None\" 92) 92) (set (operations 104) (cons (transfer (record 95 (address (sender)) (value (params 85))) (literal (mutez 0) 104) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 99) \"Some\" \"None\" 99) 104) (operations 104) 104) 104) (set (operations 117) (cons (transfer (record 107 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (getLocal \"tokensToReceive\" 110))) (literal (mutez 0) 117) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 112) \"Some\" \"None\" 112) 117) (operations 117) 117) 117))) (setAdministrator True ((set_type (params 137) \"address\" 138) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 139) (set (attr (data) \"administrator\" 134) (params 137) 140))) (setPause True ((set_type (params 151) \"bool\" 152) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 153) (set (attr (data) \"paused\" 148) (params 151) 154))) (transfer True ((set_type (params 68) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 69) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (and (invert (attr (data) \"paused\" 148) 71) (or (eq (attr (params 68) \"from_\" 72) (sender) 72) (ge (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 73) \"approvals\" 73) (sender) 73) (attr (params 68) \"value\" 73) 73) 72) 71) 70) 70) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 75) \"balance\" 75) (attr (params 68) \"value\" 73) 75) 75) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (attr (params 68) \"value\" 73) 76) 76) \"Some\" \"None\" 76) 76) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (attr (params 68) \"value\" 73) 77) 77) (ifBlock (and (neq (attr (params 68) \"from_\" 72) (sender) 78) (invert (eq (sender) (attr (data) \"administrator\" 134) 134) 78) 78) ((set (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (attr (params 68) \"value\" 73) 79) 79) \"Some\" \"None\" 79) 79)) 78))) (updateBalance True ((set_type (params 121) \"unit\" 122) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 0) 125) 125) (literal (string \"bad state\") 125) 125) (set (attr (data) \"state\" 125) (literal (intOrNat 1) 128) 128) (set (operations 137) (cons (transfer (tuple 137 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 131)) (literal (mutez 0) 137) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 66) 132) \"Some\" \"None\" 132) 137) (operations 137) 137) 137))) (updateBalance_callback True ((set_type (params 141) \"nat\" 142) (verify (eq (sender) (attr (data) \"tokenAddress\" 66) 145) (literal (string \"bad sender\") 145) 145) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 1) 148) 148) (literal (string \"bad state\") 148) 148) (set (attr (data) \"state\" 125) (literal (intOrNat 0) 151) 151) (set (attr (data) \"underlyingBalance\" 51) (params 141) 154))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 179, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 184 (address (literal (local-address (static_id 1 28)) 28)) (value (literal (intOrNat 10) 184)))", "line_no": 183, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 183)", "show": true, "valid": "(literal (bool True) 183)", "voting_powers": "(map 183 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "updateBalance", "params": "(unit)", "line_no": 193, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 193)", "show": true, "valid": "(literal (bool True) 193)", "voting_powers": "(map 193 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 193) \"underlyingBalance\" 196) (literal (intOrNat 10) 196) 196)", "line_no": 196}], "decompile": false, "kind": "test"}, {"shortname": "updateBalance_-_fails_if_not_in_idle_state", "longname": "updateBalance - fails if not in idle state", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 10) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 91) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 67) (record ((address \"address\") (value \"nat\")) None) 68) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 69) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 70) \"balance\" 70) (attr (params 67) \"value\" 70) 70) 70) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (attr (params 67) \"value\" 70) 71) 71) \"Some\" \"None\" 71) 71) (set (attr (data) \"totalSupply\" 72) (openVariant (isNat (sub (attr (data) \"totalSupply\" 72) (attr (params 67) \"value\" 70) 72) 72) \"Some\" \"None\" 72) 72))) (getAdministrator True ((bind \"__s13\" ((set_type (first (params 85) 206) \"unit\" 86) (result (attr (data) \"administrator\" 76) 87))) (set_type (second (params 85) 206) (contract \"address\") 206) (set (operations 206) (cons (transfer (getLocal \"__s13\" 206) (literal (mutez 0) 206) (second (params 85) 206) 85) (operations 206) 206) 206))) (getAllowance True ((bind \"__s14\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 41) 206) \"owner\" 42) 42) \"approvals\" 42) (attr (first (params 41) 206) \"spender\" 42) 42) 42))) (set_type (second (params 41) 206) (contract \"nat\") 206) (set (operations 206) (cons (transfer (getLocal \"__s14\" 206) (literal (mutez 0) 206) (second (params 41) 206) 41) (operations 206) 206) 206))) (getBalance True ((bind \"__s15\" ((result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 206) 38) \"balance\" 38) 38))) (set_type (second (params 37) 206) (contract \"nat\") 206) (set (operations 206) (cons (transfer (getLocal \"__s15\" 206) (literal (mutez 0) 206) (second (params 37) 206) 37) (operations 206) 206) 206))) (getTotalSupply True ((bind \"__s16\" ((set_type (first (params 45) 206) \"unit\" 46) (result (attr (data) \"totalSupply\" 72) 47))) (set_type (second (params 45) 206) (contract \"nat\") 206) (set (operations 206) (cons (transfer (getLocal \"__s16\" 206) (literal (mutez 0) 206) (second (params 45) 206) 45) (operations 206) 206) 206))) (mint True ((set_type (params 59) (record ((address \"address\") (value \"nat\")) None) 60) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 61) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (attr (params 59) \"value\" 63) 63) 63) (set (attr (data) \"totalSupply\" 72) (add (attr (data) \"totalSupply\" 72) (attr (params 59) \"value\" 63) 64) 64))) (setAdministrator True ((set_type (params 79) \"address\" 80) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 81) (set (attr (data) \"administrator\" 76) (params 79) 82))) (setPause True ((set_type (params 94) \"bool\" 95) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 96) (set (attr (data) \"paused\" 91) (params 94) 97))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 76) 76) (and (invert (attr (data) \"paused\" 91) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 76) 76) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 206, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 28)", "export": "(storage (record 28 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 32 ) (bigmap (unknown 11) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 32)) (paused (literal (bool False) 28)) (state (literal (intOrNat 1) 28)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (totalSupply (literal (intOrNat 0) 28)) (underlyingBalance (literal (nat 0) 39)))\nstorage_type (())\nmessages ((approve True ((set_type (params 82) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 83) (ifBlock (invert (contains (attr (data) \"balances\" 95) (sender) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (sender) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (invert (attr (data) \"paused\" 148) 89) 89) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 95) (sender) 90) \"approvals\" 90) (attr (params 82) \"spender\" 90) (literal (intOrNat 0) 90) 90) (literal (intOrNat 0) 91) 91) (eq (attr (params 82) \"value\" 91) (literal (intOrNat 0) 91) 91) 91) (literal (string \"UnsafeAllowanceChange\") 91) 91) (set (getItem (attr (getItem (attr (data) \"balances\" 95) (sender) 92) \"approvals\" 92) (attr (params 82) \"spender\" 90) 92) (attr (params 82) \"value\" 91) 92))) (burn True ((set_type (params 123) (record ((address \"address\") (value \"nat\")) None) 124) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 127) 127) 127) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 129) \"balance\" 129) (attr (params 123) \"value\" 129) 129) 129) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (attr (params 123) \"value\" 129) 130) 130) \"Some\" \"None\" 130) 130) (set (attr (data) \"totalSupply\" 131) (openVariant (isNat (sub (attr (data) \"totalSupply\" 131) (attr (params 123) \"value\" 129) 131) 131) \"Some\" \"None\" 131) 131))) (deposit True ((set_type (params 45) \"nat\" 46) (defineLocal \"newTokens\" (mul (params 45) (literal (intOrNat 1000000000000000000) 49) 49) 49) (ifBlock (neq (attr (data) \"totalSupply\" 131) (literal (nat 0) 50) 50) ((defineLocal \"newUnderlyingBalance\" (add (attr (data) \"underlyingBalance\" 51) (params 45) 51) 51) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 45) (literal (intOrNat 1000000000000000000) 52) 52) (getLocal \"newUnderlyingBalance\" 52) 52) 52) (set (getLocal \"newTokens\" 213) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 53) (attr (data) \"totalSupply\" 131) 53) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 53) (getLocal \"fractionOfPoolOwnership\" 53) 53) 53) \"Some\" \"None\" 53) 53) 53)) 50) (set (attr (data) \"underlyingBalance\" 51) (add (attr (data) \"underlyingBalance\" 51) (params 45) 56) 56) (set (operations 69) (cons (transfer (record 59 (from_ (sender)) (to_ (to_address (self) \"None\")) (value (params 45))) (literal (mutez 0) 69) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 64) \"Some\" \"None\" 64) 69) (operations 69) 69) 69) (set (operations 81) (cons (transfer (record 72 (address (sender)) (value (getLocal \"newTokens\" 74))) (literal (mutez 0) 81) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 76) \"Some\" \"None\" 76) 81) (operations 81) 81) 81))) (getAdministrator True ((bind \"__s17\" ((set_type (first (params 143) 213) \"unit\" 144) (result (attr (data) \"administrator\" 134) 145))) (set_type (second (params 143) 213) (contract \"address\") 213) (set (operations 213) (cons (transfer (getLocal \"__s17\" 213) (literal (mutez 0) 213) (second (params 143) 213) 143) (operations 213) 213) 213))) (getAllowance True ((bind \"__s18\" ((result (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (first (params 103) 213) \"owner\" 104) 104) \"approvals\" 104) (attr (first (params 103) 213) \"spender\" 104) 104) 104))) (set_type (second (params 103) 213) (contract \"nat\") 213) (set (operations 213) (cons (transfer (getLocal \"__s18\" 213) (literal (mutez 0) 213) (second (params 103) 213) 103) (operations 213) 213) 213))) (getBalance True ((bind \"__s19\" ((result (attr (getItem (attr (data) \"balances\" 95) (first (params 99) 213) 100) \"balance\" 100) 100))) (set_type (second (params 99) 213) (contract \"nat\") 213) (set (operations 213) (cons (transfer (getLocal \"__s19\" 213) (literal (mutez 0) 213) (second (params 99) 213) 99) (operations 213) 213) 213))) (getTotalSupply True ((bind \"__s20\" ((set_type (first (params 107) 213) \"unit\" 108) (result (attr (data) \"totalSupply\" 131) 109))) (set_type (second (params 107) 213) (contract \"nat\") 213) (set (operations 213) (cons (transfer (getLocal \"__s20\" 213) (literal (mutez 0) 213) (second (params 107) 213) 107) (operations 213) 213) 213))) (mint True ((set_type (params 112) (record ((address \"address\") (value \"nat\")) None) 113) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 116) 116) 116) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (attr (params 112) \"value\" 119) 119) 119) (set (attr (data) \"totalSupply\" 131) (add (attr (data) \"totalSupply\" 131) (attr (params 112) \"value\" 119) 120) 120))) (redeem True ((set_type (params 85) \"nat\" 86) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 85) (literal (intOrNat 1000000000000000000) 88) 88) (attr (data) \"totalSupply\" 131) 88) 88) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 89) (attr (data) \"underlyingBalance\" 51) 89) (literal (intOrNat 1000000000000000000) 89) 89) 89) (set (attr (data) \"underlyingBalance\" 51) (openVariant (isNat (sub (attr (data) \"underlyingBalance\" 51) (getLocal \"tokensToReceive\" 92) 92) 92) \"Some\" \"None\" 92) 92) (set (operations 104) (cons (transfer (record 95 (address (sender)) (value (params 85))) (literal (mutez 0) 104) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 99) \"Some\" \"None\" 99) 104) (operations 104) 104) 104) (set (operations 117) (cons (transfer (record 107 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (getLocal \"tokensToReceive\" 110))) (literal (mutez 0) 117) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 112) \"Some\" \"None\" 112) 117) (operations 117) 117) 117))) (setAdministrator True ((set_type (params 137) \"address\" 138) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 139) (set (attr (data) \"administrator\" 134) (params 137) 140))) (setPause True ((set_type (params 151) \"bool\" 152) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 153) (set (attr (data) \"paused\" 148) (params 151) 154))) (transfer True ((set_type (params 68) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 69) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (and (invert (attr (data) \"paused\" 148) 71) (or (eq (attr (params 68) \"from_\" 72) (sender) 72) (ge (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 73) \"approvals\" 73) (sender) 73) (attr (params 68) \"value\" 73) 73) 72) 71) 70) 70) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 75) \"balance\" 75) (attr (params 68) \"value\" 73) 75) 75) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (attr (params 68) \"value\" 73) 76) 76) \"Some\" \"None\" 76) 76) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (attr (params 68) \"value\" 73) 77) 77) (ifBlock (and (neq (attr (params 68) \"from_\" 72) (sender) 78) (invert (eq (sender) (attr (data) \"administrator\" 134) 134) 78) 78) ((set (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (attr (params 68) \"value\" 73) 79) 79) \"Some\" \"None\" 79) 79)) 78))) (updateBalance True ((set_type (params 121) \"unit\" 122) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 0) 125) 125) (literal (string \"bad state\") 125) 125) (set (attr (data) \"state\" 125) (literal (intOrNat 1) 128) 128) (set (operations 137) (cons (transfer (tuple 137 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 131)) (literal (mutez 0) 137) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 66) 132) \"Some\" \"None\" 132) 137) (operations 137) 137) 137))) (updateBalance_callback True ((set_type (params 141) \"nat\" 142) (verify (eq (sender) (attr (data) \"tokenAddress\" 66) 145) (literal (string \"bad sender\") 145) 145) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 1) 148) 148) (literal (string \"bad state\") 148) 148) (set (attr (data) \"state\" 125) (literal (intOrNat 0) 151) 151) (set (attr (data) \"underlyingBalance\" 51) (params 141) 154))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 213, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 218 (address (literal (local-address (static_id 1 28)) 28)) (value (literal (intOrNat 10) 218)))", "line_no": 217, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 217)", "show": true, "valid": "(literal (bool True) 217)", "voting_powers": "(map 217 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "updateBalance", "params": "(unit)", "line_no": 228, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 228)", "show": true, "valid": "(literal (bool False) 228)", "voting_powers": "(map 228 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "updateBalance_callback_-_updates_balance", "longname": "updateBalance_callback - updates balance", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 17) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 91) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 67) (record ((address \"address\") (value \"nat\")) None) 68) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 69) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 70) \"balance\" 70) (attr (params 67) \"value\" 70) 70) 70) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (attr (params 67) \"value\" 70) 71) 71) \"Some\" \"None\" 71) 71) (set (attr (data) \"totalSupply\" 72) (openVariant (isNat (sub (attr (data) \"totalSupply\" 72) (attr (params 67) \"value\" 70) 72) 72) \"Some\" \"None\" 72) 72))) (getAdministrator True ((bind \"__s21\" ((set_type (first (params 85) 244) \"unit\" 86) (result (attr (data) \"administrator\" 76) 87))) (set_type (second (params 85) 244) (contract \"address\") 244) (set (operations 244) (cons (transfer (getLocal \"__s21\" 244) (literal (mutez 0) 244) (second (params 85) 244) 85) (operations 244) 244) 244))) (getAllowance True ((bind \"__s22\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 41) 244) \"owner\" 42) 42) \"approvals\" 42) (attr (first (params 41) 244) \"spender\" 42) 42) 42))) (set_type (second (params 41) 244) (contract \"nat\") 244) (set (operations 244) (cons (transfer (getLocal \"__s22\" 244) (literal (mutez 0) 244) (second (params 41) 244) 41) (operations 244) 244) 244))) (getBalance True ((bind \"__s23\" ((result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 244) 38) \"balance\" 38) 38))) (set_type (second (params 37) 244) (contract \"nat\") 244) (set (operations 244) (cons (transfer (getLocal \"__s23\" 244) (literal (mutez 0) 244) (second (params 37) 244) 37) (operations 244) 244) 244))) (getTotalSupply True ((bind \"__s24\" ((set_type (first (params 45) 244) \"unit\" 46) (result (attr (data) \"totalSupply\" 72) 47))) (set_type (second (params 45) 244) (contract \"nat\") 244) (set (operations 244) (cons (transfer (getLocal \"__s24\" 244) (literal (mutez 0) 244) (second (params 45) 244) 45) (operations 244) 244) 244))) (mint True ((set_type (params 59) (record ((address \"address\") (value \"nat\")) None) 60) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 61) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (attr (params 59) \"value\" 63) 63) 63) (set (attr (data) \"totalSupply\" 72) (add (attr (data) \"totalSupply\" 72) (attr (params 59) \"value\" 63) 64) 64))) (setAdministrator True ((set_type (params 79) \"address\" 80) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 81) (set (attr (data) \"administrator\" 76) (params 79) 82))) (setPause True ((set_type (params 94) \"bool\" 95) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 96) (set (attr (data) \"paused\" 91) (params 94) 97))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 76) 76) (and (invert (attr (data) \"paused\" 91) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 76) 76) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 244, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 28)", "export": "(storage (record 28 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 32 ) (bigmap (unknown 18) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 32)) (paused (literal (bool False) 28)) (state (literal (intOrNat 1) 28)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (totalSupply (literal (intOrNat 0) 28)) (underlyingBalance (literal (nat 0) 39)))\nstorage_type (())\nmessages ((approve True ((set_type (params 82) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 83) (ifBlock (invert (contains (attr (data) \"balances\" 95) (sender) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (sender) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (invert (attr (data) \"paused\" 148) 89) 89) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 95) (sender) 90) \"approvals\" 90) (attr (params 82) \"spender\" 90) (literal (intOrNat 0) 90) 90) (literal (intOrNat 0) 91) 91) (eq (attr (params 82) \"value\" 91) (literal (intOrNat 0) 91) 91) 91) (literal (string \"UnsafeAllowanceChange\") 91) 91) (set (getItem (attr (getItem (attr (data) \"balances\" 95) (sender) 92) \"approvals\" 92) (attr (params 82) \"spender\" 90) 92) (attr (params 82) \"value\" 91) 92))) (burn True ((set_type (params 123) (record ((address \"address\") (value \"nat\")) None) 124) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 127) 127) 127) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 129) \"balance\" 129) (attr (params 123) \"value\" 129) 129) 129) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (attr (params 123) \"value\" 129) 130) 130) \"Some\" \"None\" 130) 130) (set (attr (data) \"totalSupply\" 131) (openVariant (isNat (sub (attr (data) \"totalSupply\" 131) (attr (params 123) \"value\" 129) 131) 131) \"Some\" \"None\" 131) 131))) (deposit True ((set_type (params 45) \"nat\" 46) (defineLocal \"newTokens\" (mul (params 45) (literal (intOrNat 1000000000000000000) 49) 49) 49) (ifBlock (neq (attr (data) \"totalSupply\" 131) (literal (nat 0) 50) 50) ((defineLocal \"newUnderlyingBalance\" (add (attr (data) \"underlyingBalance\" 51) (params 45) 51) 51) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 45) (literal (intOrNat 1000000000000000000) 52) 52) (getLocal \"newUnderlyingBalance\" 52) 52) 52) (set (getLocal \"newTokens\" 251) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 53) (attr (data) \"totalSupply\" 131) 53) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 53) (getLocal \"fractionOfPoolOwnership\" 53) 53) 53) \"Some\" \"None\" 53) 53) 53)) 50) (set (attr (data) \"underlyingBalance\" 51) (add (attr (data) \"underlyingBalance\" 51) (params 45) 56) 56) (set (operations 69) (cons (transfer (record 59 (from_ (sender)) (to_ (to_address (self) \"None\")) (value (params 45))) (literal (mutez 0) 69) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 64) \"Some\" \"None\" 64) 69) (operations 69) 69) 69) (set (operations 81) (cons (transfer (record 72 (address (sender)) (value (getLocal \"newTokens\" 74))) (literal (mutez 0) 81) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 76) \"Some\" \"None\" 76) 81) (operations 81) 81) 81))) (getAdministrator True ((bind \"__s25\" ((set_type (first (params 143) 251) \"unit\" 144) (result (attr (data) \"administrator\" 134) 145))) (set_type (second (params 143) 251) (contract \"address\") 251) (set (operations 251) (cons (transfer (getLocal \"__s25\" 251) (literal (mutez 0) 251) (second (params 143) 251) 143) (operations 251) 251) 251))) (getAllowance True ((bind \"__s26\" ((result (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (first (params 103) 251) \"owner\" 104) 104) \"approvals\" 104) (attr (first (params 103) 251) \"spender\" 104) 104) 104))) (set_type (second (params 103) 251) (contract \"nat\") 251) (set (operations 251) (cons (transfer (getLocal \"__s26\" 251) (literal (mutez 0) 251) (second (params 103) 251) 103) (operations 251) 251) 251))) (getBalance True ((bind \"__s27\" ((result (attr (getItem (attr (data) \"balances\" 95) (first (params 99) 251) 100) \"balance\" 100) 100))) (set_type (second (params 99) 251) (contract \"nat\") 251) (set (operations 251) (cons (transfer (getLocal \"__s27\" 251) (literal (mutez 0) 251) (second (params 99) 251) 99) (operations 251) 251) 251))) (getTotalSupply True ((bind \"__s28\" ((set_type (first (params 107) 251) \"unit\" 108) (result (attr (data) \"totalSupply\" 131) 109))) (set_type (second (params 107) 251) (contract \"nat\") 251) (set (operations 251) (cons (transfer (getLocal \"__s28\" 251) (literal (mutez 0) 251) (second (params 107) 251) 107) (operations 251) 251) 251))) (mint True ((set_type (params 112) (record ((address \"address\") (value \"nat\")) None) 113) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 116) 116) 116) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (attr (params 112) \"value\" 119) 119) 119) (set (attr (data) \"totalSupply\" 131) (add (attr (data) \"totalSupply\" 131) (attr (params 112) \"value\" 119) 120) 120))) (redeem True ((set_type (params 85) \"nat\" 86) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 85) (literal (intOrNat 1000000000000000000) 88) 88) (attr (data) \"totalSupply\" 131) 88) 88) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 89) (attr (data) \"underlyingBalance\" 51) 89) (literal (intOrNat 1000000000000000000) 89) 89) 89) (set (attr (data) \"underlyingBalance\" 51) (openVariant (isNat (sub (attr (data) \"underlyingBalance\" 51) (getLocal \"tokensToReceive\" 92) 92) 92) \"Some\" \"None\" 92) 92) (set (operations 104) (cons (transfer (record 95 (address (sender)) (value (params 85))) (literal (mutez 0) 104) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 99) \"Some\" \"None\" 99) 104) (operations 104) 104) 104) (set (operations 117) (cons (transfer (record 107 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (getLocal \"tokensToReceive\" 110))) (literal (mutez 0) 117) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 112) \"Some\" \"None\" 112) 117) (operations 117) 117) 117))) (setAdministrator True ((set_type (params 137) \"address\" 138) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 139) (set (attr (data) \"administrator\" 134) (params 137) 140))) (setPause True ((set_type (params 151) \"bool\" 152) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 153) (set (attr (data) \"paused\" 148) (params 151) 154))) (transfer True ((set_type (params 68) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 69) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (and (invert (attr (data) \"paused\" 148) 71) (or (eq (attr (params 68) \"from_\" 72) (sender) 72) (ge (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 73) \"approvals\" 73) (sender) 73) (attr (params 68) \"value\" 73) 73) 72) 71) 70) 70) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 75) \"balance\" 75) (attr (params 68) \"value\" 73) 75) 75) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (attr (params 68) \"value\" 73) 76) 76) \"Some\" \"None\" 76) 76) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (attr (params 68) \"value\" 73) 77) 77) (ifBlock (and (neq (attr (params 68) \"from_\" 72) (sender) 78) (invert (eq (sender) (attr (data) \"administrator\" 134) 134) 78) 78) ((set (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (attr (params 68) \"value\" 73) 79) 79) \"Some\" \"None\" 79) 79)) 78))) (updateBalance True ((set_type (params 121) \"unit\" 122) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 0) 125) 125) (literal (string \"bad state\") 125) 125) (set (attr (data) \"state\" 125) (literal (intOrNat 1) 128) 128) (set (operations 137) (cons (transfer (tuple 137 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 131)) (literal (mutez 0) 137) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 66) 132) \"Some\" \"None\" 132) 137) (operations 137) 137) 137))) (updateBalance_callback True ((set_type (params 141) \"nat\" 142) (verify (eq (sender) (attr (data) \"tokenAddress\" 66) 145) (literal (string \"bad sender\") 145) 145) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 1) 148) 148) (literal (string \"bad state\") 148) 148) (set (attr (data) \"state\" 125) (literal (intOrNat 0) 151) 151) (set (attr (data) \"underlyingBalance\" 51) (params 141) 154))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 251, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "updateBalance_callback", "params": "(literal (nat 15) 254)", "line_no": 255, "title": "", "messageClass": "", "source": "none", "sender": "(literal (local-address (static_id 0 8)) 8)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 255)", "show": true, "valid": "(literal (bool True) 255)", "voting_powers": "(map 255 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 255) \"underlyingBalance\" 260) (literal (nat 15) 254) 260)", "line_no": 260}], "decompile": false, "kind": "test"}, {"shortname": "updateBalance_callback_-_fails_if_not_called_from_token_contract", "longname": "updateBalance_callback - fails if not called from token contract", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 24) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 91) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 67) (record ((address \"address\") (value \"nat\")) None) 68) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 69) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 70) \"balance\" 70) (attr (params 67) \"value\" 70) 70) 70) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (attr (params 67) \"value\" 70) 71) 71) \"Some\" \"None\" 71) 71) (set (attr (data) \"totalSupply\" 72) (openVariant (isNat (sub (attr (data) \"totalSupply\" 72) (attr (params 67) \"value\" 70) 72) 72) \"Some\" \"None\" 72) 72))) (getAdministrator True ((bind \"__s29\" ((set_type (first (params 85) 270) \"unit\" 86) (result (attr (data) \"administrator\" 76) 87))) (set_type (second (params 85) 270) (contract \"address\") 270) (set (operations 270) (cons (transfer (getLocal \"__s29\" 270) (literal (mutez 0) 270) (second (params 85) 270) 85) (operations 270) 270) 270))) (getAllowance True ((bind \"__s30\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 41) 270) \"owner\" 42) 42) \"approvals\" 42) (attr (first (params 41) 270) \"spender\" 42) 42) 42))) (set_type (second (params 41) 270) (contract \"nat\") 270) (set (operations 270) (cons (transfer (getLocal \"__s30\" 270) (literal (mutez 0) 270) (second (params 41) 270) 41) (operations 270) 270) 270))) (getBalance True ((bind \"__s31\" ((result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 270) 38) \"balance\" 38) 38))) (set_type (second (params 37) 270) (contract \"nat\") 270) (set (operations 270) (cons (transfer (getLocal \"__s31\" 270) (literal (mutez 0) 270) (second (params 37) 270) 37) (operations 270) 270) 270))) (getTotalSupply True ((bind \"__s32\" ((set_type (first (params 45) 270) \"unit\" 46) (result (attr (data) \"totalSupply\" 72) 47))) (set_type (second (params 45) 270) (contract \"nat\") 270) (set (operations 270) (cons (transfer (getLocal \"__s32\" 270) (literal (mutez 0) 270) (second (params 45) 270) 45) (operations 270) 270) 270))) (mint True ((set_type (params 59) (record ((address \"address\") (value \"nat\")) None) 60) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 61) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (attr (params 59) \"value\" 63) 63) 63) (set (attr (data) \"totalSupply\" 72) (add (attr (data) \"totalSupply\" 72) (attr (params 59) \"value\" 63) 64) 64))) (setAdministrator True ((set_type (params 79) \"address\" 80) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 81) (set (attr (data) \"administrator\" 76) (params 79) 82))) (setPause True ((set_type (params 94) \"bool\" 95) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 96) (set (attr (data) \"paused\" 91) (params 94) 97))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 76) 76) (and (invert (attr (data) \"paused\" 91) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 76) 76) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 270, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 28)", "export": "(storage (record 28 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 32 ) (bigmap (unknown 25) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 32)) (paused (literal (bool False) 28)) (state (literal (intOrNat 1) 28)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (totalSupply (literal (intOrNat 0) 28)) (underlyingBalance (literal (nat 0) 39)))\nstorage_type (())\nmessages ((approve True ((set_type (params 82) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 83) (ifBlock (invert (contains (attr (data) \"balances\" 95) (sender) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (sender) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (invert (attr (data) \"paused\" 148) 89) 89) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 95) (sender) 90) \"approvals\" 90) (attr (params 82) \"spender\" 90) (literal (intOrNat 0) 90) 90) (literal (intOrNat 0) 91) 91) (eq (attr (params 82) \"value\" 91) (literal (intOrNat 0) 91) 91) 91) (literal (string \"UnsafeAllowanceChange\") 91) 91) (set (getItem (attr (getItem (attr (data) \"balances\" 95) (sender) 92) \"approvals\" 92) (attr (params 82) \"spender\" 90) 92) (attr (params 82) \"value\" 91) 92))) (burn True ((set_type (params 123) (record ((address \"address\") (value \"nat\")) None) 124) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 127) 127) 127) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 129) \"balance\" 129) (attr (params 123) \"value\" 129) 129) 129) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (attr (params 123) \"value\" 129) 130) 130) \"Some\" \"None\" 130) 130) (set (attr (data) \"totalSupply\" 131) (openVariant (isNat (sub (attr (data) \"totalSupply\" 131) (attr (params 123) \"value\" 129) 131) 131) \"Some\" \"None\" 131) 131))) (deposit True ((set_type (params 45) \"nat\" 46) (defineLocal \"newTokens\" (mul (params 45) (literal (intOrNat 1000000000000000000) 49) 49) 49) (ifBlock (neq (attr (data) \"totalSupply\" 131) (literal (nat 0) 50) 50) ((defineLocal \"newUnderlyingBalance\" (add (attr (data) \"underlyingBalance\" 51) (params 45) 51) 51) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 45) (literal (intOrNat 1000000000000000000) 52) 52) (getLocal \"newUnderlyingBalance\" 52) 52) 52) (set (getLocal \"newTokens\" 277) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 53) (attr (data) \"totalSupply\" 131) 53) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 53) (getLocal \"fractionOfPoolOwnership\" 53) 53) 53) \"Some\" \"None\" 53) 53) 53)) 50) (set (attr (data) \"underlyingBalance\" 51) (add (attr (data) \"underlyingBalance\" 51) (params 45) 56) 56) (set (operations 69) (cons (transfer (record 59 (from_ (sender)) (to_ (to_address (self) \"None\")) (value (params 45))) (literal (mutez 0) 69) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 64) \"Some\" \"None\" 64) 69) (operations 69) 69) 69) (set (operations 81) (cons (transfer (record 72 (address (sender)) (value (getLocal \"newTokens\" 74))) (literal (mutez 0) 81) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 76) \"Some\" \"None\" 76) 81) (operations 81) 81) 81))) (getAdministrator True ((bind \"__s33\" ((set_type (first (params 143) 277) \"unit\" 144) (result (attr (data) \"administrator\" 134) 145))) (set_type (second (params 143) 277) (contract \"address\") 277) (set (operations 277) (cons (transfer (getLocal \"__s33\" 277) (literal (mutez 0) 277) (second (params 143) 277) 143) (operations 277) 277) 277))) (getAllowance True ((bind \"__s34\" ((result (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (first (params 103) 277) \"owner\" 104) 104) \"approvals\" 104) (attr (first (params 103) 277) \"spender\" 104) 104) 104))) (set_type (second (params 103) 277) (contract \"nat\") 277) (set (operations 277) (cons (transfer (getLocal \"__s34\" 277) (literal (mutez 0) 277) (second (params 103) 277) 103) (operations 277) 277) 277))) (getBalance True ((bind \"__s35\" ((result (attr (getItem (attr (data) \"balances\" 95) (first (params 99) 277) 100) \"balance\" 100) 100))) (set_type (second (params 99) 277) (contract \"nat\") 277) (set (operations 277) (cons (transfer (getLocal \"__s35\" 277) (literal (mutez 0) 277) (second (params 99) 277) 99) (operations 277) 277) 277))) (getTotalSupply True ((bind \"__s36\" ((set_type (first (params 107) 277) \"unit\" 108) (result (attr (data) \"totalSupply\" 131) 109))) (set_type (second (params 107) 277) (contract \"nat\") 277) (set (operations 277) (cons (transfer (getLocal \"__s36\" 277) (literal (mutez 0) 277) (second (params 107) 277) 107) (operations 277) 277) 277))) (mint True ((set_type (params 112) (record ((address \"address\") (value \"nat\")) None) 113) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 116) 116) 116) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (attr (params 112) \"value\" 119) 119) 119) (set (attr (data) \"totalSupply\" 131) (add (attr (data) \"totalSupply\" 131) (attr (params 112) \"value\" 119) 120) 120))) (redeem True ((set_type (params 85) \"nat\" 86) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 85) (literal (intOrNat 1000000000000000000) 88) 88) (attr (data) \"totalSupply\" 131) 88) 88) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 89) (attr (data) \"underlyingBalance\" 51) 89) (literal (intOrNat 1000000000000000000) 89) 89) 89) (set (attr (data) \"underlyingBalance\" 51) (openVariant (isNat (sub (attr (data) \"underlyingBalance\" 51) (getLocal \"tokensToReceive\" 92) 92) 92) \"Some\" \"None\" 92) 92) (set (operations 104) (cons (transfer (record 95 (address (sender)) (value (params 85))) (literal (mutez 0) 104) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 99) \"Some\" \"None\" 99) 104) (operations 104) 104) 104) (set (operations 117) (cons (transfer (record 107 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (getLocal \"tokensToReceive\" 110))) (literal (mutez 0) 117) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 112) \"Some\" \"None\" 112) 117) (operations 117) 117) 117))) (setAdministrator True ((set_type (params 137) \"address\" 138) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 139) (set (attr (data) \"administrator\" 134) (params 137) 140))) (setPause True ((set_type (params 151) \"bool\" 152) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 153) (set (attr (data) \"paused\" 148) (params 151) 154))) (transfer True ((set_type (params 68) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 69) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (and (invert (attr (data) \"paused\" 148) 71) (or (eq (attr (params 68) \"from_\" 72) (sender) 72) (ge (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 73) \"approvals\" 73) (sender) 73) (attr (params 68) \"value\" 73) 73) 72) 71) 70) 70) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 75) \"balance\" 75) (attr (params 68) \"value\" 73) 75) 75) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (attr (params 68) \"value\" 73) 76) 76) \"Some\" \"None\" 76) 76) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (attr (params 68) \"value\" 73) 77) 77) (ifBlock (and (neq (attr (params 68) \"from_\" 72) (sender) 78) (invert (eq (sender) (attr (data) \"administrator\" 134) 134) 78) 78) ((set (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (attr (params 68) \"value\" 73) 79) 79) \"Some\" \"None\" 79) 79)) 78))) (updateBalance True ((set_type (params 121) \"unit\" 122) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 0) 125) 125) (literal (string \"bad state\") 125) 125) (set (attr (data) \"state\" 125) (literal (intOrNat 1) 128) 128) (set (operations 137) (cons (transfer (tuple 137 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 131)) (literal (mutez 0) 137) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 66) 132) \"Some\" \"None\" 132) 137) (operations 137) 137) 137))) (updateBalance_callback True ((set_type (params 141) \"nat\" 142) (verify (eq (sender) (attr (data) \"tokenAddress\" 66) 145) (literal (string \"bad sender\") 145) 145) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 1) 148) 148) (literal (string \"bad state\") 148) 148) (set (attr (data) \"state\" 125) (literal (intOrNat 0) 151) 151) (set (attr (data) \"underlyingBalance\" 51) (params 141) 154))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 277, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "updateBalance_callback", "params": "(literal (nat 15) 280)", "line_no": 281, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1bTpviNnyx2PXsNmGpCQTMQsGoYordkUoA\") 15)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 281)", "show": true, "valid": "(literal (bool False) 281)", "voting_powers": "(map 281 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "updateBalance_callback_-_fails_if_not_called_from_IDLE_state", "longname": "updateBalance_callback - fails if not called from IDLE state", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 31) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 91) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 67) (record ((address \"address\") (value \"nat\")) None) 68) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 69) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 70) \"balance\" 70) (attr (params 67) \"value\" 70) 70) 70) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (attr (params 67) \"value\" 70) 71) 71) \"Some\" \"None\" 71) 71) (set (attr (data) \"totalSupply\" 72) (openVariant (isNat (sub (attr (data) \"totalSupply\" 72) (attr (params 67) \"value\" 70) 72) 72) \"Some\" \"None\" 72) 72))) (getAdministrator True ((bind \"__s37\" ((set_type (first (params 85) 294) \"unit\" 86) (result (attr (data) \"administrator\" 76) 87))) (set_type (second (params 85) 294) (contract \"address\") 294) (set (operations 294) (cons (transfer (getLocal \"__s37\" 294) (literal (mutez 0) 294) (second (params 85) 294) 85) (operations 294) 294) 294))) (getAllowance True ((bind \"__s38\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 41) 294) \"owner\" 42) 42) \"approvals\" 42) (attr (first (params 41) 294) \"spender\" 42) 42) 42))) (set_type (second (params 41) 294) (contract \"nat\") 294) (set (operations 294) (cons (transfer (getLocal \"__s38\" 294) (literal (mutez 0) 294) (second (params 41) 294) 41) (operations 294) 294) 294))) (getBalance True ((bind \"__s39\" ((result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 294) 38) \"balance\" 38) 38))) (set_type (second (params 37) 294) (contract \"nat\") 294) (set (operations 294) (cons (transfer (getLocal \"__s39\" 294) (literal (mutez 0) 294) (second (params 37) 294) 37) (operations 294) 294) 294))) (getTotalSupply True ((bind \"__s40\" ((set_type (first (params 45) 294) \"unit\" 46) (result (attr (data) \"totalSupply\" 72) 47))) (set_type (second (params 45) 294) (contract \"nat\") 294) (set (operations 294) (cons (transfer (getLocal \"__s40\" 294) (literal (mutez 0) 294) (second (params 45) 294) 45) (operations 294) 294) 294))) (mint True ((set_type (params 59) (record ((address \"address\") (value \"nat\")) None) 60) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 61) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (attr (params 59) \"value\" 63) 63) 63) (set (attr (data) \"totalSupply\" 72) (add (attr (data) \"totalSupply\" 72) (attr (params 59) \"value\" 63) 64) 64))) (setAdministrator True ((set_type (params 79) \"address\" 80) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 81) (set (attr (data) \"administrator\" 76) (params 79) 82))) (setPause True ((set_type (params 94) \"bool\" 95) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 96) (set (attr (data) \"paused\" 91) (params 94) 97))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 76) 76) (and (invert (attr (data) \"paused\" 91) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 76) 76) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 294, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 28)", "export": "(storage (record 28 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 32 ) (bigmap (unknown 32) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 32)) (paused (literal (bool False) 28)) (state (literal (intOrNat 0) 28)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (totalSupply (literal (intOrNat 0) 28)) (underlyingBalance (literal (nat 0) 39)))\nstorage_type (())\nmessages ((approve True ((set_type (params 82) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 83) (ifBlock (invert (contains (attr (data) \"balances\" 95) (sender) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (sender) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (invert (attr (data) \"paused\" 148) 89) 89) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 95) (sender) 90) \"approvals\" 90) (attr (params 82) \"spender\" 90) (literal (intOrNat 0) 90) 90) (literal (intOrNat 0) 91) 91) (eq (attr (params 82) \"value\" 91) (literal (intOrNat 0) 91) 91) 91) (literal (string \"UnsafeAllowanceChange\") 91) 91) (set (getItem (attr (getItem (attr (data) \"balances\" 95) (sender) 92) \"approvals\" 92) (attr (params 82) \"spender\" 90) 92) (attr (params 82) \"value\" 91) 92))) (burn True ((set_type (params 123) (record ((address \"address\") (value \"nat\")) None) 124) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 127) 127) 127) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 129) \"balance\" 129) (attr (params 123) \"value\" 129) 129) 129) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (attr (params 123) \"value\" 129) 130) 130) \"Some\" \"None\" 130) 130) (set (attr (data) \"totalSupply\" 131) (openVariant (isNat (sub (attr (data) \"totalSupply\" 131) (attr (params 123) \"value\" 129) 131) 131) \"Some\" \"None\" 131) 131))) (deposit True ((set_type (params 45) \"nat\" 46) (defineLocal \"newTokens\" (mul (params 45) (literal (intOrNat 1000000000000000000) 49) 49) 49) (ifBlock (neq (attr (data) \"totalSupply\" 131) (literal (nat 0) 50) 50) ((defineLocal \"newUnderlyingBalance\" (add (attr (data) \"underlyingBalance\" 51) (params 45) 51) 51) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 45) (literal (intOrNat 1000000000000000000) 52) 52) (getLocal \"newUnderlyingBalance\" 52) 52) 52) (set (getLocal \"newTokens\" 301) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 53) (attr (data) \"totalSupply\" 131) 53) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 53) (getLocal \"fractionOfPoolOwnership\" 53) 53) 53) \"Some\" \"None\" 53) 53) 53)) 50) (set (attr (data) \"underlyingBalance\" 51) (add (attr (data) \"underlyingBalance\" 51) (params 45) 56) 56) (set (operations 69) (cons (transfer (record 59 (from_ (sender)) (to_ (to_address (self) \"None\")) (value (params 45))) (literal (mutez 0) 69) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 64) \"Some\" \"None\" 64) 69) (operations 69) 69) 69) (set (operations 81) (cons (transfer (record 72 (address (sender)) (value (getLocal \"newTokens\" 74))) (literal (mutez 0) 81) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 76) \"Some\" \"None\" 76) 81) (operations 81) 81) 81))) (getAdministrator True ((bind \"__s41\" ((set_type (first (params 143) 301) \"unit\" 144) (result (attr (data) \"administrator\" 134) 145))) (set_type (second (params 143) 301) (contract \"address\") 301) (set (operations 301) (cons (transfer (getLocal \"__s41\" 301) (literal (mutez 0) 301) (second (params 143) 301) 143) (operations 301) 301) 301))) (getAllowance True ((bind \"__s42\" ((result (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (first (params 103) 301) \"owner\" 104) 104) \"approvals\" 104) (attr (first (params 103) 301) \"spender\" 104) 104) 104))) (set_type (second (params 103) 301) (contract \"nat\") 301) (set (operations 301) (cons (transfer (getLocal \"__s42\" 301) (literal (mutez 0) 301) (second (params 103) 301) 103) (operations 301) 301) 301))) (getBalance True ((bind \"__s43\" ((result (attr (getItem (attr (data) \"balances\" 95) (first (params 99) 301) 100) \"balance\" 100) 100))) (set_type (second (params 99) 301) (contract \"nat\") 301) (set (operations 301) (cons (transfer (getLocal \"__s43\" 301) (literal (mutez 0) 301) (second (params 99) 301) 99) (operations 301) 301) 301))) (getTotalSupply True ((bind \"__s44\" ((set_type (first (params 107) 301) \"unit\" 108) (result (attr (data) \"totalSupply\" 131) 109))) (set_type (second (params 107) 301) (contract \"nat\") 301) (set (operations 301) (cons (transfer (getLocal \"__s44\" 301) (literal (mutez 0) 301) (second (params 107) 301) 107) (operations 301) 301) 301))) (mint True ((set_type (params 112) (record ((address \"address\") (value \"nat\")) None) 113) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 116) 116) 116) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (attr (params 112) \"value\" 119) 119) 119) (set (attr (data) \"totalSupply\" 131) (add (attr (data) \"totalSupply\" 131) (attr (params 112) \"value\" 119) 120) 120))) (redeem True ((set_type (params 85) \"nat\" 86) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 85) (literal (intOrNat 1000000000000000000) 88) 88) (attr (data) \"totalSupply\" 131) 88) 88) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 89) (attr (data) \"underlyingBalance\" 51) 89) (literal (intOrNat 1000000000000000000) 89) 89) 89) (set (attr (data) \"underlyingBalance\" 51) (openVariant (isNat (sub (attr (data) \"underlyingBalance\" 51) (getLocal \"tokensToReceive\" 92) 92) 92) \"Some\" \"None\" 92) 92) (set (operations 104) (cons (transfer (record 95 (address (sender)) (value (params 85))) (literal (mutez 0) 104) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 99) \"Some\" \"None\" 99) 104) (operations 104) 104) 104) (set (operations 117) (cons (transfer (record 107 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (getLocal \"tokensToReceive\" 110))) (literal (mutez 0) 117) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 112) \"Some\" \"None\" 112) 117) (operations 117) 117) 117))) (setAdministrator True ((set_type (params 137) \"address\" 138) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 139) (set (attr (data) \"administrator\" 134) (params 137) 140))) (setPause True ((set_type (params 151) \"bool\" 152) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 153) (set (attr (data) \"paused\" 148) (params 151) 154))) (transfer True ((set_type (params 68) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 69) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (and (invert (attr (data) \"paused\" 148) 71) (or (eq (attr (params 68) \"from_\" 72) (sender) 72) (ge (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 73) \"approvals\" 73) (sender) 73) (attr (params 68) \"value\" 73) 73) 72) 71) 70) 70) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 75) \"balance\" 75) (attr (params 68) \"value\" 73) 75) 75) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (attr (params 68) \"value\" 73) 76) 76) \"Some\" \"None\" 76) 76) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (attr (params 68) \"value\" 73) 77) 77) (ifBlock (and (neq (attr (params 68) \"from_\" 72) (sender) 78) (invert (eq (sender) (attr (data) \"administrator\" 134) 134) 78) 78) ((set (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (attr (params 68) \"value\" 73) 79) 79) \"Some\" \"None\" 79) 79)) 78))) (updateBalance True ((set_type (params 121) \"unit\" 122) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 0) 125) 125) (literal (string \"bad state\") 125) 125) (set (attr (data) \"state\" 125) (literal (intOrNat 1) 128) 128) (set (operations 137) (cons (transfer (tuple 137 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 131)) (literal (mutez 0) 137) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 66) 132) \"Some\" \"None\" 132) 137) (operations 137) 137) 137))) (updateBalance_callback True ((set_type (params 141) \"nat\" 142) (verify (eq (sender) (attr (data) \"tokenAddress\" 66) 145) (literal (string \"bad sender\") 145) 145) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 1) 148) 148) (literal (string \"bad state\") 148) 148) (set (attr (data) \"state\" 125) (literal (intOrNat 0) 151) 151) (set (attr (data) \"underlyingBalance\" 51) (params 141) 154))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 301, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "updateBalance_callback", "params": "(literal (nat 15) 304)", "line_no": 305, "title": "", "messageClass": "", "source": "none", "sender": "(literal (local-address (static_id 0 8)) 8)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 305)", "show": true, "valid": "(literal (bool False) 305)", "voting_powers": "(map 305 )", "export": true}], "decompile": false, "kind": "test"}, {"shortname": "deposit_-_can_deposit_from_one_account", "longname": "deposit - can deposit from one account", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 38) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 91) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 67) (record ((address \"address\") (value \"nat\")) None) 68) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 69) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 70) \"balance\" 70) (attr (params 67) \"value\" 70) 70) 70) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (attr (params 67) \"value\" 70) 71) 71) \"Some\" \"None\" 71) 71) (set (attr (data) \"totalSupply\" 72) (openVariant (isNat (sub (attr (data) \"totalSupply\" 72) (attr (params 67) \"value\" 70) 72) 72) \"Some\" \"None\" 72) 72))) (getAdministrator True ((bind \"__s45\" ((set_type (first (params 85) 322) \"unit\" 86) (result (attr (data) \"administrator\" 76) 87))) (set_type (second (params 85) 322) (contract \"address\") 322) (set (operations 322) (cons (transfer (getLocal \"__s45\" 322) (literal (mutez 0) 322) (second (params 85) 322) 85) (operations 322) 322) 322))) (getAllowance True ((bind \"__s46\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 41) 322) \"owner\" 42) 42) \"approvals\" 42) (attr (first (params 41) 322) \"spender\" 42) 42) 42))) (set_type (second (params 41) 322) (contract \"nat\") 322) (set (operations 322) (cons (transfer (getLocal \"__s46\" 322) (literal (mutez 0) 322) (second (params 41) 322) 41) (operations 322) 322) 322))) (getBalance True ((bind \"__s47\" ((result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 322) 38) \"balance\" 38) 38))) (set_type (second (params 37) 322) (contract \"nat\") 322) (set (operations 322) (cons (transfer (getLocal \"__s47\" 322) (literal (mutez 0) 322) (second (params 37) 322) 37) (operations 322) 322) 322))) (getTotalSupply True ((bind \"__s48\" ((set_type (first (params 45) 322) \"unit\" 46) (result (attr (data) \"totalSupply\" 72) 47))) (set_type (second (params 45) 322) (contract \"nat\") 322) (set (operations 322) (cons (transfer (getLocal \"__s48\" 322) (literal (mutez 0) 322) (second (params 45) 322) 45) (operations 322) 322) 322))) (mint True ((set_type (params 59) (record ((address \"address\") (value \"nat\")) None) 60) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 61) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (attr (params 59) \"value\" 63) 63) 63) (set (attr (data) \"totalSupply\" 72) (add (attr (data) \"totalSupply\" 72) (attr (params 59) \"value\" 63) 64) 64))) (setAdministrator True ((set_type (params 79) \"address\" 80) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 81) (set (attr (data) \"administrator\" 76) (params 79) 82))) (setPause True ((set_type (params 94) \"bool\" 95) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 96) (set (attr (data) \"paused\" 91) (params 94) 97))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 76) 76) (and (invert (attr (data) \"paused\" 91) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 76) 76) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 322, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 28)", "export": "(storage (record 28 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 32 ) (bigmap (unknown 39) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 32)) (paused (literal (bool False) 28)) (state (literal (intOrNat 0) 28)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (totalSupply (literal (intOrNat 0) 28)) (underlyingBalance (literal (nat 0) 39)))\nstorage_type (())\nmessages ((approve True ((set_type (params 82) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 83) (ifBlock (invert (contains (attr (data) \"balances\" 95) (sender) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (sender) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (invert (attr (data) \"paused\" 148) 89) 89) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 95) (sender) 90) \"approvals\" 90) (attr (params 82) \"spender\" 90) (literal (intOrNat 0) 90) 90) (literal (intOrNat 0) 91) 91) (eq (attr (params 82) \"value\" 91) (literal (intOrNat 0) 91) 91) 91) (literal (string \"UnsafeAllowanceChange\") 91) 91) (set (getItem (attr (getItem (attr (data) \"balances\" 95) (sender) 92) \"approvals\" 92) (attr (params 82) \"spender\" 90) 92) (attr (params 82) \"value\" 91) 92))) (burn True ((set_type (params 123) (record ((address \"address\") (value \"nat\")) None) 124) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 127) 127) 127) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 129) \"balance\" 129) (attr (params 123) \"value\" 129) 129) 129) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (attr (params 123) \"value\" 129) 130) 130) \"Some\" \"None\" 130) 130) (set (attr (data) \"totalSupply\" 131) (openVariant (isNat (sub (attr (data) \"totalSupply\" 131) (attr (params 123) \"value\" 129) 131) 131) \"Some\" \"None\" 131) 131))) (deposit True ((set_type (params 45) \"nat\" 46) (defineLocal \"newTokens\" (mul (params 45) (literal (intOrNat 1000000000000000000) 49) 49) 49) (ifBlock (neq (attr (data) \"totalSupply\" 131) (literal (nat 0) 50) 50) ((defineLocal \"newUnderlyingBalance\" (add (attr (data) \"underlyingBalance\" 51) (params 45) 51) 51) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 45) (literal (intOrNat 1000000000000000000) 52) 52) (getLocal \"newUnderlyingBalance\" 52) 52) 52) (set (getLocal \"newTokens\" 328) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 53) (attr (data) \"totalSupply\" 131) 53) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 53) (getLocal \"fractionOfPoolOwnership\" 53) 53) 53) \"Some\" \"None\" 53) 53) 53)) 50) (set (attr (data) \"underlyingBalance\" 51) (add (attr (data) \"underlyingBalance\" 51) (params 45) 56) 56) (set (operations 69) (cons (transfer (record 59 (from_ (sender)) (to_ (to_address (self) \"None\")) (value (params 45))) (literal (mutez 0) 69) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 64) \"Some\" \"None\" 64) 69) (operations 69) 69) 69) (set (operations 81) (cons (transfer (record 72 (address (sender)) (value (getLocal \"newTokens\" 74))) (literal (mutez 0) 81) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 76) \"Some\" \"None\" 76) 81) (operations 81) 81) 81))) (getAdministrator True ((bind \"__s49\" ((set_type (first (params 143) 328) \"unit\" 144) (result (attr (data) \"administrator\" 134) 145))) (set_type (second (params 143) 328) (contract \"address\") 328) (set (operations 328) (cons (transfer (getLocal \"__s49\" 328) (literal (mutez 0) 328) (second (params 143) 328) 143) (operations 328) 328) 328))) (getAllowance True ((bind \"__s50\" ((result (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (first (params 103) 328) \"owner\" 104) 104) \"approvals\" 104) (attr (first (params 103) 328) \"spender\" 104) 104) 104))) (set_type (second (params 103) 328) (contract \"nat\") 328) (set (operations 328) (cons (transfer (getLocal \"__s50\" 328) (literal (mutez 0) 328) (second (params 103) 328) 103) (operations 328) 328) 328))) (getBalance True ((bind \"__s51\" ((result (attr (getItem (attr (data) \"balances\" 95) (first (params 99) 328) 100) \"balance\" 100) 100))) (set_type (second (params 99) 328) (contract \"nat\") 328) (set (operations 328) (cons (transfer (getLocal \"__s51\" 328) (literal (mutez 0) 328) (second (params 99) 328) 99) (operations 328) 328) 328))) (getTotalSupply True ((bind \"__s52\" ((set_type (first (params 107) 328) \"unit\" 108) (result (attr (data) \"totalSupply\" 131) 109))) (set_type (second (params 107) 328) (contract \"nat\") 328) (set (operations 328) (cons (transfer (getLocal \"__s52\" 328) (literal (mutez 0) 328) (second (params 107) 328) 107) (operations 328) 328) 328))) (mint True ((set_type (params 112) (record ((address \"address\") (value \"nat\")) None) 113) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 116) 116) 116) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (attr (params 112) \"value\" 119) 119) 119) (set (attr (data) \"totalSupply\" 131) (add (attr (data) \"totalSupply\" 131) (attr (params 112) \"value\" 119) 120) 120))) (redeem True ((set_type (params 85) \"nat\" 86) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 85) (literal (intOrNat 1000000000000000000) 88) 88) (attr (data) \"totalSupply\" 131) 88) 88) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 89) (attr (data) \"underlyingBalance\" 51) 89) (literal (intOrNat 1000000000000000000) 89) 89) 89) (set (attr (data) \"underlyingBalance\" 51) (openVariant (isNat (sub (attr (data) \"underlyingBalance\" 51) (getLocal \"tokensToReceive\" 92) 92) 92) \"Some\" \"None\" 92) 92) (set (operations 104) (cons (transfer (record 95 (address (sender)) (value (params 85))) (literal (mutez 0) 104) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 99) \"Some\" \"None\" 99) 104) (operations 104) 104) 104) (set (operations 117) (cons (transfer (record 107 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (getLocal \"tokensToReceive\" 110))) (literal (mutez 0) 117) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 112) \"Some\" \"None\" 112) 117) (operations 117) 117) 117))) (setAdministrator True ((set_type (params 137) \"address\" 138) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 139) (set (attr (data) \"administrator\" 134) (params 137) 140))) (setPause True ((set_type (params 151) \"bool\" 152) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 153) (set (attr (data) \"paused\" 148) (params 151) 154))) (transfer True ((set_type (params 68) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 69) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (and (invert (attr (data) \"paused\" 148) 71) (or (eq (attr (params 68) \"from_\" 72) (sender) 72) (ge (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 73) \"approvals\" 73) (sender) 73) (attr (params 68) \"value\" 73) 73) 72) 71) 70) 70) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 75) \"balance\" 75) (attr (params 68) \"value\" 73) 75) 75) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (attr (params 68) \"value\" 73) 76) 76) \"Some\" \"None\" 76) 76) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (attr (params 68) \"value\" 73) 77) 77) (ifBlock (and (neq (attr (params 68) \"from_\" 72) (sender) 78) (invert (eq (sender) (attr (data) \"administrator\" 134) 134) 78) 78) ((set (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (attr (params 68) \"value\" 73) 79) 79) \"Some\" \"None\" 79) 79)) 78))) (updateBalance True ((set_type (params 121) \"unit\" 122) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 0) 125) 125) (literal (string \"bad state\") 125) 125) (set (attr (data) \"state\" 125) (literal (intOrNat 1) 128) 128) (set (operations 137) (cons (transfer (tuple 137 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 131)) (literal (mutez 0) 137) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 66) 132) \"Some\" \"None\" 132) 137) (operations 137) 137) 137))) (updateBalance_callback True ((set_type (params 141) \"nat\" 142) (verify (eq (sender) (attr (data) \"tokenAddress\" 66) 145) (literal (string \"bad sender\") 145) 145) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 1) 148) 148) (literal (string \"bad state\") 148) 148) (set (attr (data) \"state\" 125) (literal (intOrNat 0) 151) 151) (set (attr (data) \"underlyingBalance\" 51) (params 141) 154))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 328, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 333 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)) (value (literal (nat 10) 331)))", "line_no": 332, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 332)", "show": true, "valid": "(literal (bool True) 332)", "voting_powers": "(map 332 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 343 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 10) 331)))", "line_no": 342, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 342)", "show": true, "valid": "(literal (bool True) 342)", "voting_powers": "(map 342 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 331)", "line_no": 352, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 352)", "show": true, "valid": "(literal (bool True) 352)", "voting_powers": "(map 352 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 342) \"balances\" 359) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 359) \"balance\" 359) (literal (nat 0) 359) 359)", "line_no": 359}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 352) \"balances\" 360) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 360) \"balance\" 360) (mul (literal (nat 10) 331) (literal (intOrNat 1000000000000000000) 360) 360) 360)", "line_no": 360}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 352) \"totalSupply\" 363) (mul (literal (nat 10) 331) (literal (intOrNat 1000000000000000000) 363) 363) 363)", "line_no": 363}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 342) \"balances\" 359) (literal (local-address (static_id 1 28)) 28) 366) \"balance\" 366) (literal (nat 10) 331) 366)", "line_no": 366}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 352) \"underlyingBalance\" 367) (literal (nat 10) 331) 367)", "line_no": 367}], "decompile": false, "kind": "test"}, {"shortname": "deposit_-_can_deposit_from_two_accounts", "longname": "deposit - can deposit from two accounts", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 45) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 91) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 67) (record ((address \"address\") (value \"nat\")) None) 68) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 69) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 70) \"balance\" 70) (attr (params 67) \"value\" 70) 70) 70) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (attr (params 67) \"value\" 70) 71) 71) \"Some\" \"None\" 71) 71) (set (attr (data) \"totalSupply\" 72) (openVariant (isNat (sub (attr (data) \"totalSupply\" 72) (attr (params 67) \"value\" 70) 72) 72) \"Some\" \"None\" 72) 72))) (getAdministrator True ((bind \"__s53\" ((set_type (first (params 85) 377) \"unit\" 86) (result (attr (data) \"administrator\" 76) 87))) (set_type (second (params 85) 377) (contract \"address\") 377) (set (operations 377) (cons (transfer (getLocal \"__s53\" 377) (literal (mutez 0) 377) (second (params 85) 377) 85) (operations 377) 377) 377))) (getAllowance True ((bind \"__s54\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 41) 377) \"owner\" 42) 42) \"approvals\" 42) (attr (first (params 41) 377) \"spender\" 42) 42) 42))) (set_type (second (params 41) 377) (contract \"nat\") 377) (set (operations 377) (cons (transfer (getLocal \"__s54\" 377) (literal (mutez 0) 377) (second (params 41) 377) 41) (operations 377) 377) 377))) (getBalance True ((bind \"__s55\" ((result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 377) 38) \"balance\" 38) 38))) (set_type (second (params 37) 377) (contract \"nat\") 377) (set (operations 377) (cons (transfer (getLocal \"__s55\" 377) (literal (mutez 0) 377) (second (params 37) 377) 37) (operations 377) 377) 377))) (getTotalSupply True ((bind \"__s56\" ((set_type (first (params 45) 377) \"unit\" 46) (result (attr (data) \"totalSupply\" 72) 47))) (set_type (second (params 45) 377) (contract \"nat\") 377) (set (operations 377) (cons (transfer (getLocal \"__s56\" 377) (literal (mutez 0) 377) (second (params 45) 377) 45) (operations 377) 377) 377))) (mint True ((set_type (params 59) (record ((address \"address\") (value \"nat\")) None) 60) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 61) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (attr (params 59) \"value\" 63) 63) 63) (set (attr (data) \"totalSupply\" 72) (add (attr (data) \"totalSupply\" 72) (attr (params 59) \"value\" 63) 64) 64))) (setAdministrator True ((set_type (params 79) \"address\" 80) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 81) (set (attr (data) \"administrator\" 76) (params 79) 82))) (setPause True ((set_type (params 94) \"bool\" 95) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 96) (set (attr (data) \"paused\" 91) (params 94) 97))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 76) 76) (and (invert (attr (data) \"paused\" 91) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 76) 76) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 377, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 28)", "export": "(storage (record 28 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 32 ) (bigmap (unknown 46) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 32)) (paused (literal (bool False) 28)) (state (literal (intOrNat 0) 28)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (totalSupply (literal (intOrNat 0) 28)) (underlyingBalance (literal (nat 0) 39)))\nstorage_type (())\nmessages ((approve True ((set_type (params 82) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 83) (ifBlock (invert (contains (attr (data) \"balances\" 95) (sender) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (sender) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (invert (attr (data) \"paused\" 148) 89) 89) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 95) (sender) 90) \"approvals\" 90) (attr (params 82) \"spender\" 90) (literal (intOrNat 0) 90) 90) (literal (intOrNat 0) 91) 91) (eq (attr (params 82) \"value\" 91) (literal (intOrNat 0) 91) 91) 91) (literal (string \"UnsafeAllowanceChange\") 91) 91) (set (getItem (attr (getItem (attr (data) \"balances\" 95) (sender) 92) \"approvals\" 92) (attr (params 82) \"spender\" 90) 92) (attr (params 82) \"value\" 91) 92))) (burn True ((set_type (params 123) (record ((address \"address\") (value \"nat\")) None) 124) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 127) 127) 127) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 129) \"balance\" 129) (attr (params 123) \"value\" 129) 129) 129) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (attr (params 123) \"value\" 129) 130) 130) \"Some\" \"None\" 130) 130) (set (attr (data) \"totalSupply\" 131) (openVariant (isNat (sub (attr (data) \"totalSupply\" 131) (attr (params 123) \"value\" 129) 131) 131) \"Some\" \"None\" 131) 131))) (deposit True ((set_type (params 45) \"nat\" 46) (defineLocal \"newTokens\" (mul (params 45) (literal (intOrNat 1000000000000000000) 49) 49) 49) (ifBlock (neq (attr (data) \"totalSupply\" 131) (literal (nat 0) 50) 50) ((defineLocal \"newUnderlyingBalance\" (add (attr (data) \"underlyingBalance\" 51) (params 45) 51) 51) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 45) (literal (intOrNat 1000000000000000000) 52) 52) (getLocal \"newUnderlyingBalance\" 52) 52) 52) (set (getLocal \"newTokens\" 383) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 53) (attr (data) \"totalSupply\" 131) 53) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 53) (getLocal \"fractionOfPoolOwnership\" 53) 53) 53) \"Some\" \"None\" 53) 53) 53)) 50) (set (attr (data) \"underlyingBalance\" 51) (add (attr (data) \"underlyingBalance\" 51) (params 45) 56) 56) (set (operations 69) (cons (transfer (record 59 (from_ (sender)) (to_ (to_address (self) \"None\")) (value (params 45))) (literal (mutez 0) 69) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 64) \"Some\" \"None\" 64) 69) (operations 69) 69) 69) (set (operations 81) (cons (transfer (record 72 (address (sender)) (value (getLocal \"newTokens\" 74))) (literal (mutez 0) 81) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 76) \"Some\" \"None\" 76) 81) (operations 81) 81) 81))) (getAdministrator True ((bind \"__s57\" ((set_type (first (params 143) 383) \"unit\" 144) (result (attr (data) \"administrator\" 134) 145))) (set_type (second (params 143) 383) (contract \"address\") 383) (set (operations 383) (cons (transfer (getLocal \"__s57\" 383) (literal (mutez 0) 383) (second (params 143) 383) 143) (operations 383) 383) 383))) (getAllowance True ((bind \"__s58\" ((result (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (first (params 103) 383) \"owner\" 104) 104) \"approvals\" 104) (attr (first (params 103) 383) \"spender\" 104) 104) 104))) (set_type (second (params 103) 383) (contract \"nat\") 383) (set (operations 383) (cons (transfer (getLocal \"__s58\" 383) (literal (mutez 0) 383) (second (params 103) 383) 103) (operations 383) 383) 383))) (getBalance True ((bind \"__s59\" ((result (attr (getItem (attr (data) \"balances\" 95) (first (params 99) 383) 100) \"balance\" 100) 100))) (set_type (second (params 99) 383) (contract \"nat\") 383) (set (operations 383) (cons (transfer (getLocal \"__s59\" 383) (literal (mutez 0) 383) (second (params 99) 383) 99) (operations 383) 383) 383))) (getTotalSupply True ((bind \"__s60\" ((set_type (first (params 107) 383) \"unit\" 108) (result (attr (data) \"totalSupply\" 131) 109))) (set_type (second (params 107) 383) (contract \"nat\") 383) (set (operations 383) (cons (transfer (getLocal \"__s60\" 383) (literal (mutez 0) 383) (second (params 107) 383) 107) (operations 383) 383) 383))) (mint True ((set_type (params 112) (record ((address \"address\") (value \"nat\")) None) 113) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 116) 116) 116) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (attr (params 112) \"value\" 119) 119) 119) (set (attr (data) \"totalSupply\" 131) (add (attr (data) \"totalSupply\" 131) (attr (params 112) \"value\" 119) 120) 120))) (redeem True ((set_type (params 85) \"nat\" 86) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 85) (literal (intOrNat 1000000000000000000) 88) 88) (attr (data) \"totalSupply\" 131) 88) 88) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 89) (attr (data) \"underlyingBalance\" 51) 89) (literal (intOrNat 1000000000000000000) 89) 89) 89) (set (attr (data) \"underlyingBalance\" 51) (openVariant (isNat (sub (attr (data) \"underlyingBalance\" 51) (getLocal \"tokensToReceive\" 92) 92) 92) \"Some\" \"None\" 92) 92) (set (operations 104) (cons (transfer (record 95 (address (sender)) (value (params 85))) (literal (mutez 0) 104) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 99) \"Some\" \"None\" 99) 104) (operations 104) 104) 104) (set (operations 117) (cons (transfer (record 107 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (getLocal \"tokensToReceive\" 110))) (literal (mutez 0) 117) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 112) \"Some\" \"None\" 112) 117) (operations 117) 117) 117))) (setAdministrator True ((set_type (params 137) \"address\" 138) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 139) (set (attr (data) \"administrator\" 134) (params 137) 140))) (setPause True ((set_type (params 151) \"bool\" 152) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 153) (set (attr (data) \"paused\" 148) (params 151) 154))) (transfer True ((set_type (params 68) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 69) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (and (invert (attr (data) \"paused\" 148) 71) (or (eq (attr (params 68) \"from_\" 72) (sender) 72) (ge (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 73) \"approvals\" 73) (sender) 73) (attr (params 68) \"value\" 73) 73) 72) 71) 70) 70) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 75) \"balance\" 75) (attr (params 68) \"value\" 73) 75) 75) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (attr (params 68) \"value\" 73) 76) 76) \"Some\" \"None\" 76) 76) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (attr (params 68) \"value\" 73) 77) 77) (ifBlock (and (neq (attr (params 68) \"from_\" 72) (sender) 78) (invert (eq (sender) (attr (data) \"administrator\" 134) 134) 78) 78) ((set (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (attr (params 68) \"value\" 73) 79) 79) \"Some\" \"None\" 79) 79)) 78))) (updateBalance True ((set_type (params 121) \"unit\" 122) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 0) 125) 125) (literal (string \"bad state\") 125) 125) (set (attr (data) \"state\" 125) (literal (intOrNat 1) 128) 128) (set (operations 137) (cons (transfer (tuple 137 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 131)) (literal (mutez 0) 137) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 66) 132) \"Some\" \"None\" 132) 137) (operations 137) 137) 137))) (updateBalance_callback True ((set_type (params 141) \"nat\" 142) (verify (eq (sender) (attr (data) \"tokenAddress\" 66) 145) (literal (string \"bad sender\") 145) 145) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 1) 148) 148) (literal (string \"bad state\") 148) 148) (set (attr (data) \"state\" 125) (literal (intOrNat 0) 151) 151) (set (attr (data) \"underlyingBalance\" 51) (params 141) 154))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 383, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 388 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)) (value (literal (nat 10) 386)))", "line_no": 387, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 387)", "show": true, "valid": "(literal (bool True) 387)", "voting_powers": "(map 387 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 399 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)) (value (literal (nat 40) 397)))", "line_no": 398, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 398)", "show": true, "valid": "(literal (bool True) 398)", "voting_powers": "(map 398 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 409 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 10) 386)))", "line_no": 408, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 408)", "show": true, "valid": "(literal (bool True) 408)", "voting_powers": "(map 408 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 419 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 40) 397)))", "line_no": 418, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 418)", "show": true, "valid": "(literal (bool True) 418)", "voting_powers": "(map 418 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 386)", "line_no": 428, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 428)", "show": true, "valid": "(literal (bool True) 428)", "voting_powers": "(map 428 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 397)", "line_no": 434, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 434)", "show": true, "valid": "(literal (bool True) 434)", "voting_powers": "(map 434 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 418) \"balances\" 441) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 441) \"balance\" 441) (literal (nat 0) 441) 441)", "line_no": 441}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 434) \"balances\" 442) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 442) \"balance\" 442) (mul (literal (nat 10) 386) (literal (intOrNat 1000000000000000000) 442) 442) 442)", "line_no": 442}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 418) \"balances\" 441) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11) 445) \"balance\" 445) (literal (nat 0) 445) 445)", "line_no": 445}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 434) \"balances\" 442) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11) 446) \"balance\" 446) (mul (mul (literal (nat 10) 386) (literal (intOrNat 4) 446) 446) (literal (intOrNat 1000000000000000000) 446) 446) 446)", "line_no": 446}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 434) \"totalSupply\" 449) (mul (add (literal (nat 10) 386) (literal (nat 40) 397) 449) (literal (intOrNat 1000000000000000000) 449) 449) 449)", "line_no": 449}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 418) \"balances\" 441) (literal (local-address (static_id 1 28)) 28) 452) \"balance\" 452) (add (literal (nat 10) 386) (literal (nat 40) 397) 452) 452)", "line_no": 452}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 434) \"underlyingBalance\" 453) (add (literal (nat 10) 386) (literal (nat 40) 397) 453) 453)", "line_no": 453}], "decompile": false, "kind": "test"}, {"shortname": "deposit_-_can_deposit_from_two_accounts_-_reversed", "longname": "deposit - can deposit from two accounts - reversed", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 52) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 91) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 67) (record ((address \"address\") (value \"nat\")) None) 68) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 69) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 70) \"balance\" 70) (attr (params 67) \"value\" 70) 70) 70) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (attr (params 67) \"value\" 70) 71) 71) \"Some\" \"None\" 71) 71) (set (attr (data) \"totalSupply\" 72) (openVariant (isNat (sub (attr (data) \"totalSupply\" 72) (attr (params 67) \"value\" 70) 72) 72) \"Some\" \"None\" 72) 72))) (getAdministrator True ((bind \"__s61\" ((set_type (first (params 85) 463) \"unit\" 86) (result (attr (data) \"administrator\" 76) 87))) (set_type (second (params 85) 463) (contract \"address\") 463) (set (operations 463) (cons (transfer (getLocal \"__s61\" 463) (literal (mutez 0) 463) (second (params 85) 463) 85) (operations 463) 463) 463))) (getAllowance True ((bind \"__s62\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 41) 463) \"owner\" 42) 42) \"approvals\" 42) (attr (first (params 41) 463) \"spender\" 42) 42) 42))) (set_type (second (params 41) 463) (contract \"nat\") 463) (set (operations 463) (cons (transfer (getLocal \"__s62\" 463) (literal (mutez 0) 463) (second (params 41) 463) 41) (operations 463) 463) 463))) (getBalance True ((bind \"__s63\" ((result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 463) 38) \"balance\" 38) 38))) (set_type (second (params 37) 463) (contract \"nat\") 463) (set (operations 463) (cons (transfer (getLocal \"__s63\" 463) (literal (mutez 0) 463) (second (params 37) 463) 37) (operations 463) 463) 463))) (getTotalSupply True ((bind \"__s64\" ((set_type (first (params 45) 463) \"unit\" 46) (result (attr (data) \"totalSupply\" 72) 47))) (set_type (second (params 45) 463) (contract \"nat\") 463) (set (operations 463) (cons (transfer (getLocal \"__s64\" 463) (literal (mutez 0) 463) (second (params 45) 463) 45) (operations 463) 463) 463))) (mint True ((set_type (params 59) (record ((address \"address\") (value \"nat\")) None) 60) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 61) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (attr (params 59) \"value\" 63) 63) 63) (set (attr (data) \"totalSupply\" 72) (add (attr (data) \"totalSupply\" 72) (attr (params 59) \"value\" 63) 64) 64))) (setAdministrator True ((set_type (params 79) \"address\" 80) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 81) (set (attr (data) \"administrator\" 76) (params 79) 82))) (setPause True ((set_type (params 94) \"bool\" 95) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 96) (set (attr (data) \"paused\" 91) (params 94) 97))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 76) 76) (and (invert (attr (data) \"paused\" 91) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 76) 76) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 463, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 28)", "export": "(storage (record 28 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 32 ) (bigmap (unknown 53) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 32)) (paused (literal (bool False) 28)) (state (literal (intOrNat 0) 28)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (totalSupply (literal (intOrNat 0) 28)) (underlyingBalance (literal (nat 0) 39)))\nstorage_type (())\nmessages ((approve True ((set_type (params 82) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 83) (ifBlock (invert (contains (attr (data) \"balances\" 95) (sender) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (sender) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (invert (attr (data) \"paused\" 148) 89) 89) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 95) (sender) 90) \"approvals\" 90) (attr (params 82) \"spender\" 90) (literal (intOrNat 0) 90) 90) (literal (intOrNat 0) 91) 91) (eq (attr (params 82) \"value\" 91) (literal (intOrNat 0) 91) 91) 91) (literal (string \"UnsafeAllowanceChange\") 91) 91) (set (getItem (attr (getItem (attr (data) \"balances\" 95) (sender) 92) \"approvals\" 92) (attr (params 82) \"spender\" 90) 92) (attr (params 82) \"value\" 91) 92))) (burn True ((set_type (params 123) (record ((address \"address\") (value \"nat\")) None) 124) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 127) 127) 127) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 129) \"balance\" 129) (attr (params 123) \"value\" 129) 129) 129) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (attr (params 123) \"value\" 129) 130) 130) \"Some\" \"None\" 130) 130) (set (attr (data) \"totalSupply\" 131) (openVariant (isNat (sub (attr (data) \"totalSupply\" 131) (attr (params 123) \"value\" 129) 131) 131) \"Some\" \"None\" 131) 131))) (deposit True ((set_type (params 45) \"nat\" 46) (defineLocal \"newTokens\" (mul (params 45) (literal (intOrNat 1000000000000000000) 49) 49) 49) (ifBlock (neq (attr (data) \"totalSupply\" 131) (literal (nat 0) 50) 50) ((defineLocal \"newUnderlyingBalance\" (add (attr (data) \"underlyingBalance\" 51) (params 45) 51) 51) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 45) (literal (intOrNat 1000000000000000000) 52) 52) (getLocal \"newUnderlyingBalance\" 52) 52) 52) (set (getLocal \"newTokens\" 469) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 53) (attr (data) \"totalSupply\" 131) 53) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 53) (getLocal \"fractionOfPoolOwnership\" 53) 53) 53) \"Some\" \"None\" 53) 53) 53)) 50) (set (attr (data) \"underlyingBalance\" 51) (add (attr (data) \"underlyingBalance\" 51) (params 45) 56) 56) (set (operations 69) (cons (transfer (record 59 (from_ (sender)) (to_ (to_address (self) \"None\")) (value (params 45))) (literal (mutez 0) 69) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 64) \"Some\" \"None\" 64) 69) (operations 69) 69) 69) (set (operations 81) (cons (transfer (record 72 (address (sender)) (value (getLocal \"newTokens\" 74))) (literal (mutez 0) 81) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 76) \"Some\" \"None\" 76) 81) (operations 81) 81) 81))) (getAdministrator True ((bind \"__s65\" ((set_type (first (params 143) 469) \"unit\" 144) (result (attr (data) \"administrator\" 134) 145))) (set_type (second (params 143) 469) (contract \"address\") 469) (set (operations 469) (cons (transfer (getLocal \"__s65\" 469) (literal (mutez 0) 469) (second (params 143) 469) 143) (operations 469) 469) 469))) (getAllowance True ((bind \"__s66\" ((result (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (first (params 103) 469) \"owner\" 104) 104) \"approvals\" 104) (attr (first (params 103) 469) \"spender\" 104) 104) 104))) (set_type (second (params 103) 469) (contract \"nat\") 469) (set (operations 469) (cons (transfer (getLocal \"__s66\" 469) (literal (mutez 0) 469) (second (params 103) 469) 103) (operations 469) 469) 469))) (getBalance True ((bind \"__s67\" ((result (attr (getItem (attr (data) \"balances\" 95) (first (params 99) 469) 100) \"balance\" 100) 100))) (set_type (second (params 99) 469) (contract \"nat\") 469) (set (operations 469) (cons (transfer (getLocal \"__s67\" 469) (literal (mutez 0) 469) (second (params 99) 469) 99) (operations 469) 469) 469))) (getTotalSupply True ((bind \"__s68\" ((set_type (first (params 107) 469) \"unit\" 108) (result (attr (data) \"totalSupply\" 131) 109))) (set_type (second (params 107) 469) (contract \"nat\") 469) (set (operations 469) (cons (transfer (getLocal \"__s68\" 469) (literal (mutez 0) 469) (second (params 107) 469) 107) (operations 469) 469) 469))) (mint True ((set_type (params 112) (record ((address \"address\") (value \"nat\")) None) 113) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 116) 116) 116) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (attr (params 112) \"value\" 119) 119) 119) (set (attr (data) \"totalSupply\" 131) (add (attr (data) \"totalSupply\" 131) (attr (params 112) \"value\" 119) 120) 120))) (redeem True ((set_type (params 85) \"nat\" 86) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 85) (literal (intOrNat 1000000000000000000) 88) 88) (attr (data) \"totalSupply\" 131) 88) 88) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 89) (attr (data) \"underlyingBalance\" 51) 89) (literal (intOrNat 1000000000000000000) 89) 89) 89) (set (attr (data) \"underlyingBalance\" 51) (openVariant (isNat (sub (attr (data) \"underlyingBalance\" 51) (getLocal \"tokensToReceive\" 92) 92) 92) \"Some\" \"None\" 92) 92) (set (operations 104) (cons (transfer (record 95 (address (sender)) (value (params 85))) (literal (mutez 0) 104) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 99) \"Some\" \"None\" 99) 104) (operations 104) 104) 104) (set (operations 117) (cons (transfer (record 107 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (getLocal \"tokensToReceive\" 110))) (literal (mutez 0) 117) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 112) \"Some\" \"None\" 112) 117) (operations 117) 117) 117))) (setAdministrator True ((set_type (params 137) \"address\" 138) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 139) (set (attr (data) \"administrator\" 134) (params 137) 140))) (setPause True ((set_type (params 151) \"bool\" 152) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 153) (set (attr (data) \"paused\" 148) (params 151) 154))) (transfer True ((set_type (params 68) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 69) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (and (invert (attr (data) \"paused\" 148) 71) (or (eq (attr (params 68) \"from_\" 72) (sender) 72) (ge (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 73) \"approvals\" 73) (sender) 73) (attr (params 68) \"value\" 73) 73) 72) 71) 70) 70) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 75) \"balance\" 75) (attr (params 68) \"value\" 73) 75) 75) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (attr (params 68) \"value\" 73) 76) 76) \"Some\" \"None\" 76) 76) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (attr (params 68) \"value\" 73) 77) 77) (ifBlock (and (neq (attr (params 68) \"from_\" 72) (sender) 78) (invert (eq (sender) (attr (data) \"administrator\" 134) 134) 78) 78) ((set (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (attr (params 68) \"value\" 73) 79) 79) \"Some\" \"None\" 79) 79)) 78))) (updateBalance True ((set_type (params 121) \"unit\" 122) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 0) 125) 125) (literal (string \"bad state\") 125) 125) (set (attr (data) \"state\" 125) (literal (intOrNat 1) 128) 128) (set (operations 137) (cons (transfer (tuple 137 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 131)) (literal (mutez 0) 137) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 66) 132) \"Some\" \"None\" 132) 137) (operations 137) 137) 137))) (updateBalance_callback True ((set_type (params 141) \"nat\" 142) (verify (eq (sender) (attr (data) \"tokenAddress\" 66) 145) (literal (string \"bad sender\") 145) 145) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 1) 148) 148) (literal (string \"bad state\") 148) 148) (set (attr (data) \"state\" 125) (literal (intOrNat 0) 151) 151) (set (attr (data) \"underlyingBalance\" 51) (params 141) 154))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 469, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 474 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)) (value (literal (nat 10) 472)))", "line_no": 473, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 473)", "show": true, "valid": "(literal (bool True) 473)", "voting_powers": "(map 473 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 485 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)) (value (literal (nat 40) 483)))", "line_no": 484, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 484)", "show": true, "valid": "(literal (bool True) 484)", "voting_powers": "(map 484 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 495 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 10) 472)))", "line_no": 494, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 494)", "show": true, "valid": "(literal (bool True) 494)", "voting_powers": "(map 494 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 505 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 40) 483)))", "line_no": 504, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 504)", "show": true, "valid": "(literal (bool True) 504)", "voting_powers": "(map 504 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 483)", "line_no": 514, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 514)", "show": true, "valid": "(literal (bool True) 514)", "voting_powers": "(map 514 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 472)", "line_no": 520, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 520)", "show": true, "valid": "(literal (bool True) 520)", "voting_powers": "(map 520 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 504) \"balances\" 527) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 527) \"balance\" 527) (literal (nat 0) 527) 527)", "line_no": 527}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 520) \"balances\" 528) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 528) \"balance\" 528) (mul (literal (nat 10) 472) (literal (intOrNat 1000000000000000000) 528) 528) 528)", "line_no": 528}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 504) \"balances\" 527) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11) 531) \"balance\" 531) (literal (nat 0) 531) 531)", "line_no": 531}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 520) \"balances\" 528) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11) 532) \"balance\" 532) (mul (mul (literal (nat 10) 472) (literal (intOrNat 4) 532) 532) (literal (intOrNat 1000000000000000000) 532) 532) 532)", "line_no": 532}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 520) \"totalSupply\" 535) (mul (add (literal (nat 10) 472) (literal (nat 40) 483) 535) (literal (intOrNat 1000000000000000000) 535) 535) 535)", "line_no": 535}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 504) \"balances\" 527) (literal (local-address (static_id 1 28)) 28) 538) \"balance\" 538) (add (literal (nat 10) 472) (literal (nat 40) 483) 538) 538)", "line_no": 538}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 520) \"underlyingBalance\" 539) (add (literal (nat 10) 472) (literal (nat 40) 483) 539) 539)", "line_no": 539}], "decompile": false, "kind": "test"}, {"shortname": "deposit_-_successfully_mints_LP_tokens_after_additional_liquidity_is_deposited_in_the_pool", "longname": "deposit - successfully mints LP tokens after additional liquidity is deposited in the pool", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 59) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 91) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 67) (record ((address \"address\") (value \"nat\")) None) 68) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 69) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 70) \"balance\" 70) (attr (params 67) \"value\" 70) 70) 70) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (attr (params 67) \"value\" 70) 71) 71) \"Some\" \"None\" 71) 71) (set (attr (data) \"totalSupply\" 72) (openVariant (isNat (sub (attr (data) \"totalSupply\" 72) (attr (params 67) \"value\" 70) 72) 72) \"Some\" \"None\" 72) 72))) (getAdministrator True ((bind \"__s69\" ((set_type (first (params 85) 549) \"unit\" 86) (result (attr (data) \"administrator\" 76) 87))) (set_type (second (params 85) 549) (contract \"address\") 549) (set (operations 549) (cons (transfer (getLocal \"__s69\" 549) (literal (mutez 0) 549) (second (params 85) 549) 85) (operations 549) 549) 549))) (getAllowance True ((bind \"__s70\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 41) 549) \"owner\" 42) 42) \"approvals\" 42) (attr (first (params 41) 549) \"spender\" 42) 42) 42))) (set_type (second (params 41) 549) (contract \"nat\") 549) (set (operations 549) (cons (transfer (getLocal \"__s70\" 549) (literal (mutez 0) 549) (second (params 41) 549) 41) (operations 549) 549) 549))) (getBalance True ((bind \"__s71\" ((result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 549) 38) \"balance\" 38) 38))) (set_type (second (params 37) 549) (contract \"nat\") 549) (set (operations 549) (cons (transfer (getLocal \"__s71\" 549) (literal (mutez 0) 549) (second (params 37) 549) 37) (operations 549) 549) 549))) (getTotalSupply True ((bind \"__s72\" ((set_type (first (params 45) 549) \"unit\" 46) (result (attr (data) \"totalSupply\" 72) 47))) (set_type (second (params 45) 549) (contract \"nat\") 549) (set (operations 549) (cons (transfer (getLocal \"__s72\" 549) (literal (mutez 0) 549) (second (params 45) 549) 45) (operations 549) 549) 549))) (mint True ((set_type (params 59) (record ((address \"address\") (value \"nat\")) None) 60) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 61) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (attr (params 59) \"value\" 63) 63) 63) (set (attr (data) \"totalSupply\" 72) (add (attr (data) \"totalSupply\" 72) (attr (params 59) \"value\" 63) 64) 64))) (setAdministrator True ((set_type (params 79) \"address\" 80) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 81) (set (attr (data) \"administrator\" 76) (params 79) 82))) (setPause True ((set_type (params 94) \"bool\" 95) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 96) (set (attr (data) \"paused\" 91) (params 94) 97))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 76) 76) (and (invert (attr (data) \"paused\" 91) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 76) 76) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 549, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 28)", "export": "(storage (record 28 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 32 ) (bigmap (unknown 60) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 32)) (paused (literal (bool False) 28)) (state (literal (intOrNat 0) 28)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (totalSupply (literal (intOrNat 0) 28)) (underlyingBalance (literal (nat 0) 39)))\nstorage_type (())\nmessages ((approve True ((set_type (params 82) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 83) (ifBlock (invert (contains (attr (data) \"balances\" 95) (sender) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (sender) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (invert (attr (data) \"paused\" 148) 89) 89) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 95) (sender) 90) \"approvals\" 90) (attr (params 82) \"spender\" 90) (literal (intOrNat 0) 90) 90) (literal (intOrNat 0) 91) 91) (eq (attr (params 82) \"value\" 91) (literal (intOrNat 0) 91) 91) 91) (literal (string \"UnsafeAllowanceChange\") 91) 91) (set (getItem (attr (getItem (attr (data) \"balances\" 95) (sender) 92) \"approvals\" 92) (attr (params 82) \"spender\" 90) 92) (attr (params 82) \"value\" 91) 92))) (burn True ((set_type (params 123) (record ((address \"address\") (value \"nat\")) None) 124) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 127) 127) 127) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 129) \"balance\" 129) (attr (params 123) \"value\" 129) 129) 129) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (attr (params 123) \"value\" 129) 130) 130) \"Some\" \"None\" 130) 130) (set (attr (data) \"totalSupply\" 131) (openVariant (isNat (sub (attr (data) \"totalSupply\" 131) (attr (params 123) \"value\" 129) 131) 131) \"Some\" \"None\" 131) 131))) (deposit True ((set_type (params 45) \"nat\" 46) (defineLocal \"newTokens\" (mul (params 45) (literal (intOrNat 1000000000000000000) 49) 49) 49) (ifBlock (neq (attr (data) \"totalSupply\" 131) (literal (nat 0) 50) 50) ((defineLocal \"newUnderlyingBalance\" (add (attr (data) \"underlyingBalance\" 51) (params 45) 51) 51) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 45) (literal (intOrNat 1000000000000000000) 52) 52) (getLocal \"newUnderlyingBalance\" 52) 52) 52) (set (getLocal \"newTokens\" 555) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 53) (attr (data) \"totalSupply\" 131) 53) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 53) (getLocal \"fractionOfPoolOwnership\" 53) 53) 53) \"Some\" \"None\" 53) 53) 53)) 50) (set (attr (data) \"underlyingBalance\" 51) (add (attr (data) \"underlyingBalance\" 51) (params 45) 56) 56) (set (operations 69) (cons (transfer (record 59 (from_ (sender)) (to_ (to_address (self) \"None\")) (value (params 45))) (literal (mutez 0) 69) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 64) \"Some\" \"None\" 64) 69) (operations 69) 69) 69) (set (operations 81) (cons (transfer (record 72 (address (sender)) (value (getLocal \"newTokens\" 74))) (literal (mutez 0) 81) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 76) \"Some\" \"None\" 76) 81) (operations 81) 81) 81))) (getAdministrator True ((bind \"__s73\" ((set_type (first (params 143) 555) \"unit\" 144) (result (attr (data) \"administrator\" 134) 145))) (set_type (second (params 143) 555) (contract \"address\") 555) (set (operations 555) (cons (transfer (getLocal \"__s73\" 555) (literal (mutez 0) 555) (second (params 143) 555) 143) (operations 555) 555) 555))) (getAllowance True ((bind \"__s74\" ((result (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (first (params 103) 555) \"owner\" 104) 104) \"approvals\" 104) (attr (first (params 103) 555) \"spender\" 104) 104) 104))) (set_type (second (params 103) 555) (contract \"nat\") 555) (set (operations 555) (cons (transfer (getLocal \"__s74\" 555) (literal (mutez 0) 555) (second (params 103) 555) 103) (operations 555) 555) 555))) (getBalance True ((bind \"__s75\" ((result (attr (getItem (attr (data) \"balances\" 95) (first (params 99) 555) 100) \"balance\" 100) 100))) (set_type (second (params 99) 555) (contract \"nat\") 555) (set (operations 555) (cons (transfer (getLocal \"__s75\" 555) (literal (mutez 0) 555) (second (params 99) 555) 99) (operations 555) 555) 555))) (getTotalSupply True ((bind \"__s76\" ((set_type (first (params 107) 555) \"unit\" 108) (result (attr (data) \"totalSupply\" 131) 109))) (set_type (second (params 107) 555) (contract \"nat\") 555) (set (operations 555) (cons (transfer (getLocal \"__s76\" 555) (literal (mutez 0) 555) (second (params 107) 555) 107) (operations 555) 555) 555))) (mint True ((set_type (params 112) (record ((address \"address\") (value \"nat\")) None) 113) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 116) 116) 116) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (attr (params 112) \"value\" 119) 119) 119) (set (attr (data) \"totalSupply\" 131) (add (attr (data) \"totalSupply\" 131) (attr (params 112) \"value\" 119) 120) 120))) (redeem True ((set_type (params 85) \"nat\" 86) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 85) (literal (intOrNat 1000000000000000000) 88) 88) (attr (data) \"totalSupply\" 131) 88) 88) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 89) (attr (data) \"underlyingBalance\" 51) 89) (literal (intOrNat 1000000000000000000) 89) 89) 89) (set (attr (data) \"underlyingBalance\" 51) (openVariant (isNat (sub (attr (data) \"underlyingBalance\" 51) (getLocal \"tokensToReceive\" 92) 92) 92) \"Some\" \"None\" 92) 92) (set (operations 104) (cons (transfer (record 95 (address (sender)) (value (params 85))) (literal (mutez 0) 104) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 99) \"Some\" \"None\" 99) 104) (operations 104) 104) 104) (set (operations 117) (cons (transfer (record 107 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (getLocal \"tokensToReceive\" 110))) (literal (mutez 0) 117) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 112) \"Some\" \"None\" 112) 117) (operations 117) 117) 117))) (setAdministrator True ((set_type (params 137) \"address\" 138) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 139) (set (attr (data) \"administrator\" 134) (params 137) 140))) (setPause True ((set_type (params 151) \"bool\" 152) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 153) (set (attr (data) \"paused\" 148) (params 151) 154))) (transfer True ((set_type (params 68) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 69) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (and (invert (attr (data) \"paused\" 148) 71) (or (eq (attr (params 68) \"from_\" 72) (sender) 72) (ge (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 73) \"approvals\" 73) (sender) 73) (attr (params 68) \"value\" 73) 73) 72) 71) 70) 70) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 75) \"balance\" 75) (attr (params 68) \"value\" 73) 75) 75) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (attr (params 68) \"value\" 73) 76) 76) \"Some\" \"None\" 76) 76) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (attr (params 68) \"value\" 73) 77) 77) (ifBlock (and (neq (attr (params 68) \"from_\" 72) (sender) 78) (invert (eq (sender) (attr (data) \"administrator\" 134) 134) 78) 78) ((set (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (attr (params 68) \"value\" 73) 79) 79) \"Some\" \"None\" 79) 79)) 78))) (updateBalance True ((set_type (params 121) \"unit\" 122) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 0) 125) 125) (literal (string \"bad state\") 125) 125) (set (attr (data) \"state\" 125) (literal (intOrNat 1) 128) 128) (set (operations 137) (cons (transfer (tuple 137 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 131)) (literal (mutez 0) 137) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 66) 132) \"Some\" \"None\" 132) 137) (operations 137) 137) 137))) (updateBalance_callback True ((set_type (params 141) \"nat\" 142) (verify (eq (sender) (attr (data) \"tokenAddress\" 66) 145) (literal (string \"bad sender\") 145) 145) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 1) 148) 148) (literal (string \"bad state\") 148) 148) (set (attr (data) \"state\" 125) (literal (intOrNat 0) 151) 151) (set (attr (data) \"underlyingBalance\" 51) (params 141) 154))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 555, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 560 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)) (value (literal (nat 10) 558)))", "line_no": 559, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 559)", "show": true, "valid": "(literal (bool True) 559)", "voting_powers": "(map 559 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 571 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)) (value (literal (nat 40) 569)))", "line_no": 570, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 570)", "show": true, "valid": "(literal (bool True) 570)", "voting_powers": "(map 570 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 582 (address (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 12)) (value (literal (nat 60) 580)))", "line_no": 581, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 581)", "show": true, "valid": "(literal (bool True) 581)", "voting_powers": "(map 581 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 592 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 10) 558)))", "line_no": 591, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 591)", "show": true, "valid": "(literal (bool True) 591)", "voting_powers": "(map 591 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 602 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 40) 569)))", "line_no": 601, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 601)", "show": true, "valid": "(literal (bool True) 601)", "voting_powers": "(map 601 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 612 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 60) 580)))", "line_no": 611, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 12)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 611)", "show": true, "valid": "(literal (bool True) 611)", "voting_powers": "(map 611 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 558)", "line_no": 621, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 621)", "show": true, "valid": "(literal (bool True) 621)", "voting_powers": "(map 621 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 569)", "line_no": 627, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 627)", "show": true, "valid": "(literal (bool True) 627)", "voting_powers": "(map 627 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 636 (address (literal (local-address (static_id 1 28)) 28)) (value (literal (intOrNat 10) 636)))", "line_no": 635, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 635)", "show": true, "valid": "(literal (bool True) 635)", "voting_powers": "(map 635 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "updateBalance", "params": "(unit)", "line_no": 645, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 645)", "show": true, "valid": "(literal (bool True) 645)", "voting_powers": "(map 645 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 60) 580)", "line_no": 648, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 12)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 648)", "show": true, "valid": "(literal (bool True) 648)", "voting_powers": "(map 648 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 648) \"totalSupply\" 655) (literal (intOrNat 100000000000000000000) 655) 655)", "line_no": 655}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 635) \"balances\" 658) (literal (local-address (static_id 1 28)) 28) 658) \"balance\" 658) (literal (nat 120) 658) 658)", "line_no": 658}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 648) \"underlyingBalance\" 659) (literal (nat 120) 659) 659)", "line_no": 659}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 648) \"balances\" 662) (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 12) 662) \"balance\" 662) (literal (intOrNat 50000000000000000000) 662) 662)", "line_no": 662}], "decompile": false, "kind": "test"}, {"shortname": "deposit_-_successfully_mints_LP_tokens_after_additional_liquidity_is_deposited_in_the_pool_with_a_small_amount_of_tokens", "longname": "deposit - successfully mints LP tokens after additional liquidity is deposited in the pool with a small amount of tokens", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 66) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 91) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 67) (record ((address \"address\") (value \"nat\")) None) 68) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 69) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 70) \"balance\" 70) (attr (params 67) \"value\" 70) 70) 70) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (attr (params 67) \"value\" 70) 71) 71) \"Some\" \"None\" 71) 71) (set (attr (data) \"totalSupply\" 72) (openVariant (isNat (sub (attr (data) \"totalSupply\" 72) (attr (params 67) \"value\" 70) 72) 72) \"Some\" \"None\" 72) 72))) (getAdministrator True ((bind \"__s77\" ((set_type (first (params 85) 672) \"unit\" 86) (result (attr (data) \"administrator\" 76) 87))) (set_type (second (params 85) 672) (contract \"address\") 672) (set (operations 672) (cons (transfer (getLocal \"__s77\" 672) (literal (mutez 0) 672) (second (params 85) 672) 85) (operations 672) 672) 672))) (getAllowance True ((bind \"__s78\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 41) 672) \"owner\" 42) 42) \"approvals\" 42) (attr (first (params 41) 672) \"spender\" 42) 42) 42))) (set_type (second (params 41) 672) (contract \"nat\") 672) (set (operations 672) (cons (transfer (getLocal \"__s78\" 672) (literal (mutez 0) 672) (second (params 41) 672) 41) (operations 672) 672) 672))) (getBalance True ((bind \"__s79\" ((result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 672) 38) \"balance\" 38) 38))) (set_type (second (params 37) 672) (contract \"nat\") 672) (set (operations 672) (cons (transfer (getLocal \"__s79\" 672) (literal (mutez 0) 672) (second (params 37) 672) 37) (operations 672) 672) 672))) (getTotalSupply True ((bind \"__s80\" ((set_type (first (params 45) 672) \"unit\" 46) (result (attr (data) \"totalSupply\" 72) 47))) (set_type (second (params 45) 672) (contract \"nat\") 672) (set (operations 672) (cons (transfer (getLocal \"__s80\" 672) (literal (mutez 0) 672) (second (params 45) 672) 45) (operations 672) 672) 672))) (mint True ((set_type (params 59) (record ((address \"address\") (value \"nat\")) None) 60) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 61) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (attr (params 59) \"value\" 63) 63) 63) (set (attr (data) \"totalSupply\" 72) (add (attr (data) \"totalSupply\" 72) (attr (params 59) \"value\" 63) 64) 64))) (setAdministrator True ((set_type (params 79) \"address\" 80) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 81) (set (attr (data) \"administrator\" 76) (params 79) 82))) (setPause True ((set_type (params 94) \"bool\" 95) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 96) (set (attr (data) \"paused\" 91) (params 94) 97))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 76) 76) (and (invert (attr (data) \"paused\" 91) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 76) 76) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 672, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 28)", "export": "(storage (record 28 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 32 ) (bigmap (unknown 67) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 32)) (paused (literal (bool False) 28)) (state (literal (intOrNat 0) 28)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (totalSupply (literal (intOrNat 0) 28)) (underlyingBalance (literal (nat 0) 39)))\nstorage_type (())\nmessages ((approve True ((set_type (params 82) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 83) (ifBlock (invert (contains (attr (data) \"balances\" 95) (sender) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (sender) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (invert (attr (data) \"paused\" 148) 89) 89) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 95) (sender) 90) \"approvals\" 90) (attr (params 82) \"spender\" 90) (literal (intOrNat 0) 90) 90) (literal (intOrNat 0) 91) 91) (eq (attr (params 82) \"value\" 91) (literal (intOrNat 0) 91) 91) 91) (literal (string \"UnsafeAllowanceChange\") 91) 91) (set (getItem (attr (getItem (attr (data) \"balances\" 95) (sender) 92) \"approvals\" 92) (attr (params 82) \"spender\" 90) 92) (attr (params 82) \"value\" 91) 92))) (burn True ((set_type (params 123) (record ((address \"address\") (value \"nat\")) None) 124) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 127) 127) 127) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 129) \"balance\" 129) (attr (params 123) \"value\" 129) 129) 129) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (attr (params 123) \"value\" 129) 130) 130) \"Some\" \"None\" 130) 130) (set (attr (data) \"totalSupply\" 131) (openVariant (isNat (sub (attr (data) \"totalSupply\" 131) (attr (params 123) \"value\" 129) 131) 131) \"Some\" \"None\" 131) 131))) (deposit True ((set_type (params 45) \"nat\" 46) (defineLocal \"newTokens\" (mul (params 45) (literal (intOrNat 1000000000000000000) 49) 49) 49) (ifBlock (neq (attr (data) \"totalSupply\" 131) (literal (nat 0) 50) 50) ((defineLocal \"newUnderlyingBalance\" (add (attr (data) \"underlyingBalance\" 51) (params 45) 51) 51) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 45) (literal (intOrNat 1000000000000000000) 52) 52) (getLocal \"newUnderlyingBalance\" 52) 52) 52) (set (getLocal \"newTokens\" 678) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 53) (attr (data) \"totalSupply\" 131) 53) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 53) (getLocal \"fractionOfPoolOwnership\" 53) 53) 53) \"Some\" \"None\" 53) 53) 53)) 50) (set (attr (data) \"underlyingBalance\" 51) (add (attr (data) \"underlyingBalance\" 51) (params 45) 56) 56) (set (operations 69) (cons (transfer (record 59 (from_ (sender)) (to_ (to_address (self) \"None\")) (value (params 45))) (literal (mutez 0) 69) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 64) \"Some\" \"None\" 64) 69) (operations 69) 69) 69) (set (operations 81) (cons (transfer (record 72 (address (sender)) (value (getLocal \"newTokens\" 74))) (literal (mutez 0) 81) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 76) \"Some\" \"None\" 76) 81) (operations 81) 81) 81))) (getAdministrator True ((bind \"__s81\" ((set_type (first (params 143) 678) \"unit\" 144) (result (attr (data) \"administrator\" 134) 145))) (set_type (second (params 143) 678) (contract \"address\") 678) (set (operations 678) (cons (transfer (getLocal \"__s81\" 678) (literal (mutez 0) 678) (second (params 143) 678) 143) (operations 678) 678) 678))) (getAllowance True ((bind \"__s82\" ((result (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (first (params 103) 678) \"owner\" 104) 104) \"approvals\" 104) (attr (first (params 103) 678) \"spender\" 104) 104) 104))) (set_type (second (params 103) 678) (contract \"nat\") 678) (set (operations 678) (cons (transfer (getLocal \"__s82\" 678) (literal (mutez 0) 678) (second (params 103) 678) 103) (operations 678) 678) 678))) (getBalance True ((bind \"__s83\" ((result (attr (getItem (attr (data) \"balances\" 95) (first (params 99) 678) 100) \"balance\" 100) 100))) (set_type (second (params 99) 678) (contract \"nat\") 678) (set (operations 678) (cons (transfer (getLocal \"__s83\" 678) (literal (mutez 0) 678) (second (params 99) 678) 99) (operations 678) 678) 678))) (getTotalSupply True ((bind \"__s84\" ((set_type (first (params 107) 678) \"unit\" 108) (result (attr (data) \"totalSupply\" 131) 109))) (set_type (second (params 107) 678) (contract \"nat\") 678) (set (operations 678) (cons (transfer (getLocal \"__s84\" 678) (literal (mutez 0) 678) (second (params 107) 678) 107) (operations 678) 678) 678))) (mint True ((set_type (params 112) (record ((address \"address\") (value \"nat\")) None) 113) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 116) 116) 116) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (attr (params 112) \"value\" 119) 119) 119) (set (attr (data) \"totalSupply\" 131) (add (attr (data) \"totalSupply\" 131) (attr (params 112) \"value\" 119) 120) 120))) (redeem True ((set_type (params 85) \"nat\" 86) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 85) (literal (intOrNat 1000000000000000000) 88) 88) (attr (data) \"totalSupply\" 131) 88) 88) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 89) (attr (data) \"underlyingBalance\" 51) 89) (literal (intOrNat 1000000000000000000) 89) 89) 89) (set (attr (data) \"underlyingBalance\" 51) (openVariant (isNat (sub (attr (data) \"underlyingBalance\" 51) (getLocal \"tokensToReceive\" 92) 92) 92) \"Some\" \"None\" 92) 92) (set (operations 104) (cons (transfer (record 95 (address (sender)) (value (params 85))) (literal (mutez 0) 104) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 99) \"Some\" \"None\" 99) 104) (operations 104) 104) 104) (set (operations 117) (cons (transfer (record 107 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (getLocal \"tokensToReceive\" 110))) (literal (mutez 0) 117) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 112) \"Some\" \"None\" 112) 117) (operations 117) 117) 117))) (setAdministrator True ((set_type (params 137) \"address\" 138) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 139) (set (attr (data) \"administrator\" 134) (params 137) 140))) (setPause True ((set_type (params 151) \"bool\" 152) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 153) (set (attr (data) \"paused\" 148) (params 151) 154))) (transfer True ((set_type (params 68) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 69) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (and (invert (attr (data) \"paused\" 148) 71) (or (eq (attr (params 68) \"from_\" 72) (sender) 72) (ge (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 73) \"approvals\" 73) (sender) 73) (attr (params 68) \"value\" 73) 73) 72) 71) 70) 70) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 75) \"balance\" 75) (attr (params 68) \"value\" 73) 75) 75) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (attr (params 68) \"value\" 73) 76) 76) \"Some\" \"None\" 76) 76) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (attr (params 68) \"value\" 73) 77) 77) (ifBlock (and (neq (attr (params 68) \"from_\" 72) (sender) 78) (invert (eq (sender) (attr (data) \"administrator\" 134) 134) 78) 78) ((set (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (attr (params 68) \"value\" 73) 79) 79) \"Some\" \"None\" 79) 79)) 78))) (updateBalance True ((set_type (params 121) \"unit\" 122) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 0) 125) 125) (literal (string \"bad state\") 125) 125) (set (attr (data) \"state\" 125) (literal (intOrNat 1) 128) 128) (set (operations 137) (cons (transfer (tuple 137 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 131)) (literal (mutez 0) 137) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 66) 132) \"Some\" \"None\" 132) 137) (operations 137) 137) 137))) (updateBalance_callback True ((set_type (params 141) \"nat\" 142) (verify (eq (sender) (attr (data) \"tokenAddress\" 66) 145) (literal (string \"bad sender\") 145) 145) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 1) 148) 148) (literal (string \"bad state\") 148) 148) (set (attr (data) \"state\" 125) (literal (intOrNat 0) 151) 151) (set (attr (data) \"underlyingBalance\" 51) (params 141) 154))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 678, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 683 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)) (value (literal (nat 10) 681)))", "line_no": 682, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 682)", "show": true, "valid": "(literal (bool True) 682)", "voting_powers": "(map 682 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 694 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)) (value (literal (nat 40) 692)))", "line_no": 693, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 693)", "show": true, "valid": "(literal (bool True) 693)", "voting_powers": "(map 693 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 705 (address (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 12)) (value (literal (nat 20) 703)))", "line_no": 704, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 704)", "show": true, "valid": "(literal (bool True) 704)", "voting_powers": "(map 704 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 715 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 10) 681)))", "line_no": 714, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 714)", "show": true, "valid": "(literal (bool True) 714)", "voting_powers": "(map 714 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 725 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 40) 692)))", "line_no": 724, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 724)", "show": true, "valid": "(literal (bool True) 724)", "voting_powers": "(map 724 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 735 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 20) 703)))", "line_no": 734, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 12)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 734)", "show": true, "valid": "(literal (bool True) 734)", "voting_powers": "(map 734 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 681)", "line_no": 744, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 744)", "show": true, "valid": "(literal (bool True) 744)", "voting_powers": "(map 744 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 692)", "line_no": 750, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 750)", "show": true, "valid": "(literal (bool True) 750)", "voting_powers": "(map 750 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 759 (address (literal (local-address (static_id 1 28)) 28)) (value (literal (intOrNat 10) 759)))", "line_no": 758, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 758)", "show": true, "valid": "(literal (bool True) 758)", "voting_powers": "(map 758 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "updateBalance", "params": "(unit)", "line_no": 768, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 768)", "show": true, "valid": "(literal (bool True) 768)", "voting_powers": "(map 768 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 20) 703)", "line_no": 771, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 12)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 771)", "show": true, "valid": "(literal (bool True) 771)", "voting_powers": "(map 771 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 771) \"totalSupply\" 778) (literal (intOrNat 66666666666666666666) 778) 778)", "line_no": 778}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 758) \"balances\" 781) (literal (local-address (static_id 1 28)) 28) 781) \"balance\" 781) (literal (nat 80) 781) 781)", "line_no": 781}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 771) \"underlyingBalance\" 782) (literal (nat 80) 782) 782)", "line_no": 782}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 771) \"balances\" 785) (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 12) 785) \"balance\" 785) (literal (intOrNat 16666666666666666666) 785) 785)", "line_no": 785}], "decompile": false, "kind": "test"}, {"shortname": "withdraw_-_can_deposit_and_withdraw_from_one_account", "longname": "withdraw - can deposit and withdraw from one account", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 73) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 91) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 67) (record ((address \"address\") (value \"nat\")) None) 68) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 69) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 70) \"balance\" 70) (attr (params 67) \"value\" 70) 70) 70) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (attr (params 67) \"value\" 70) 71) 71) \"Some\" \"None\" 71) 71) (set (attr (data) \"totalSupply\" 72) (openVariant (isNat (sub (attr (data) \"totalSupply\" 72) (attr (params 67) \"value\" 70) 72) 72) \"Some\" \"None\" 72) 72))) (getAdministrator True ((bind \"__s85\" ((set_type (first (params 85) 799) \"unit\" 86) (result (attr (data) \"administrator\" 76) 87))) (set_type (second (params 85) 799) (contract \"address\") 799) (set (operations 799) (cons (transfer (getLocal \"__s85\" 799) (literal (mutez 0) 799) (second (params 85) 799) 85) (operations 799) 799) 799))) (getAllowance True ((bind \"__s86\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 41) 799) \"owner\" 42) 42) \"approvals\" 42) (attr (first (params 41) 799) \"spender\" 42) 42) 42))) (set_type (second (params 41) 799) (contract \"nat\") 799) (set (operations 799) (cons (transfer (getLocal \"__s86\" 799) (literal (mutez 0) 799) (second (params 41) 799) 41) (operations 799) 799) 799))) (getBalance True ((bind \"__s87\" ((result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 799) 38) \"balance\" 38) 38))) (set_type (second (params 37) 799) (contract \"nat\") 799) (set (operations 799) (cons (transfer (getLocal \"__s87\" 799) (literal (mutez 0) 799) (second (params 37) 799) 37) (operations 799) 799) 799))) (getTotalSupply True ((bind \"__s88\" ((set_type (first (params 45) 799) \"unit\" 46) (result (attr (data) \"totalSupply\" 72) 47))) (set_type (second (params 45) 799) (contract \"nat\") 799) (set (operations 799) (cons (transfer (getLocal \"__s88\" 799) (literal (mutez 0) 799) (second (params 45) 799) 45) (operations 799) 799) 799))) (mint True ((set_type (params 59) (record ((address \"address\") (value \"nat\")) None) 60) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 61) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (attr (params 59) \"value\" 63) 63) 63) (set (attr (data) \"totalSupply\" 72) (add (attr (data) \"totalSupply\" 72) (attr (params 59) \"value\" 63) 64) 64))) (setAdministrator True ((set_type (params 79) \"address\" 80) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 81) (set (attr (data) \"administrator\" 76) (params 79) 82))) (setPause True ((set_type (params 94) \"bool\" 95) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 96) (set (attr (data) \"paused\" 91) (params 94) 97))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 76) 76) (and (invert (attr (data) \"paused\" 91) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 76) 76) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 799, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 28)", "export": "(storage (record 28 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 32 ) (bigmap (unknown 74) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 32)) (paused (literal (bool False) 28)) (state (literal (intOrNat 0) 28)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (totalSupply (literal (intOrNat 0) 28)) (underlyingBalance (literal (nat 0) 39)))\nstorage_type (())\nmessages ((approve True ((set_type (params 82) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 83) (ifBlock (invert (contains (attr (data) \"balances\" 95) (sender) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (sender) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (invert (attr (data) \"paused\" 148) 89) 89) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 95) (sender) 90) \"approvals\" 90) (attr (params 82) \"spender\" 90) (literal (intOrNat 0) 90) 90) (literal (intOrNat 0) 91) 91) (eq (attr (params 82) \"value\" 91) (literal (intOrNat 0) 91) 91) 91) (literal (string \"UnsafeAllowanceChange\") 91) 91) (set (getItem (attr (getItem (attr (data) \"balances\" 95) (sender) 92) \"approvals\" 92) (attr (params 82) \"spender\" 90) 92) (attr (params 82) \"value\" 91) 92))) (burn True ((set_type (params 123) (record ((address \"address\") (value \"nat\")) None) 124) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 127) 127) 127) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 129) \"balance\" 129) (attr (params 123) \"value\" 129) 129) 129) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (attr (params 123) \"value\" 129) 130) 130) \"Some\" \"None\" 130) 130) (set (attr (data) \"totalSupply\" 131) (openVariant (isNat (sub (attr (data) \"totalSupply\" 131) (attr (params 123) \"value\" 129) 131) 131) \"Some\" \"None\" 131) 131))) (deposit True ((set_type (params 45) \"nat\" 46) (defineLocal \"newTokens\" (mul (params 45) (literal (intOrNat 1000000000000000000) 49) 49) 49) (ifBlock (neq (attr (data) \"totalSupply\" 131) (literal (nat 0) 50) 50) ((defineLocal \"newUnderlyingBalance\" (add (attr (data) \"underlyingBalance\" 51) (params 45) 51) 51) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 45) (literal (intOrNat 1000000000000000000) 52) 52) (getLocal \"newUnderlyingBalance\" 52) 52) 52) (set (getLocal \"newTokens\" 805) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 53) (attr (data) \"totalSupply\" 131) 53) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 53) (getLocal \"fractionOfPoolOwnership\" 53) 53) 53) \"Some\" \"None\" 53) 53) 53)) 50) (set (attr (data) \"underlyingBalance\" 51) (add (attr (data) \"underlyingBalance\" 51) (params 45) 56) 56) (set (operations 69) (cons (transfer (record 59 (from_ (sender)) (to_ (to_address (self) \"None\")) (value (params 45))) (literal (mutez 0) 69) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 64) \"Some\" \"None\" 64) 69) (operations 69) 69) 69) (set (operations 81) (cons (transfer (record 72 (address (sender)) (value (getLocal \"newTokens\" 74))) (literal (mutez 0) 81) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 76) \"Some\" \"None\" 76) 81) (operations 81) 81) 81))) (getAdministrator True ((bind \"__s89\" ((set_type (first (params 143) 805) \"unit\" 144) (result (attr (data) \"administrator\" 134) 145))) (set_type (second (params 143) 805) (contract \"address\") 805) (set (operations 805) (cons (transfer (getLocal \"__s89\" 805) (literal (mutez 0) 805) (second (params 143) 805) 143) (operations 805) 805) 805))) (getAllowance True ((bind \"__s90\" ((result (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (first (params 103) 805) \"owner\" 104) 104) \"approvals\" 104) (attr (first (params 103) 805) \"spender\" 104) 104) 104))) (set_type (second (params 103) 805) (contract \"nat\") 805) (set (operations 805) (cons (transfer (getLocal \"__s90\" 805) (literal (mutez 0) 805) (second (params 103) 805) 103) (operations 805) 805) 805))) (getBalance True ((bind \"__s91\" ((result (attr (getItem (attr (data) \"balances\" 95) (first (params 99) 805) 100) \"balance\" 100) 100))) (set_type (second (params 99) 805) (contract \"nat\") 805) (set (operations 805) (cons (transfer (getLocal \"__s91\" 805) (literal (mutez 0) 805) (second (params 99) 805) 99) (operations 805) 805) 805))) (getTotalSupply True ((bind \"__s92\" ((set_type (first (params 107) 805) \"unit\" 108) (result (attr (data) \"totalSupply\" 131) 109))) (set_type (second (params 107) 805) (contract \"nat\") 805) (set (operations 805) (cons (transfer (getLocal \"__s92\" 805) (literal (mutez 0) 805) (second (params 107) 805) 107) (operations 805) 805) 805))) (mint True ((set_type (params 112) (record ((address \"address\") (value \"nat\")) None) 113) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 116) 116) 116) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (attr (params 112) \"value\" 119) 119) 119) (set (attr (data) \"totalSupply\" 131) (add (attr (data) \"totalSupply\" 131) (attr (params 112) \"value\" 119) 120) 120))) (redeem True ((set_type (params 85) \"nat\" 86) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 85) (literal (intOrNat 1000000000000000000) 88) 88) (attr (data) \"totalSupply\" 131) 88) 88) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 89) (attr (data) \"underlyingBalance\" 51) 89) (literal (intOrNat 1000000000000000000) 89) 89) 89) (set (attr (data) \"underlyingBalance\" 51) (openVariant (isNat (sub (attr (data) \"underlyingBalance\" 51) (getLocal \"tokensToReceive\" 92) 92) 92) \"Some\" \"None\" 92) 92) (set (operations 104) (cons (transfer (record 95 (address (sender)) (value (params 85))) (literal (mutez 0) 104) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 99) \"Some\" \"None\" 99) 104) (operations 104) 104) 104) (set (operations 117) (cons (transfer (record 107 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (getLocal \"tokensToReceive\" 110))) (literal (mutez 0) 117) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 112) \"Some\" \"None\" 112) 117) (operations 117) 117) 117))) (setAdministrator True ((set_type (params 137) \"address\" 138) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 139) (set (attr (data) \"administrator\" 134) (params 137) 140))) (setPause True ((set_type (params 151) \"bool\" 152) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 153) (set (attr (data) \"paused\" 148) (params 151) 154))) (transfer True ((set_type (params 68) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 69) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (and (invert (attr (data) \"paused\" 148) 71) (or (eq (attr (params 68) \"from_\" 72) (sender) 72) (ge (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 73) \"approvals\" 73) (sender) 73) (attr (params 68) \"value\" 73) 73) 72) 71) 70) 70) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 75) \"balance\" 75) (attr (params 68) \"value\" 73) 75) 75) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (attr (params 68) \"value\" 73) 76) 76) \"Some\" \"None\" 76) 76) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (attr (params 68) \"value\" 73) 77) 77) (ifBlock (and (neq (attr (params 68) \"from_\" 72) (sender) 78) (invert (eq (sender) (attr (data) \"administrator\" 134) 134) 78) 78) ((set (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (attr (params 68) \"value\" 73) 79) 79) \"Some\" \"None\" 79) 79)) 78))) (updateBalance True ((set_type (params 121) \"unit\" 122) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 0) 125) 125) (literal (string \"bad state\") 125) 125) (set (attr (data) \"state\" 125) (literal (intOrNat 1) 128) 128) (set (operations 137) (cons (transfer (tuple 137 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 131)) (literal (mutez 0) 137) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 66) 132) \"Some\" \"None\" 132) 137) (operations 137) 137) 137))) (updateBalance_callback True ((set_type (params 141) \"nat\" 142) (verify (eq (sender) (attr (data) \"tokenAddress\" 66) 145) (literal (string \"bad sender\") 145) 145) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 1) 148) 148) (literal (string \"bad state\") 148) 148) (set (attr (data) \"state\" 125) (literal (intOrNat 0) 151) 151) (set (attr (data) \"underlyingBalance\" 51) (params 141) 154))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 805, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 810 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)) (value (literal (nat 10) 808)))", "line_no": 809, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 809)", "show": true, "valid": "(literal (bool True) 809)", "voting_powers": "(map 809 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 820 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 10) 808)))", "line_no": 819, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 819)", "show": true, "valid": "(literal (bool True) 819)", "voting_powers": "(map 819 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 808)", "line_no": 829, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 829)", "show": true, "valid": "(literal (bool True) 829)", "voting_powers": "(map 829 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 10) 808) (literal (intOrNat 1000000000000000000) 837) 837)", "line_no": 836, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 836)", "show": true, "valid": "(literal (bool True) 836)", "voting_powers": "(map 836 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 819) \"balances\" 843) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 843) \"balance\" 843) (literal (nat 10) 808) 843)", "line_no": 843}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 836) \"balances\" 844) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 844) \"balance\" 844) (literal (nat 0) 844) 844)", "line_no": 844}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 836) \"totalSupply\" 847) (literal (nat 0) 847) 847)", "line_no": 847}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 819) \"balances\" 843) (literal (local-address (static_id 1 28)) 28) 850) \"balance\" 850) (literal (nat 0) 850) 850)", "line_no": 850}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 836) \"underlyingBalance\" 851) (literal (nat 0) 851) 851)", "line_no": 851}], "decompile": false, "kind": "test"}, {"shortname": "redeem_-_can_redeem_from_two_accounts", "longname": "redeem - can redeem from two accounts", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 80) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 91) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 67) (record ((address \"address\") (value \"nat\")) None) 68) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 69) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 70) \"balance\" 70) (attr (params 67) \"value\" 70) 70) 70) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (attr (params 67) \"value\" 70) 71) 71) \"Some\" \"None\" 71) 71) (set (attr (data) \"totalSupply\" 72) (openVariant (isNat (sub (attr (data) \"totalSupply\" 72) (attr (params 67) \"value\" 70) 72) 72) \"Some\" \"None\" 72) 72))) (getAdministrator True ((bind \"__s93\" ((set_type (first (params 85) 861) \"unit\" 86) (result (attr (data) \"administrator\" 76) 87))) (set_type (second (params 85) 861) (contract \"address\") 861) (set (operations 861) (cons (transfer (getLocal \"__s93\" 861) (literal (mutez 0) 861) (second (params 85) 861) 85) (operations 861) 861) 861))) (getAllowance True ((bind \"__s94\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 41) 861) \"owner\" 42) 42) \"approvals\" 42) (attr (first (params 41) 861) \"spender\" 42) 42) 42))) (set_type (second (params 41) 861) (contract \"nat\") 861) (set (operations 861) (cons (transfer (getLocal \"__s94\" 861) (literal (mutez 0) 861) (second (params 41) 861) 41) (operations 861) 861) 861))) (getBalance True ((bind \"__s95\" ((result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 861) 38) \"balance\" 38) 38))) (set_type (second (params 37) 861) (contract \"nat\") 861) (set (operations 861) (cons (transfer (getLocal \"__s95\" 861) (literal (mutez 0) 861) (second (params 37) 861) 37) (operations 861) 861) 861))) (getTotalSupply True ((bind \"__s96\" ((set_type (first (params 45) 861) \"unit\" 46) (result (attr (data) \"totalSupply\" 72) 47))) (set_type (second (params 45) 861) (contract \"nat\") 861) (set (operations 861) (cons (transfer (getLocal \"__s96\" 861) (literal (mutez 0) 861) (second (params 45) 861) 45) (operations 861) 861) 861))) (mint True ((set_type (params 59) (record ((address \"address\") (value \"nat\")) None) 60) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 61) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (attr (params 59) \"value\" 63) 63) 63) (set (attr (data) \"totalSupply\" 72) (add (attr (data) \"totalSupply\" 72) (attr (params 59) \"value\" 63) 64) 64))) (setAdministrator True ((set_type (params 79) \"address\" 80) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 81) (set (attr (data) \"administrator\" 76) (params 79) 82))) (setPause True ((set_type (params 94) \"bool\" 95) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 96) (set (attr (data) \"paused\" 91) (params 94) 97))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 76) 76) (and (invert (attr (data) \"paused\" 91) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 76) 76) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 861, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 28)", "export": "(storage (record 28 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 32 ) (bigmap (unknown 81) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 32)) (paused (literal (bool False) 28)) (state (literal (intOrNat 0) 28)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (totalSupply (literal (intOrNat 0) 28)) (underlyingBalance (literal (nat 0) 39)))\nstorage_type (())\nmessages ((approve True ((set_type (params 82) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 83) (ifBlock (invert (contains (attr (data) \"balances\" 95) (sender) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (sender) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (invert (attr (data) \"paused\" 148) 89) 89) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 95) (sender) 90) \"approvals\" 90) (attr (params 82) \"spender\" 90) (literal (intOrNat 0) 90) 90) (literal (intOrNat 0) 91) 91) (eq (attr (params 82) \"value\" 91) (literal (intOrNat 0) 91) 91) 91) (literal (string \"UnsafeAllowanceChange\") 91) 91) (set (getItem (attr (getItem (attr (data) \"balances\" 95) (sender) 92) \"approvals\" 92) (attr (params 82) \"spender\" 90) 92) (attr (params 82) \"value\" 91) 92))) (burn True ((set_type (params 123) (record ((address \"address\") (value \"nat\")) None) 124) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 127) 127) 127) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 129) \"balance\" 129) (attr (params 123) \"value\" 129) 129) 129) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (attr (params 123) \"value\" 129) 130) 130) \"Some\" \"None\" 130) 130) (set (attr (data) \"totalSupply\" 131) (openVariant (isNat (sub (attr (data) \"totalSupply\" 131) (attr (params 123) \"value\" 129) 131) 131) \"Some\" \"None\" 131) 131))) (deposit True ((set_type (params 45) \"nat\" 46) (defineLocal \"newTokens\" (mul (params 45) (literal (intOrNat 1000000000000000000) 49) 49) 49) (ifBlock (neq (attr (data) \"totalSupply\" 131) (literal (nat 0) 50) 50) ((defineLocal \"newUnderlyingBalance\" (add (attr (data) \"underlyingBalance\" 51) (params 45) 51) 51) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 45) (literal (intOrNat 1000000000000000000) 52) 52) (getLocal \"newUnderlyingBalance\" 52) 52) 52) (set (getLocal \"newTokens\" 867) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 53) (attr (data) \"totalSupply\" 131) 53) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 53) (getLocal \"fractionOfPoolOwnership\" 53) 53) 53) \"Some\" \"None\" 53) 53) 53)) 50) (set (attr (data) \"underlyingBalance\" 51) (add (attr (data) \"underlyingBalance\" 51) (params 45) 56) 56) (set (operations 69) (cons (transfer (record 59 (from_ (sender)) (to_ (to_address (self) \"None\")) (value (params 45))) (literal (mutez 0) 69) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 64) \"Some\" \"None\" 64) 69) (operations 69) 69) 69) (set (operations 81) (cons (transfer (record 72 (address (sender)) (value (getLocal \"newTokens\" 74))) (literal (mutez 0) 81) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 76) \"Some\" \"None\" 76) 81) (operations 81) 81) 81))) (getAdministrator True ((bind \"__s97\" ((set_type (first (params 143) 867) \"unit\" 144) (result (attr (data) \"administrator\" 134) 145))) (set_type (second (params 143) 867) (contract \"address\") 867) (set (operations 867) (cons (transfer (getLocal \"__s97\" 867) (literal (mutez 0) 867) (second (params 143) 867) 143) (operations 867) 867) 867))) (getAllowance True ((bind \"__s98\" ((result (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (first (params 103) 867) \"owner\" 104) 104) \"approvals\" 104) (attr (first (params 103) 867) \"spender\" 104) 104) 104))) (set_type (second (params 103) 867) (contract \"nat\") 867) (set (operations 867) (cons (transfer (getLocal \"__s98\" 867) (literal (mutez 0) 867) (second (params 103) 867) 103) (operations 867) 867) 867))) (getBalance True ((bind \"__s99\" ((result (attr (getItem (attr (data) \"balances\" 95) (first (params 99) 867) 100) \"balance\" 100) 100))) (set_type (second (params 99) 867) (contract \"nat\") 867) (set (operations 867) (cons (transfer (getLocal \"__s99\" 867) (literal (mutez 0) 867) (second (params 99) 867) 99) (operations 867) 867) 867))) (getTotalSupply True ((bind \"__s100\" ((set_type (first (params 107) 867) \"unit\" 108) (result (attr (data) \"totalSupply\" 131) 109))) (set_type (second (params 107) 867) (contract \"nat\") 867) (set (operations 867) (cons (transfer (getLocal \"__s100\" 867) (literal (mutez 0) 867) (second (params 107) 867) 107) (operations 867) 867) 867))) (mint True ((set_type (params 112) (record ((address \"address\") (value \"nat\")) None) 113) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 116) 116) 116) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (attr (params 112) \"value\" 119) 119) 119) (set (attr (data) \"totalSupply\" 131) (add (attr (data) \"totalSupply\" 131) (attr (params 112) \"value\" 119) 120) 120))) (redeem True ((set_type (params 85) \"nat\" 86) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 85) (literal (intOrNat 1000000000000000000) 88) 88) (attr (data) \"totalSupply\" 131) 88) 88) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 89) (attr (data) \"underlyingBalance\" 51) 89) (literal (intOrNat 1000000000000000000) 89) 89) 89) (set (attr (data) \"underlyingBalance\" 51) (openVariant (isNat (sub (attr (data) \"underlyingBalance\" 51) (getLocal \"tokensToReceive\" 92) 92) 92) \"Some\" \"None\" 92) 92) (set (operations 104) (cons (transfer (record 95 (address (sender)) (value (params 85))) (literal (mutez 0) 104) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 99) \"Some\" \"None\" 99) 104) (operations 104) 104) 104) (set (operations 117) (cons (transfer (record 107 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (getLocal \"tokensToReceive\" 110))) (literal (mutez 0) 117) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 112) \"Some\" \"None\" 112) 117) (operations 117) 117) 117))) (setAdministrator True ((set_type (params 137) \"address\" 138) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 139) (set (attr (data) \"administrator\" 134) (params 137) 140))) (setPause True ((set_type (params 151) \"bool\" 152) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 153) (set (attr (data) \"paused\" 148) (params 151) 154))) (transfer True ((set_type (params 68) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 69) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (and (invert (attr (data) \"paused\" 148) 71) (or (eq (attr (params 68) \"from_\" 72) (sender) 72) (ge (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 73) \"approvals\" 73) (sender) 73) (attr (params 68) \"value\" 73) 73) 72) 71) 70) 70) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 75) \"balance\" 75) (attr (params 68) \"value\" 73) 75) 75) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (attr (params 68) \"value\" 73) 76) 76) \"Some\" \"None\" 76) 76) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (attr (params 68) \"value\" 73) 77) 77) (ifBlock (and (neq (attr (params 68) \"from_\" 72) (sender) 78) (invert (eq (sender) (attr (data) \"administrator\" 134) 134) 78) 78) ((set (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (attr (params 68) \"value\" 73) 79) 79) \"Some\" \"None\" 79) 79)) 78))) (updateBalance True ((set_type (params 121) \"unit\" 122) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 0) 125) 125) (literal (string \"bad state\") 125) 125) (set (attr (data) \"state\" 125) (literal (intOrNat 1) 128) 128) (set (operations 137) (cons (transfer (tuple 137 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 131)) (literal (mutez 0) 137) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 66) 132) \"Some\" \"None\" 132) 137) (operations 137) 137) 137))) (updateBalance_callback True ((set_type (params 141) \"nat\" 142) (verify (eq (sender) (attr (data) \"tokenAddress\" 66) 145) (literal (string \"bad sender\") 145) 145) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 1) 148) 148) (literal (string \"bad state\") 148) 148) (set (attr (data) \"state\" 125) (literal (intOrNat 0) 151) 151) (set (attr (data) \"underlyingBalance\" 51) (params 141) 154))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 867, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 872 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)) (value (literal (nat 10) 870)))", "line_no": 871, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 871)", "show": true, "valid": "(literal (bool True) 871)", "voting_powers": "(map 871 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 883 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)) (value (literal (nat 40) 881)))", "line_no": 882, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 882)", "show": true, "valid": "(literal (bool True) 882)", "voting_powers": "(map 882 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 893 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 10) 870)))", "line_no": 892, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 892)", "show": true, "valid": "(literal (bool True) 892)", "voting_powers": "(map 892 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 903 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 40) 881)))", "line_no": 902, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 902)", "show": true, "valid": "(literal (bool True) 902)", "voting_powers": "(map 902 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 870)", "line_no": 912, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 912)", "show": true, "valid": "(literal (bool True) 912)", "voting_powers": "(map 912 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 881)", "line_no": 918, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 918)", "show": true, "valid": "(literal (bool True) 918)", "voting_powers": "(map 918 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 10) 870) (literal (intOrNat 1000000000000000000) 926) 926)", "line_no": 925, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 925)", "show": true, "valid": "(literal (bool True) 925)", "voting_powers": "(map 925 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 902) \"balances\" 932) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 932) \"balance\" 932) (literal (nat 10) 870) 932)", "line_no": 932}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 925) \"balances\" 933) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 933) \"balance\" 933) (literal (nat 0) 933) 933)", "line_no": 933}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 902) \"balances\" 932) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11) 936) \"balance\" 936) (literal (nat 0) 936) 936)", "line_no": 936}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 925) \"balances\" 933) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11) 937) \"balance\" 937) (mul (mul (literal (nat 10) 870) (literal (intOrNat 4) 937) 937) (literal (intOrNat 1000000000000000000) 937) 937) 937)", "line_no": 937}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 925) \"totalSupply\" 940) (mul (literal (nat 40) 881) (literal (intOrNat 1000000000000000000) 940) 940) 940)", "line_no": 940}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 902) \"balances\" 932) (literal (local-address (static_id 1 28)) 28) 943) \"balance\" 943) (literal (nat 40) 881) 943)", "line_no": 943}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 925) \"underlyingBalance\" 944) (literal (nat 40) 881) 944)", "line_no": 944}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 40) 881) (literal (intOrNat 1000000000000000000) 948) 948)", "line_no": 947, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 947)", "show": true, "valid": "(literal (bool True) 947)", "voting_powers": "(map 947 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 902) \"balances\" 932) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 954) \"balance\" 954) (literal (nat 10) 870) 954)", "line_no": 954}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 947) \"balances\" 955) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 955) \"balance\" 955) (literal (nat 0) 955) 955)", "line_no": 955}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 902) \"balances\" 932) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11) 958) \"balance\" 958) (literal (nat 40) 881) 958)", "line_no": 958}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 947) \"balances\" 955) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11) 959) \"balance\" 959) (literal (nat 0) 959) 959)", "line_no": 959}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 947) \"totalSupply\" 962) (literal (nat 0) 962) 962)", "line_no": 962}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 902) \"balances\" 932) (literal (local-address (static_id 1 28)) 28) 965) \"balance\" 965) (literal (nat 0) 965) 965)", "line_no": 965}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 947) \"underlyingBalance\" 966) (literal (nat 0) 966) 966)", "line_no": 966}], "decompile": false, "kind": "test"}, {"shortname": "redeem_-_can_redeem_from_two_accounts_-_reversed", "longname": "redeem - can redeem from two accounts - reversed", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 87) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 91) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 67) (record ((address \"address\") (value \"nat\")) None) 68) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 69) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 70) \"balance\" 70) (attr (params 67) \"value\" 70) 70) 70) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (attr (params 67) \"value\" 70) 71) 71) \"Some\" \"None\" 71) 71) (set (attr (data) \"totalSupply\" 72) (openVariant (isNat (sub (attr (data) \"totalSupply\" 72) (attr (params 67) \"value\" 70) 72) 72) \"Some\" \"None\" 72) 72))) (getAdministrator True ((bind \"__s101\" ((set_type (first (params 85) 976) \"unit\" 86) (result (attr (data) \"administrator\" 76) 87))) (set_type (second (params 85) 976) (contract \"address\") 976) (set (operations 976) (cons (transfer (getLocal \"__s101\" 976) (literal (mutez 0) 976) (second (params 85) 976) 85) (operations 976) 976) 976))) (getAllowance True ((bind \"__s102\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 41) 976) \"owner\" 42) 42) \"approvals\" 42) (attr (first (params 41) 976) \"spender\" 42) 42) 42))) (set_type (second (params 41) 976) (contract \"nat\") 976) (set (operations 976) (cons (transfer (getLocal \"__s102\" 976) (literal (mutez 0) 976) (second (params 41) 976) 41) (operations 976) 976) 976))) (getBalance True ((bind \"__s103\" ((result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 976) 38) \"balance\" 38) 38))) (set_type (second (params 37) 976) (contract \"nat\") 976) (set (operations 976) (cons (transfer (getLocal \"__s103\" 976) (literal (mutez 0) 976) (second (params 37) 976) 37) (operations 976) 976) 976))) (getTotalSupply True ((bind \"__s104\" ((set_type (first (params 45) 976) \"unit\" 46) (result (attr (data) \"totalSupply\" 72) 47))) (set_type (second (params 45) 976) (contract \"nat\") 976) (set (operations 976) (cons (transfer (getLocal \"__s104\" 976) (literal (mutez 0) 976) (second (params 45) 976) 45) (operations 976) 976) 976))) (mint True ((set_type (params 59) (record ((address \"address\") (value \"nat\")) None) 60) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 61) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (attr (params 59) \"value\" 63) 63) 63) (set (attr (data) \"totalSupply\" 72) (add (attr (data) \"totalSupply\" 72) (attr (params 59) \"value\" 63) 64) 64))) (setAdministrator True ((set_type (params 79) \"address\" 80) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 81) (set (attr (data) \"administrator\" 76) (params 79) 82))) (setPause True ((set_type (params 94) \"bool\" 95) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 96) (set (attr (data) \"paused\" 91) (params 94) 97))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 76) 76) (and (invert (attr (data) \"paused\" 91) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 76) 76) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 976, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 28)", "export": "(storage (record 28 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 32 ) (bigmap (unknown 88) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 32)) (paused (literal (bool False) 28)) (state (literal (intOrNat 0) 28)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (totalSupply (literal (intOrNat 0) 28)) (underlyingBalance (literal (nat 0) 39)))\nstorage_type (())\nmessages ((approve True ((set_type (params 82) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 83) (ifBlock (invert (contains (attr (data) \"balances\" 95) (sender) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (sender) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (invert (attr (data) \"paused\" 148) 89) 89) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 95) (sender) 90) \"approvals\" 90) (attr (params 82) \"spender\" 90) (literal (intOrNat 0) 90) 90) (literal (intOrNat 0) 91) 91) (eq (attr (params 82) \"value\" 91) (literal (intOrNat 0) 91) 91) 91) (literal (string \"UnsafeAllowanceChange\") 91) 91) (set (getItem (attr (getItem (attr (data) \"balances\" 95) (sender) 92) \"approvals\" 92) (attr (params 82) \"spender\" 90) 92) (attr (params 82) \"value\" 91) 92))) (burn True ((set_type (params 123) (record ((address \"address\") (value \"nat\")) None) 124) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 127) 127) 127) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 129) \"balance\" 129) (attr (params 123) \"value\" 129) 129) 129) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (attr (params 123) \"value\" 129) 130) 130) \"Some\" \"None\" 130) 130) (set (attr (data) \"totalSupply\" 131) (openVariant (isNat (sub (attr (data) \"totalSupply\" 131) (attr (params 123) \"value\" 129) 131) 131) \"Some\" \"None\" 131) 131))) (deposit True ((set_type (params 45) \"nat\" 46) (defineLocal \"newTokens\" (mul (params 45) (literal (intOrNat 1000000000000000000) 49) 49) 49) (ifBlock (neq (attr (data) \"totalSupply\" 131) (literal (nat 0) 50) 50) ((defineLocal \"newUnderlyingBalance\" (add (attr (data) \"underlyingBalance\" 51) (params 45) 51) 51) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 45) (literal (intOrNat 1000000000000000000) 52) 52) (getLocal \"newUnderlyingBalance\" 52) 52) 52) (set (getLocal \"newTokens\" 982) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 53) (attr (data) \"totalSupply\" 131) 53) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 53) (getLocal \"fractionOfPoolOwnership\" 53) 53) 53) \"Some\" \"None\" 53) 53) 53)) 50) (set (attr (data) \"underlyingBalance\" 51) (add (attr (data) \"underlyingBalance\" 51) (params 45) 56) 56) (set (operations 69) (cons (transfer (record 59 (from_ (sender)) (to_ (to_address (self) \"None\")) (value (params 45))) (literal (mutez 0) 69) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 64) \"Some\" \"None\" 64) 69) (operations 69) 69) 69) (set (operations 81) (cons (transfer (record 72 (address (sender)) (value (getLocal \"newTokens\" 74))) (literal (mutez 0) 81) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 76) \"Some\" \"None\" 76) 81) (operations 81) 81) 81))) (getAdministrator True ((bind \"__s105\" ((set_type (first (params 143) 982) \"unit\" 144) (result (attr (data) \"administrator\" 134) 145))) (set_type (second (params 143) 982) (contract \"address\") 982) (set (operations 982) (cons (transfer (getLocal \"__s105\" 982) (literal (mutez 0) 982) (second (params 143) 982) 143) (operations 982) 982) 982))) (getAllowance True ((bind \"__s106\" ((result (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (first (params 103) 982) \"owner\" 104) 104) \"approvals\" 104) (attr (first (params 103) 982) \"spender\" 104) 104) 104))) (set_type (second (params 103) 982) (contract \"nat\") 982) (set (operations 982) (cons (transfer (getLocal \"__s106\" 982) (literal (mutez 0) 982) (second (params 103) 982) 103) (operations 982) 982) 982))) (getBalance True ((bind \"__s107\" ((result (attr (getItem (attr (data) \"balances\" 95) (first (params 99) 982) 100) \"balance\" 100) 100))) (set_type (second (params 99) 982) (contract \"nat\") 982) (set (operations 982) (cons (transfer (getLocal \"__s107\" 982) (literal (mutez 0) 982) (second (params 99) 982) 99) (operations 982) 982) 982))) (getTotalSupply True ((bind \"__s108\" ((set_type (first (params 107) 982) \"unit\" 108) (result (attr (data) \"totalSupply\" 131) 109))) (set_type (second (params 107) 982) (contract \"nat\") 982) (set (operations 982) (cons (transfer (getLocal \"__s108\" 982) (literal (mutez 0) 982) (second (params 107) 982) 107) (operations 982) 982) 982))) (mint True ((set_type (params 112) (record ((address \"address\") (value \"nat\")) None) 113) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 116) 116) 116) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (attr (params 112) \"value\" 119) 119) 119) (set (attr (data) \"totalSupply\" 131) (add (attr (data) \"totalSupply\" 131) (attr (params 112) \"value\" 119) 120) 120))) (redeem True ((set_type (params 85) \"nat\" 86) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 85) (literal (intOrNat 1000000000000000000) 88) 88) (attr (data) \"totalSupply\" 131) 88) 88) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 89) (attr (data) \"underlyingBalance\" 51) 89) (literal (intOrNat 1000000000000000000) 89) 89) 89) (set (attr (data) \"underlyingBalance\" 51) (openVariant (isNat (sub (attr (data) \"underlyingBalance\" 51) (getLocal \"tokensToReceive\" 92) 92) 92) \"Some\" \"None\" 92) 92) (set (operations 104) (cons (transfer (record 95 (address (sender)) (value (params 85))) (literal (mutez 0) 104) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 99) \"Some\" \"None\" 99) 104) (operations 104) 104) 104) (set (operations 117) (cons (transfer (record 107 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (getLocal \"tokensToReceive\" 110))) (literal (mutez 0) 117) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 112) \"Some\" \"None\" 112) 117) (operations 117) 117) 117))) (setAdministrator True ((set_type (params 137) \"address\" 138) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 139) (set (attr (data) \"administrator\" 134) (params 137) 140))) (setPause True ((set_type (params 151) \"bool\" 152) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 153) (set (attr (data) \"paused\" 148) (params 151) 154))) (transfer True ((set_type (params 68) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 69) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (and (invert (attr (data) \"paused\" 148) 71) (or (eq (attr (params 68) \"from_\" 72) (sender) 72) (ge (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 73) \"approvals\" 73) (sender) 73) (attr (params 68) \"value\" 73) 73) 72) 71) 70) 70) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 75) \"balance\" 75) (attr (params 68) \"value\" 73) 75) 75) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (attr (params 68) \"value\" 73) 76) 76) \"Some\" \"None\" 76) 76) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (attr (params 68) \"value\" 73) 77) 77) (ifBlock (and (neq (attr (params 68) \"from_\" 72) (sender) 78) (invert (eq (sender) (attr (data) \"administrator\" 134) 134) 78) 78) ((set (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (attr (params 68) \"value\" 73) 79) 79) \"Some\" \"None\" 79) 79)) 78))) (updateBalance True ((set_type (params 121) \"unit\" 122) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 0) 125) 125) (literal (string \"bad state\") 125) 125) (set (attr (data) \"state\" 125) (literal (intOrNat 1) 128) 128) (set (operations 137) (cons (transfer (tuple 137 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 131)) (literal (mutez 0) 137) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 66) 132) \"Some\" \"None\" 132) 137) (operations 137) 137) 137))) (updateBalance_callback True ((set_type (params 141) \"nat\" 142) (verify (eq (sender) (attr (data) \"tokenAddress\" 66) 145) (literal (string \"bad sender\") 145) 145) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 1) 148) 148) (literal (string \"bad state\") 148) 148) (set (attr (data) \"state\" 125) (literal (intOrNat 0) 151) 151) (set (attr (data) \"underlyingBalance\" 51) (params 141) 154))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 982, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 987 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)) (value (literal (nat 10) 985)))", "line_no": 986, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 986)", "show": true, "valid": "(literal (bool True) 986)", "voting_powers": "(map 986 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 998 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)) (value (literal (nat 40) 996)))", "line_no": 997, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 997)", "show": true, "valid": "(literal (bool True) 997)", "voting_powers": "(map 997 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1008 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 10) 985)))", "line_no": 1007, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1007)", "show": true, "valid": "(literal (bool True) 1007)", "voting_powers": "(map 1007 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1018 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 40) 996)))", "line_no": 1017, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1017)", "show": true, "valid": "(literal (bool True) 1017)", "voting_powers": "(map 1017 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 985)", "line_no": 1027, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1027)", "show": true, "valid": "(literal (bool True) 1027)", "voting_powers": "(map 1027 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 996)", "line_no": 1033, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1033)", "show": true, "valid": "(literal (bool True) 1033)", "voting_powers": "(map 1033 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 40) 996) (literal (intOrNat 1000000000000000000) 1041) 1041)", "line_no": 1040, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1040)", "show": true, "valid": "(literal (bool True) 1040)", "voting_powers": "(map 1040 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1017) \"balances\" 1047) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 1047) \"balance\" 1047) (literal (nat 0) 1047) 1047)", "line_no": 1047}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 1040) \"balances\" 1048) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 1048) \"balance\" 1048) (mul (literal (nat 10) 985) (literal (intOrNat 1000000000000000000) 1048) 1048) 1048)", "line_no": 1048}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1017) \"balances\" 1047) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11) 1051) \"balance\" 1051) (literal (nat 40) 996) 1051)", "line_no": 1051}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 1040) \"balances\" 1048) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11) 1052) \"balance\" 1052) (literal (nat 0) 1052) 1052)", "line_no": 1052}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 1040) \"totalSupply\" 1055) (mul (literal (nat 10) 985) (literal (intOrNat 1000000000000000000) 1055) 1055) 1055)", "line_no": 1055}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1017) \"balances\" 1047) (literal (local-address (static_id 1 28)) 28) 1058) \"balance\" 1058) (literal (nat 10) 985) 1058)", "line_no": 1058}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 1040) \"underlyingBalance\" 1059) (literal (nat 10) 985) 1059)", "line_no": 1059}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 10) 985) (literal (intOrNat 1000000000000000000) 1063) 1063)", "line_no": 1062, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1062)", "show": true, "valid": "(literal (bool True) 1062)", "voting_powers": "(map 1062 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1017) \"balances\" 1047) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 1069) \"balance\" 1069) (literal (nat 10) 985) 1069)", "line_no": 1069}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 1062) \"balances\" 1070) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 1070) \"balance\" 1070) (literal (nat 0) 1070) 1070)", "line_no": 1070}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1017) \"balances\" 1047) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11) 1073) \"balance\" 1073) (literal (nat 40) 996) 1073)", "line_no": 1073}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 1062) \"balances\" 1070) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11) 1074) \"balance\" 1074) (literal (nat 0) 1074) 1074)", "line_no": 1074}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 1062) \"totalSupply\" 1077) (literal (nat 0) 1077) 1077)", "line_no": 1077}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1017) \"balances\" 1047) (literal (local-address (static_id 1 28)) 28) 1080) \"balance\" 1080) (literal (nat 0) 1080) 1080)", "line_no": 1080}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 1062) \"underlyingBalance\" 1081) (literal (nat 0) 1081) 1081)", "line_no": 1081}], "decompile": false, "kind": "test"}, {"shortname": "redeem_-_can_redeem_partially_from_two_accounts", "longname": "redeem - can redeem partially from two accounts", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 94) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 91) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 67) (record ((address \"address\") (value \"nat\")) None) 68) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 69) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 70) \"balance\" 70) (attr (params 67) \"value\" 70) 70) 70) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (attr (params 67) \"value\" 70) 71) 71) \"Some\" \"None\" 71) 71) (set (attr (data) \"totalSupply\" 72) (openVariant (isNat (sub (attr (data) \"totalSupply\" 72) (attr (params 67) \"value\" 70) 72) 72) \"Some\" \"None\" 72) 72))) (getAdministrator True ((bind \"__s109\" ((set_type (first (params 85) 1091) \"unit\" 86) (result (attr (data) \"administrator\" 76) 87))) (set_type (second (params 85) 1091) (contract \"address\") 1091) (set (operations 1091) (cons (transfer (getLocal \"__s109\" 1091) (literal (mutez 0) 1091) (second (params 85) 1091) 85) (operations 1091) 1091) 1091))) (getAllowance True ((bind \"__s110\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 41) 1091) \"owner\" 42) 42) \"approvals\" 42) (attr (first (params 41) 1091) \"spender\" 42) 42) 42))) (set_type (second (params 41) 1091) (contract \"nat\") 1091) (set (operations 1091) (cons (transfer (getLocal \"__s110\" 1091) (literal (mutez 0) 1091) (second (params 41) 1091) 41) (operations 1091) 1091) 1091))) (getBalance True ((bind \"__s111\" ((result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1091) 38) \"balance\" 38) 38))) (set_type (second (params 37) 1091) (contract \"nat\") 1091) (set (operations 1091) (cons (transfer (getLocal \"__s111\" 1091) (literal (mutez 0) 1091) (second (params 37) 1091) 37) (operations 1091) 1091) 1091))) (getTotalSupply True ((bind \"__s112\" ((set_type (first (params 45) 1091) \"unit\" 46) (result (attr (data) \"totalSupply\" 72) 47))) (set_type (second (params 45) 1091) (contract \"nat\") 1091) (set (operations 1091) (cons (transfer (getLocal \"__s112\" 1091) (literal (mutez 0) 1091) (second (params 45) 1091) 45) (operations 1091) 1091) 1091))) (mint True ((set_type (params 59) (record ((address \"address\") (value \"nat\")) None) 60) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 61) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (attr (params 59) \"value\" 63) 63) 63) (set (attr (data) \"totalSupply\" 72) (add (attr (data) \"totalSupply\" 72) (attr (params 59) \"value\" 63) 64) 64))) (setAdministrator True ((set_type (params 79) \"address\" 80) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 81) (set (attr (data) \"administrator\" 76) (params 79) 82))) (setPause True ((set_type (params 94) \"bool\" 95) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 96) (set (attr (data) \"paused\" 91) (params 94) 97))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 76) 76) (and (invert (attr (data) \"paused\" 91) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 76) 76) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1091, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 28)", "export": "(storage (record 28 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 32 ) (bigmap (unknown 95) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 32)) (paused (literal (bool False) 28)) (state (literal (intOrNat 0) 28)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (totalSupply (literal (intOrNat 0) 28)) (underlyingBalance (literal (nat 0) 39)))\nstorage_type (())\nmessages ((approve True ((set_type (params 82) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 83) (ifBlock (invert (contains (attr (data) \"balances\" 95) (sender) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (sender) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (invert (attr (data) \"paused\" 148) 89) 89) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 95) (sender) 90) \"approvals\" 90) (attr (params 82) \"spender\" 90) (literal (intOrNat 0) 90) 90) (literal (intOrNat 0) 91) 91) (eq (attr (params 82) \"value\" 91) (literal (intOrNat 0) 91) 91) 91) (literal (string \"UnsafeAllowanceChange\") 91) 91) (set (getItem (attr (getItem (attr (data) \"balances\" 95) (sender) 92) \"approvals\" 92) (attr (params 82) \"spender\" 90) 92) (attr (params 82) \"value\" 91) 92))) (burn True ((set_type (params 123) (record ((address \"address\") (value \"nat\")) None) 124) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 127) 127) 127) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 129) \"balance\" 129) (attr (params 123) \"value\" 129) 129) 129) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (attr (params 123) \"value\" 129) 130) 130) \"Some\" \"None\" 130) 130) (set (attr (data) \"totalSupply\" 131) (openVariant (isNat (sub (attr (data) \"totalSupply\" 131) (attr (params 123) \"value\" 129) 131) 131) \"Some\" \"None\" 131) 131))) (deposit True ((set_type (params 45) \"nat\" 46) (defineLocal \"newTokens\" (mul (params 45) (literal (intOrNat 1000000000000000000) 49) 49) 49) (ifBlock (neq (attr (data) \"totalSupply\" 131) (literal (nat 0) 50) 50) ((defineLocal \"newUnderlyingBalance\" (add (attr (data) \"underlyingBalance\" 51) (params 45) 51) 51) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 45) (literal (intOrNat 1000000000000000000) 52) 52) (getLocal \"newUnderlyingBalance\" 52) 52) 52) (set (getLocal \"newTokens\" 1097) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 53) (attr (data) \"totalSupply\" 131) 53) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 53) (getLocal \"fractionOfPoolOwnership\" 53) 53) 53) \"Some\" \"None\" 53) 53) 53)) 50) (set (attr (data) \"underlyingBalance\" 51) (add (attr (data) \"underlyingBalance\" 51) (params 45) 56) 56) (set (operations 69) (cons (transfer (record 59 (from_ (sender)) (to_ (to_address (self) \"None\")) (value (params 45))) (literal (mutez 0) 69) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 64) \"Some\" \"None\" 64) 69) (operations 69) 69) 69) (set (operations 81) (cons (transfer (record 72 (address (sender)) (value (getLocal \"newTokens\" 74))) (literal (mutez 0) 81) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 76) \"Some\" \"None\" 76) 81) (operations 81) 81) 81))) (getAdministrator True ((bind \"__s113\" ((set_type (first (params 143) 1097) \"unit\" 144) (result (attr (data) \"administrator\" 134) 145))) (set_type (second (params 143) 1097) (contract \"address\") 1097) (set (operations 1097) (cons (transfer (getLocal \"__s113\" 1097) (literal (mutez 0) 1097) (second (params 143) 1097) 143) (operations 1097) 1097) 1097))) (getAllowance True ((bind \"__s114\" ((result (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (first (params 103) 1097) \"owner\" 104) 104) \"approvals\" 104) (attr (first (params 103) 1097) \"spender\" 104) 104) 104))) (set_type (second (params 103) 1097) (contract \"nat\") 1097) (set (operations 1097) (cons (transfer (getLocal \"__s114\" 1097) (literal (mutez 0) 1097) (second (params 103) 1097) 103) (operations 1097) 1097) 1097))) (getBalance True ((bind \"__s115\" ((result (attr (getItem (attr (data) \"balances\" 95) (first (params 99) 1097) 100) \"balance\" 100) 100))) (set_type (second (params 99) 1097) (contract \"nat\") 1097) (set (operations 1097) (cons (transfer (getLocal \"__s115\" 1097) (literal (mutez 0) 1097) (second (params 99) 1097) 99) (operations 1097) 1097) 1097))) (getTotalSupply True ((bind \"__s116\" ((set_type (first (params 107) 1097) \"unit\" 108) (result (attr (data) \"totalSupply\" 131) 109))) (set_type (second (params 107) 1097) (contract \"nat\") 1097) (set (operations 1097) (cons (transfer (getLocal \"__s116\" 1097) (literal (mutez 0) 1097) (second (params 107) 1097) 107) (operations 1097) 1097) 1097))) (mint True ((set_type (params 112) (record ((address \"address\") (value \"nat\")) None) 113) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 116) 116) 116) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (attr (params 112) \"value\" 119) 119) 119) (set (attr (data) \"totalSupply\" 131) (add (attr (data) \"totalSupply\" 131) (attr (params 112) \"value\" 119) 120) 120))) (redeem True ((set_type (params 85) \"nat\" 86) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 85) (literal (intOrNat 1000000000000000000) 88) 88) (attr (data) \"totalSupply\" 131) 88) 88) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 89) (attr (data) \"underlyingBalance\" 51) 89) (literal (intOrNat 1000000000000000000) 89) 89) 89) (set (attr (data) \"underlyingBalance\" 51) (openVariant (isNat (sub (attr (data) \"underlyingBalance\" 51) (getLocal \"tokensToReceive\" 92) 92) 92) \"Some\" \"None\" 92) 92) (set (operations 104) (cons (transfer (record 95 (address (sender)) (value (params 85))) (literal (mutez 0) 104) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 99) \"Some\" \"None\" 99) 104) (operations 104) 104) 104) (set (operations 117) (cons (transfer (record 107 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (getLocal \"tokensToReceive\" 110))) (literal (mutez 0) 117) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 112) \"Some\" \"None\" 112) 117) (operations 117) 117) 117))) (setAdministrator True ((set_type (params 137) \"address\" 138) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 139) (set (attr (data) \"administrator\" 134) (params 137) 140))) (setPause True ((set_type (params 151) \"bool\" 152) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 153) (set (attr (data) \"paused\" 148) (params 151) 154))) (transfer True ((set_type (params 68) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 69) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (and (invert (attr (data) \"paused\" 148) 71) (or (eq (attr (params 68) \"from_\" 72) (sender) 72) (ge (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 73) \"approvals\" 73) (sender) 73) (attr (params 68) \"value\" 73) 73) 72) 71) 70) 70) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 75) \"balance\" 75) (attr (params 68) \"value\" 73) 75) 75) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (attr (params 68) \"value\" 73) 76) 76) \"Some\" \"None\" 76) 76) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (attr (params 68) \"value\" 73) 77) 77) (ifBlock (and (neq (attr (params 68) \"from_\" 72) (sender) 78) (invert (eq (sender) (attr (data) \"administrator\" 134) 134) 78) 78) ((set (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (attr (params 68) \"value\" 73) 79) 79) \"Some\" \"None\" 79) 79)) 78))) (updateBalance True ((set_type (params 121) \"unit\" 122) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 0) 125) 125) (literal (string \"bad state\") 125) 125) (set (attr (data) \"state\" 125) (literal (intOrNat 1) 128) 128) (set (operations 137) (cons (transfer (tuple 137 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 131)) (literal (mutez 0) 137) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 66) 132) \"Some\" \"None\" 132) 137) (operations 137) 137) 137))) (updateBalance_callback True ((set_type (params 141) \"nat\" 142) (verify (eq (sender) (attr (data) \"tokenAddress\" 66) 145) (literal (string \"bad sender\") 145) 145) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 1) 148) 148) (literal (string \"bad state\") 148) 148) (set (attr (data) \"state\" 125) (literal (intOrNat 0) 151) 151) (set (attr (data) \"underlyingBalance\" 51) (params 141) 154))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1097, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1102 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)) (value (literal (nat 10) 1100)))", "line_no": 1101, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1101)", "show": true, "valid": "(literal (bool True) 1101)", "voting_powers": "(map 1101 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1113 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)) (value (literal (nat 40) 1111)))", "line_no": 1112, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1112)", "show": true, "valid": "(literal (bool True) 1112)", "voting_powers": "(map 1112 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1123 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 10) 1100)))", "line_no": 1122, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1122)", "show": true, "valid": "(literal (bool True) 1122)", "voting_powers": "(map 1122 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1133 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 40) 1111)))", "line_no": 1132, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1132)", "show": true, "valid": "(literal (bool True) 1132)", "voting_powers": "(map 1132 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 1100)", "line_no": 1142, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1142)", "show": true, "valid": "(literal (bool True) 1142)", "voting_powers": "(map 1142 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 1111)", "line_no": 1148, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1148)", "show": true, "valid": "(literal (bool True) 1148)", "voting_powers": "(map 1148 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "redeem", "params": "(mul (truediv (literal (nat 10) 1100) (literal (intOrNat 2) 1156) 1156) (literal (intOrNat 1000000000000000000) 1156) 1156)", "line_no": 1155, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1155)", "show": true, "valid": "(literal (bool True) 1155)", "voting_powers": "(map 1155 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1132) \"balances\" 1162) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 1162) \"balance\" 1162) (truediv (literal (nat 10) 1100) (literal (intOrNat 2) 1162) 1162) 1162)", "line_no": 1162}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 1155) \"balances\" 1163) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 1163) \"balance\" 1163) (mul (truediv (literal (nat 10) 1100) (literal (intOrNat 2) 1163) 1163) (literal (intOrNat 1000000000000000000) 1163) 1163) 1163)", "line_no": 1163}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1132) \"balances\" 1162) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11) 1166) \"balance\" 1166) (literal (nat 0) 1166) 1166)", "line_no": 1166}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 1155) \"balances\" 1163) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11) 1167) \"balance\" 1167) (mul (mul (literal (nat 10) 1100) (literal (intOrNat 4) 1167) 1167) (literal (intOrNat 1000000000000000000) 1167) 1167) 1167)", "line_no": 1167}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 1155) \"totalSupply\" 1170) (mul (add (literal (nat 40) 1111) (truediv (literal (nat 10) 1100) (literal (intOrNat 2) 1170) 1170) 1170) (literal (intOrNat 1000000000000000000) 1170) 1170) 1170)", "line_no": 1170}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1132) \"balances\" 1162) (literal (local-address (static_id 1 28)) 28) 1173) \"balance\" 1173) (add (literal (nat 40) 1111) (truediv (literal (nat 10) 1100) (literal (intOrNat 2) 1173) 1173) 1173) 1173)", "line_no": 1173}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 1155) \"underlyingBalance\" 1174) (add (literal (nat 40) 1111) (truediv (literal (nat 10) 1100) (literal (intOrNat 2) 1174) 1174) 1174) 1174)", "line_no": 1174}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "redeem", "params": "(mul (truediv (literal (nat 40) 1111) (literal (intOrNat 4) 1178) 1178) (literal (intOrNat 1000000000000000000) 1178) 1178)", "line_no": 1177, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1177)", "show": true, "valid": "(literal (bool True) 1177)", "voting_powers": "(map 1177 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1132) \"balances\" 1162) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 1184) \"balance\" 1184) (truediv (literal (nat 10) 1100) (literal (intOrNat 2) 1184) 1184) 1184)", "line_no": 1184}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 1177) \"balances\" 1185) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 1185) \"balance\" 1185) (mul (truediv (literal (nat 10) 1100) (literal (intOrNat 2) 1185) 1185) (literal (intOrNat 1000000000000000000) 1185) 1185) 1185)", "line_no": 1185}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1132) \"balances\" 1162) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11) 1188) \"balance\" 1188) (literal (intOrNat 9) 1188) 1188)", "line_no": 1188}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 1177) \"balances\" 1185) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11) 1189) \"balance\" 1189) (literal (intOrNat 30000000000000000000) 1189) 1189)", "line_no": 1189}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 1177) \"totalSupply\" 1193) (mul (literal (nat 35) 1193) (literal (intOrNat 1000000000000000000) 1193) 1193) 1193)", "line_no": 1193}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1132) \"balances\" 1162) (literal (local-address (static_id 1 28)) 28) 1199) \"balance\" 1199) (literal (nat 36) 1198) 1199)", "line_no": 1199}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 1177) \"underlyingBalance\" 1200) (literal (nat 36) 1198) 1200)", "line_no": 1200}], "decompile": false, "kind": "test"}, {"shortname": "redeem_-_can_redeem_from_two_accounts_with_liquidity_added", "longname": "redeem - can redeem from two accounts with liquidity added", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 101) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 91) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 67) (record ((address \"address\") (value \"nat\")) None) 68) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 69) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 70) \"balance\" 70) (attr (params 67) \"value\" 70) 70) 70) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (attr (params 67) \"value\" 70) 71) 71) \"Some\" \"None\" 71) 71) (set (attr (data) \"totalSupply\" 72) (openVariant (isNat (sub (attr (data) \"totalSupply\" 72) (attr (params 67) \"value\" 70) 72) 72) \"Some\" \"None\" 72) 72))) (getAdministrator True ((bind \"__s117\" ((set_type (first (params 85) 1210) \"unit\" 86) (result (attr (data) \"administrator\" 76) 87))) (set_type (second (params 85) 1210) (contract \"address\") 1210) (set (operations 1210) (cons (transfer (getLocal \"__s117\" 1210) (literal (mutez 0) 1210) (second (params 85) 1210) 85) (operations 1210) 1210) 1210))) (getAllowance True ((bind \"__s118\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 41) 1210) \"owner\" 42) 42) \"approvals\" 42) (attr (first (params 41) 1210) \"spender\" 42) 42) 42))) (set_type (second (params 41) 1210) (contract \"nat\") 1210) (set (operations 1210) (cons (transfer (getLocal \"__s118\" 1210) (literal (mutez 0) 1210) (second (params 41) 1210) 41) (operations 1210) 1210) 1210))) (getBalance True ((bind \"__s119\" ((result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1210) 38) \"balance\" 38) 38))) (set_type (second (params 37) 1210) (contract \"nat\") 1210) (set (operations 1210) (cons (transfer (getLocal \"__s119\" 1210) (literal (mutez 0) 1210) (second (params 37) 1210) 37) (operations 1210) 1210) 1210))) (getTotalSupply True ((bind \"__s120\" ((set_type (first (params 45) 1210) \"unit\" 46) (result (attr (data) \"totalSupply\" 72) 47))) (set_type (second (params 45) 1210) (contract \"nat\") 1210) (set (operations 1210) (cons (transfer (getLocal \"__s120\" 1210) (literal (mutez 0) 1210) (second (params 45) 1210) 45) (operations 1210) 1210) 1210))) (mint True ((set_type (params 59) (record ((address \"address\") (value \"nat\")) None) 60) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 61) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (attr (params 59) \"value\" 63) 63) 63) (set (attr (data) \"totalSupply\" 72) (add (attr (data) \"totalSupply\" 72) (attr (params 59) \"value\" 63) 64) 64))) (setAdministrator True ((set_type (params 79) \"address\" 80) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 81) (set (attr (data) \"administrator\" 76) (params 79) 82))) (setPause True ((set_type (params 94) \"bool\" 95) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 96) (set (attr (data) \"paused\" 91) (params 94) 97))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 76) 76) (and (invert (attr (data) \"paused\" 91) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 76) 76) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1210, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 28)", "export": "(storage (record 28 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 32 ) (bigmap (unknown 102) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 32)) (paused (literal (bool False) 28)) (state (literal (intOrNat 0) 28)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (totalSupply (literal (intOrNat 0) 28)) (underlyingBalance (literal (nat 0) 39)))\nstorage_type (())\nmessages ((approve True ((set_type (params 82) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 83) (ifBlock (invert (contains (attr (data) \"balances\" 95) (sender) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (sender) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (invert (attr (data) \"paused\" 148) 89) 89) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 95) (sender) 90) \"approvals\" 90) (attr (params 82) \"spender\" 90) (literal (intOrNat 0) 90) 90) (literal (intOrNat 0) 91) 91) (eq (attr (params 82) \"value\" 91) (literal (intOrNat 0) 91) 91) 91) (literal (string \"UnsafeAllowanceChange\") 91) 91) (set (getItem (attr (getItem (attr (data) \"balances\" 95) (sender) 92) \"approvals\" 92) (attr (params 82) \"spender\" 90) 92) (attr (params 82) \"value\" 91) 92))) (burn True ((set_type (params 123) (record ((address \"address\") (value \"nat\")) None) 124) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 127) 127) 127) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 129) \"balance\" 129) (attr (params 123) \"value\" 129) 129) 129) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (attr (params 123) \"value\" 129) 130) 130) \"Some\" \"None\" 130) 130) (set (attr (data) \"totalSupply\" 131) (openVariant (isNat (sub (attr (data) \"totalSupply\" 131) (attr (params 123) \"value\" 129) 131) 131) \"Some\" \"None\" 131) 131))) (deposit True ((set_type (params 45) \"nat\" 46) (defineLocal \"newTokens\" (mul (params 45) (literal (intOrNat 1000000000000000000) 49) 49) 49) (ifBlock (neq (attr (data) \"totalSupply\" 131) (literal (nat 0) 50) 50) ((defineLocal \"newUnderlyingBalance\" (add (attr (data) \"underlyingBalance\" 51) (params 45) 51) 51) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 45) (literal (intOrNat 1000000000000000000) 52) 52) (getLocal \"newUnderlyingBalance\" 52) 52) 52) (set (getLocal \"newTokens\" 1216) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 53) (attr (data) \"totalSupply\" 131) 53) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 53) (getLocal \"fractionOfPoolOwnership\" 53) 53) 53) \"Some\" \"None\" 53) 53) 53)) 50) (set (attr (data) \"underlyingBalance\" 51) (add (attr (data) \"underlyingBalance\" 51) (params 45) 56) 56) (set (operations 69) (cons (transfer (record 59 (from_ (sender)) (to_ (to_address (self) \"None\")) (value (params 45))) (literal (mutez 0) 69) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 64) \"Some\" \"None\" 64) 69) (operations 69) 69) 69) (set (operations 81) (cons (transfer (record 72 (address (sender)) (value (getLocal \"newTokens\" 74))) (literal (mutez 0) 81) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 76) \"Some\" \"None\" 76) 81) (operations 81) 81) 81))) (getAdministrator True ((bind \"__s121\" ((set_type (first (params 143) 1216) \"unit\" 144) (result (attr (data) \"administrator\" 134) 145))) (set_type (second (params 143) 1216) (contract \"address\") 1216) (set (operations 1216) (cons (transfer (getLocal \"__s121\" 1216) (literal (mutez 0) 1216) (second (params 143) 1216) 143) (operations 1216) 1216) 1216))) (getAllowance True ((bind \"__s122\" ((result (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (first (params 103) 1216) \"owner\" 104) 104) \"approvals\" 104) (attr (first (params 103) 1216) \"spender\" 104) 104) 104))) (set_type (second (params 103) 1216) (contract \"nat\") 1216) (set (operations 1216) (cons (transfer (getLocal \"__s122\" 1216) (literal (mutez 0) 1216) (second (params 103) 1216) 103) (operations 1216) 1216) 1216))) (getBalance True ((bind \"__s123\" ((result (attr (getItem (attr (data) \"balances\" 95) (first (params 99) 1216) 100) \"balance\" 100) 100))) (set_type (second (params 99) 1216) (contract \"nat\") 1216) (set (operations 1216) (cons (transfer (getLocal \"__s123\" 1216) (literal (mutez 0) 1216) (second (params 99) 1216) 99) (operations 1216) 1216) 1216))) (getTotalSupply True ((bind \"__s124\" ((set_type (first (params 107) 1216) \"unit\" 108) (result (attr (data) \"totalSupply\" 131) 109))) (set_type (second (params 107) 1216) (contract \"nat\") 1216) (set (operations 1216) (cons (transfer (getLocal \"__s124\" 1216) (literal (mutez 0) 1216) (second (params 107) 1216) 107) (operations 1216) 1216) 1216))) (mint True ((set_type (params 112) (record ((address \"address\") (value \"nat\")) None) 113) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 116) 116) 116) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (attr (params 112) \"value\" 119) 119) 119) (set (attr (data) \"totalSupply\" 131) (add (attr (data) \"totalSupply\" 131) (attr (params 112) \"value\" 119) 120) 120))) (redeem True ((set_type (params 85) \"nat\" 86) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 85) (literal (intOrNat 1000000000000000000) 88) 88) (attr (data) \"totalSupply\" 131) 88) 88) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 89) (attr (data) \"underlyingBalance\" 51) 89) (literal (intOrNat 1000000000000000000) 89) 89) 89) (set (attr (data) \"underlyingBalance\" 51) (openVariant (isNat (sub (attr (data) \"underlyingBalance\" 51) (getLocal \"tokensToReceive\" 92) 92) 92) \"Some\" \"None\" 92) 92) (set (operations 104) (cons (transfer (record 95 (address (sender)) (value (params 85))) (literal (mutez 0) 104) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 99) \"Some\" \"None\" 99) 104) (operations 104) 104) 104) (set (operations 117) (cons (transfer (record 107 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (getLocal \"tokensToReceive\" 110))) (literal (mutez 0) 117) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 112) \"Some\" \"None\" 112) 117) (operations 117) 117) 117))) (setAdministrator True ((set_type (params 137) \"address\" 138) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 139) (set (attr (data) \"administrator\" 134) (params 137) 140))) (setPause True ((set_type (params 151) \"bool\" 152) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 153) (set (attr (data) \"paused\" 148) (params 151) 154))) (transfer True ((set_type (params 68) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 69) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (and (invert (attr (data) \"paused\" 148) 71) (or (eq (attr (params 68) \"from_\" 72) (sender) 72) (ge (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 73) \"approvals\" 73) (sender) 73) (attr (params 68) \"value\" 73) 73) 72) 71) 70) 70) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 75) \"balance\" 75) (attr (params 68) \"value\" 73) 75) 75) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (attr (params 68) \"value\" 73) 76) 76) \"Some\" \"None\" 76) 76) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (attr (params 68) \"value\" 73) 77) 77) (ifBlock (and (neq (attr (params 68) \"from_\" 72) (sender) 78) (invert (eq (sender) (attr (data) \"administrator\" 134) 134) 78) 78) ((set (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (attr (params 68) \"value\" 73) 79) 79) \"Some\" \"None\" 79) 79)) 78))) (updateBalance True ((set_type (params 121) \"unit\" 122) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 0) 125) 125) (literal (string \"bad state\") 125) 125) (set (attr (data) \"state\" 125) (literal (intOrNat 1) 128) 128) (set (operations 137) (cons (transfer (tuple 137 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 131)) (literal (mutez 0) 137) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 66) 132) \"Some\" \"None\" 132) 137) (operations 137) 137) 137))) (updateBalance_callback True ((set_type (params 141) \"nat\" 142) (verify (eq (sender) (attr (data) \"tokenAddress\" 66) 145) (literal (string \"bad sender\") 145) 145) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 1) 148) 148) (literal (string \"bad state\") 148) 148) (set (attr (data) \"state\" 125) (literal (intOrNat 0) 151) 151) (set (attr (data) \"underlyingBalance\" 51) (params 141) 154))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1216, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1221 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)) (value (literal (nat 10) 1219)))", "line_no": 1220, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1220)", "show": true, "valid": "(literal (bool True) 1220)", "voting_powers": "(map 1220 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1232 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)) (value (literal (nat 40) 1230)))", "line_no": 1231, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1231)", "show": true, "valid": "(literal (bool True) 1231)", "voting_powers": "(map 1231 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1242 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 10) 1219)))", "line_no": 1241, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1241)", "show": true, "valid": "(literal (bool True) 1241)", "voting_powers": "(map 1241 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1252 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 40) 1230)))", "line_no": 1251, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1251)", "show": true, "valid": "(literal (bool True) 1251)", "voting_powers": "(map 1251 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 1219)", "line_no": 1261, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1261)", "show": true, "valid": "(literal (bool True) 1261)", "voting_powers": "(map 1261 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 1230)", "line_no": 1267, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1267)", "show": true, "valid": "(literal (bool True) 1267)", "voting_powers": "(map 1267 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1276 (address (literal (local-address (static_id 1 28)) 28)) (value (literal (intOrNat 10) 1276)))", "line_no": 1275, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1275)", "show": true, "valid": "(literal (bool True) 1275)", "voting_powers": "(map 1275 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "updateBalance", "params": "(unit)", "line_no": 1285, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1285)", "show": true, "valid": "(literal (bool True) 1285)", "voting_powers": "(map 1285 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 10) 1219) (literal (intOrNat 1000000000000000000) 1289) 1289)", "line_no": 1288, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1288)", "show": true, "valid": "(literal (bool True) 1288)", "voting_powers": "(map 1288 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1275) \"balances\" 1297) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 1297) \"balance\" 1297) (add (literal (nat 10) 1219) (literal (nat 2) 1296) 1297) 1297)", "line_no": 1297}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 1288) \"balances\" 1298) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 1298) \"balance\" 1298) (literal (nat 0) 1298) 1298)", "line_no": 1298}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1275) \"balances\" 1297) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11) 1301) \"balance\" 1301) (literal (nat 0) 1301) 1301)", "line_no": 1301}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 1288) \"balances\" 1298) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11) 1302) \"balance\" 1302) (mul (mul (literal (nat 10) 1219) (literal (intOrNat 4) 1302) 1302) (literal (intOrNat 1000000000000000000) 1302) 1302) 1302)", "line_no": 1302}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 1288) \"totalSupply\" 1305) (mul (literal (nat 40) 1230) (literal (intOrNat 1000000000000000000) 1305) 1305) 1305)", "line_no": 1305}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1275) \"balances\" 1297) (literal (local-address (static_id 1 28)) 28) 1309) \"balance\" 1309) (add (literal (nat 40) 1230) (openVariant (isNat (sub (literal (intOrNat 10) 1309) (literal (nat 2) 1296) 1309) 1309) \"Some\" \"None\" 1309) 1309) 1309)", "line_no": 1309}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 1288) \"underlyingBalance\" 1310) (add (literal (nat 40) 1230) (openVariant (isNat (sub (literal (intOrNat 10) 1310) (literal (nat 2) 1296) 1310) 1310) \"Some\" \"None\" 1310) 1310) 1310)", "line_no": 1310}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 40) 1230) (literal (intOrNat 1000000000000000000) 1314) 1314)", "line_no": 1313, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1313)", "show": true, "valid": "(literal (bool True) 1313)", "voting_powers": "(map 1313 )", "export": true}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1275) \"balances\" 1297) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 1320) \"balance\" 1320) (add (literal (nat 10) 1219) (literal (nat 2) 1296) 1320) 1320)", "line_no": 1320}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 1313) \"balances\" 1321) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 1321) \"balance\" 1321) (literal (nat 0) 1321) 1321)", "line_no": 1321}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1275) \"balances\" 1297) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11) 1326) \"balance\" 1326) (add (literal (nat 40) 1230) (literal (nat 8) 1325) 1326) 1326)", "line_no": 1326}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 1313) \"balances\" 1321) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11) 1327) \"balance\" 1327) (literal (nat 0) 1327) 1327)", "line_no": 1327}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 1313) \"totalSupply\" 1330) (literal (nat 0) 1330) 1330)", "line_no": 1330}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1275) \"balances\" 1297) (literal (local-address (static_id 1 28)) 28) 1333) \"balance\" 1333) (literal (nat 0) 1333) 1333)", "line_no": 1333}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 1313) \"underlyingBalance\" 1334) (literal (nat 0) 1334) 1334)", "line_no": 1334}], "decompile": false, "kind": "test"}, {"shortname": "redeem_-_can_redeem_correctly_from_accounts_joining_after_liquidity_is_added", "longname": "redeem - can redeem correctly from accounts joining after liquidity is added", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 108) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 91) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 67) (record ((address \"address\") (value \"nat\")) None) 68) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 69) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 70) \"balance\" 70) (attr (params 67) \"value\" 70) 70) 70) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (attr (params 67) \"value\" 70) 71) 71) \"Some\" \"None\" 71) 71) (set (attr (data) \"totalSupply\" 72) (openVariant (isNat (sub (attr (data) \"totalSupply\" 72) (attr (params 67) \"value\" 70) 72) 72) \"Some\" \"None\" 72) 72))) (getAdministrator True ((bind \"__s125\" ((set_type (first (params 85) 1344) \"unit\" 86) (result (attr (data) \"administrator\" 76) 87))) (set_type (second (params 85) 1344) (contract \"address\") 1344) (set (operations 1344) (cons (transfer (getLocal \"__s125\" 1344) (literal (mutez 0) 1344) (second (params 85) 1344) 85) (operations 1344) 1344) 1344))) (getAllowance True ((bind \"__s126\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 41) 1344) \"owner\" 42) 42) \"approvals\" 42) (attr (first (params 41) 1344) \"spender\" 42) 42) 42))) (set_type (second (params 41) 1344) (contract \"nat\") 1344) (set (operations 1344) (cons (transfer (getLocal \"__s126\" 1344) (literal (mutez 0) 1344) (second (params 41) 1344) 41) (operations 1344) 1344) 1344))) (getBalance True ((bind \"__s127\" ((result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1344) 38) \"balance\" 38) 38))) (set_type (second (params 37) 1344) (contract \"nat\") 1344) (set (operations 1344) (cons (transfer (getLocal \"__s127\" 1344) (literal (mutez 0) 1344) (second (params 37) 1344) 37) (operations 1344) 1344) 1344))) (getTotalSupply True ((bind \"__s128\" ((set_type (first (params 45) 1344) \"unit\" 46) (result (attr (data) \"totalSupply\" 72) 47))) (set_type (second (params 45) 1344) (contract \"nat\") 1344) (set (operations 1344) (cons (transfer (getLocal \"__s128\" 1344) (literal (mutez 0) 1344) (second (params 45) 1344) 45) (operations 1344) 1344) 1344))) (mint True ((set_type (params 59) (record ((address \"address\") (value \"nat\")) None) 60) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 61) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (attr (params 59) \"value\" 63) 63) 63) (set (attr (data) \"totalSupply\" 72) (add (attr (data) \"totalSupply\" 72) (attr (params 59) \"value\" 63) 64) 64))) (setAdministrator True ((set_type (params 79) \"address\" 80) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 81) (set (attr (data) \"administrator\" 76) (params 79) 82))) (setPause True ((set_type (params 94) \"bool\" 95) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 96) (set (attr (data) \"paused\" 91) (params 94) 97))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 76) 76) (and (invert (attr (data) \"paused\" 91) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 76) 76) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1344, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 28)", "export": "(storage (record 28 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 32 ) (bigmap (unknown 109) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 32)) (paused (literal (bool False) 28)) (state (literal (intOrNat 0) 28)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (totalSupply (literal (intOrNat 0) 28)) (underlyingBalance (literal (nat 0) 39)))\nstorage_type (())\nmessages ((approve True ((set_type (params 82) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 83) (ifBlock (invert (contains (attr (data) \"balances\" 95) (sender) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (sender) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (invert (attr (data) \"paused\" 148) 89) 89) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 95) (sender) 90) \"approvals\" 90) (attr (params 82) \"spender\" 90) (literal (intOrNat 0) 90) 90) (literal (intOrNat 0) 91) 91) (eq (attr (params 82) \"value\" 91) (literal (intOrNat 0) 91) 91) 91) (literal (string \"UnsafeAllowanceChange\") 91) 91) (set (getItem (attr (getItem (attr (data) \"balances\" 95) (sender) 92) \"approvals\" 92) (attr (params 82) \"spender\" 90) 92) (attr (params 82) \"value\" 91) 92))) (burn True ((set_type (params 123) (record ((address \"address\") (value \"nat\")) None) 124) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 127) 127) 127) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 129) \"balance\" 129) (attr (params 123) \"value\" 129) 129) 129) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (attr (params 123) \"value\" 129) 130) 130) \"Some\" \"None\" 130) 130) (set (attr (data) \"totalSupply\" 131) (openVariant (isNat (sub (attr (data) \"totalSupply\" 131) (attr (params 123) \"value\" 129) 131) 131) \"Some\" \"None\" 131) 131))) (deposit True ((set_type (params 45) \"nat\" 46) (defineLocal \"newTokens\" (mul (params 45) (literal (intOrNat 1000000000000000000) 49) 49) 49) (ifBlock (neq (attr (data) \"totalSupply\" 131) (literal (nat 0) 50) 50) ((defineLocal \"newUnderlyingBalance\" (add (attr (data) \"underlyingBalance\" 51) (params 45) 51) 51) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 45) (literal (intOrNat 1000000000000000000) 52) 52) (getLocal \"newUnderlyingBalance\" 52) 52) 52) (set (getLocal \"newTokens\" 1350) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 53) (attr (data) \"totalSupply\" 131) 53) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 53) (getLocal \"fractionOfPoolOwnership\" 53) 53) 53) \"Some\" \"None\" 53) 53) 53)) 50) (set (attr (data) \"underlyingBalance\" 51) (add (attr (data) \"underlyingBalance\" 51) (params 45) 56) 56) (set (operations 69) (cons (transfer (record 59 (from_ (sender)) (to_ (to_address (self) \"None\")) (value (params 45))) (literal (mutez 0) 69) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 64) \"Some\" \"None\" 64) 69) (operations 69) 69) 69) (set (operations 81) (cons (transfer (record 72 (address (sender)) (value (getLocal \"newTokens\" 74))) (literal (mutez 0) 81) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 76) \"Some\" \"None\" 76) 81) (operations 81) 81) 81))) (getAdministrator True ((bind \"__s129\" ((set_type (first (params 143) 1350) \"unit\" 144) (result (attr (data) \"administrator\" 134) 145))) (set_type (second (params 143) 1350) (contract \"address\") 1350) (set (operations 1350) (cons (transfer (getLocal \"__s129\" 1350) (literal (mutez 0) 1350) (second (params 143) 1350) 143) (operations 1350) 1350) 1350))) (getAllowance True ((bind \"__s130\" ((result (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (first (params 103) 1350) \"owner\" 104) 104) \"approvals\" 104) (attr (first (params 103) 1350) \"spender\" 104) 104) 104))) (set_type (second (params 103) 1350) (contract \"nat\") 1350) (set (operations 1350) (cons (transfer (getLocal \"__s130\" 1350) (literal (mutez 0) 1350) (second (params 103) 1350) 103) (operations 1350) 1350) 1350))) (getBalance True ((bind \"__s131\" ((result (attr (getItem (attr (data) \"balances\" 95) (first (params 99) 1350) 100) \"balance\" 100) 100))) (set_type (second (params 99) 1350) (contract \"nat\") 1350) (set (operations 1350) (cons (transfer (getLocal \"__s131\" 1350) (literal (mutez 0) 1350) (second (params 99) 1350) 99) (operations 1350) 1350) 1350))) (getTotalSupply True ((bind \"__s132\" ((set_type (first (params 107) 1350) \"unit\" 108) (result (attr (data) \"totalSupply\" 131) 109))) (set_type (second (params 107) 1350) (contract \"nat\") 1350) (set (operations 1350) (cons (transfer (getLocal \"__s132\" 1350) (literal (mutez 0) 1350) (second (params 107) 1350) 107) (operations 1350) 1350) 1350))) (mint True ((set_type (params 112) (record ((address \"address\") (value \"nat\")) None) 113) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 116) 116) 116) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (attr (params 112) \"value\" 119) 119) 119) (set (attr (data) \"totalSupply\" 131) (add (attr (data) \"totalSupply\" 131) (attr (params 112) \"value\" 119) 120) 120))) (redeem True ((set_type (params 85) \"nat\" 86) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 85) (literal (intOrNat 1000000000000000000) 88) 88) (attr (data) \"totalSupply\" 131) 88) 88) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 89) (attr (data) \"underlyingBalance\" 51) 89) (literal (intOrNat 1000000000000000000) 89) 89) 89) (set (attr (data) \"underlyingBalance\" 51) (openVariant (isNat (sub (attr (data) \"underlyingBalance\" 51) (getLocal \"tokensToReceive\" 92) 92) 92) \"Some\" \"None\" 92) 92) (set (operations 104) (cons (transfer (record 95 (address (sender)) (value (params 85))) (literal (mutez 0) 104) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 99) \"Some\" \"None\" 99) 104) (operations 104) 104) 104) (set (operations 117) (cons (transfer (record 107 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (getLocal \"tokensToReceive\" 110))) (literal (mutez 0) 117) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 112) \"Some\" \"None\" 112) 117) (operations 117) 117) 117))) (setAdministrator True ((set_type (params 137) \"address\" 138) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 139) (set (attr (data) \"administrator\" 134) (params 137) 140))) (setPause True ((set_type (params 151) \"bool\" 152) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 153) (set (attr (data) \"paused\" 148) (params 151) 154))) (transfer True ((set_type (params 68) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 69) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (and (invert (attr (data) \"paused\" 148) 71) (or (eq (attr (params 68) \"from_\" 72) (sender) 72) (ge (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 73) \"approvals\" 73) (sender) 73) (attr (params 68) \"value\" 73) 73) 72) 71) 70) 70) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 75) \"balance\" 75) (attr (params 68) \"value\" 73) 75) 75) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (attr (params 68) \"value\" 73) 76) 76) \"Some\" \"None\" 76) 76) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (attr (params 68) \"value\" 73) 77) 77) (ifBlock (and (neq (attr (params 68) \"from_\" 72) (sender) 78) (invert (eq (sender) (attr (data) \"administrator\" 134) 134) 78) 78) ((set (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (attr (params 68) \"value\" 73) 79) 79) \"Some\" \"None\" 79) 79)) 78))) (updateBalance True ((set_type (params 121) \"unit\" 122) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 0) 125) 125) (literal (string \"bad state\") 125) 125) (set (attr (data) \"state\" 125) (literal (intOrNat 1) 128) 128) (set (operations 137) (cons (transfer (tuple 137 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 131)) (literal (mutez 0) 137) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 66) 132) \"Some\" \"None\" 132) 137) (operations 137) 137) 137))) (updateBalance_callback True ((set_type (params 141) \"nat\" 142) (verify (eq (sender) (attr (data) \"tokenAddress\" 66) 145) (literal (string \"bad sender\") 145) 145) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 1) 148) 148) (literal (string \"bad state\") 148) 148) (set (attr (data) \"state\" 125) (literal (intOrNat 0) 151) 151) (set (attr (data) \"underlyingBalance\" 51) (params 141) 154))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1350, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1355 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)) (value (literal (nat 10) 1353)))", "line_no": 1354, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1354)", "show": true, "valid": "(literal (bool True) 1354)", "voting_powers": "(map 1354 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1366 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)) (value (literal (nat 40) 1364)))", "line_no": 1365, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1365)", "show": true, "valid": "(literal (bool True) 1365)", "voting_powers": "(map 1365 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1377 (address (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 12)) (value (literal (nat 60) 1375)))", "line_no": 1376, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1376)", "show": true, "valid": "(literal (bool True) 1376)", "voting_powers": "(map 1376 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1387 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 10) 1353)))", "line_no": 1386, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1386)", "show": true, "valid": "(literal (bool True) 1386)", "voting_powers": "(map 1386 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1397 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 40) 1364)))", "line_no": 1396, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1396)", "show": true, "valid": "(literal (bool True) 1396)", "voting_powers": "(map 1396 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1407 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 60) 1375)))", "line_no": 1406, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 12)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1406)", "show": true, "valid": "(literal (bool True) 1406)", "voting_powers": "(map 1406 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 1353)", "line_no": 1416, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1416)", "show": true, "valid": "(literal (bool True) 1416)", "voting_powers": "(map 1416 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 1364)", "line_no": 1422, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1422)", "show": true, "valid": "(literal (bool True) 1422)", "voting_powers": "(map 1422 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1431 (address (literal (local-address (static_id 1 28)) 28)) (value (literal (intOrNat 10) 1431)))", "line_no": 1430, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1430)", "show": true, "valid": "(literal (bool True) 1430)", "voting_powers": "(map 1430 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "updateBalance", "params": "(unit)", "line_no": 1440, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1440)", "show": true, "valid": "(literal (bool True) 1440)", "voting_powers": "(map 1440 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 60) 1375)", "line_no": 1443, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 12)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1443)", "show": true, "valid": "(literal (bool True) 1443)", "voting_powers": "(map 1443 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 10) 1353) (literal (intOrNat 1000000000000000000) 1451) 1451)", "line_no": 1450, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1450)", "show": true, "valid": "(literal (bool True) 1450)", "voting_powers": "(map 1450 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 40) 1364) (literal (intOrNat 1000000000000000000) 1457) 1457)", "line_no": 1456, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1456)", "show": true, "valid": "(literal (bool True) 1456)", "voting_powers": "(map 1456 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "redeem", "params": "(attr (getItem (attr (contractData (static_id 1 28) 1456) \"balances\" 1463) (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 12) 1463) \"balance\" 1463)", "line_no": 1462, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 12)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1462)", "show": true, "valid": "(literal (bool True) 1462)", "voting_powers": "(map 1462 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 1462) \"totalSupply\" 1469) (literal (nat 0) 1469) 1469)", "line_no": 1469}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 1462) \"balances\" 1470) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 1470) \"balance\" 1470) (literal (nat 0) 1470) 1470)", "line_no": 1470}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 1462) \"balances\" 1470) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11) 1471) \"balance\" 1471) (literal (nat 0) 1471) 1471)", "line_no": 1471}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 1462) \"balances\" 1470) (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 12) 1472) \"balance\" 1472) (literal (nat 0) 1472) 1472)", "line_no": 1472}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1430) \"balances\" 1475) (literal (local-address (static_id 1 28)) 28) 1475) \"balance\" 1475) (literal (nat 0) 1475) 1475)", "line_no": 1475}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 1462) \"underlyingBalance\" 1476) (literal (nat 0) 1476) 1476)", "line_no": 1476}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1430) \"balances\" 1475) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 1480) \"balance\" 1480) (literal (nat 12) 1480) 1480)", "line_no": 1480}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1430) \"balances\" 1475) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11) 1481) \"balance\" 1481) (literal (nat 47) 1481) 1481)", "line_no": 1481}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1430) \"balances\" 1475) (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 12) 1482) \"balance\" 1482) (literal (nat 61) 1482) 1482)", "line_no": 1482}], "decompile": false, "kind": "test"}, {"shortname": "redeem_-_can_redeem_correctly_from_accounts_joining_after_liquidity_is_added_with_fraction_of_pool", "longname": "redeem - can redeem correctly from accounts joining after liquidity is added with fraction of pool", "scenario": [{"action": "newContract", "id": "(static_id 0 8)", "export": "(storage (record 8 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 8 ) (bigmap (unknown 115) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 8)) (paused (literal (bool False) 8)) (totalSupply (literal (intOrNat 0) 8)))\nstorage_type (())\nmessages ((approve True ((set_type (params 25) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 26) (verify (invert (attr (data) \"paused\" 91) 27) 27) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 28) (sender) 28) \"approvals\" 28) (attr (params 25) \"spender\" 28) (literal (intOrNat 0) 28) 28) (literal (intOrNat 0) 29) 29) (eq (attr (params 25) \"value\" 29) (literal (intOrNat 0) 29) 29) 29) (literal (string \"UnsafeAllowanceChange\") 29) 29) (set (getItem (attr (getItem (attr (data) \"balances\" 28) (sender) 30) \"approvals\" 30) (attr (params 25) \"spender\" 28) 30) (attr (params 25) \"value\" 29) 30))) (burn True ((set_type (params 67) (record ((address \"address\") (value \"nat\")) None) 68) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 69) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 70) \"balance\" 70) (attr (params 67) \"value\" 70) 70) 70) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 67) \"address\" 70) 71) \"balance\" 71) (attr (params 67) \"value\" 70) 71) 71) \"Some\" \"None\" 71) 71) (set (attr (data) \"totalSupply\" 72) (openVariant (isNat (sub (attr (data) \"totalSupply\" 72) (attr (params 67) \"value\" 70) 72) 72) \"Some\" \"None\" 72) 72))) (getAdministrator True ((bind \"__s133\" ((set_type (first (params 85) 1492) \"unit\" 86) (result (attr (data) \"administrator\" 76) 87))) (set_type (second (params 85) 1492) (contract \"address\") 1492) (set (operations 1492) (cons (transfer (getLocal \"__s133\" 1492) (literal (mutez 0) 1492) (second (params 85) 1492) 85) (operations 1492) 1492) 1492))) (getAllowance True ((bind \"__s134\" ((result (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (first (params 41) 1492) \"owner\" 42) 42) \"approvals\" 42) (attr (first (params 41) 1492) \"spender\" 42) 42) 42))) (set_type (second (params 41) 1492) (contract \"nat\") 1492) (set (operations 1492) (cons (transfer (getLocal \"__s134\" 1492) (literal (mutez 0) 1492) (second (params 41) 1492) 41) (operations 1492) 1492) 1492))) (getBalance True ((bind \"__s135\" ((result (attr (getItem (attr (data) \"balances\" 28) (first (params 37) 1492) 38) \"balance\" 38) 38))) (set_type (second (params 37) 1492) (contract \"nat\") 1492) (set (operations 1492) (cons (transfer (getLocal \"__s135\" 1492) (literal (mutez 0) 1492) (second (params 37) 1492) 37) (operations 1492) 1492) 1492))) (getTotalSupply True ((bind \"__s136\" ((set_type (first (params 45) 1492) \"unit\" 46) (result (attr (data) \"totalSupply\" 72) 47))) (set_type (second (params 45) 1492) (contract \"nat\") 1492) (set (operations 1492) (cons (transfer (getLocal \"__s136\" 1492) (literal (mutez 0) 1492) (second (params 45) 1492) 45) (operations 1492) 1492) 1492))) (mint True ((set_type (params 59) (record ((address \"address\") (value \"nat\")) None) 60) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 61) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 59) \"address\" 62) 63) \"balance\" 63) (attr (params 59) \"value\" 63) 63) 63) (set (attr (data) \"totalSupply\" 72) (add (attr (data) \"totalSupply\" 72) (attr (params 59) \"value\" 63) 64) 64))) (setAdministrator True ((set_type (params 79) \"address\" 80) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 81) (set (attr (data) \"administrator\" 76) (params 79) 82))) (setPause True ((set_type (params 94) \"bool\" 95) (verify (eq (sender) (attr (data) \"administrator\" 76) 76) 96) (set (attr (data) \"paused\" 91) (params 94) 97))) (transfer True ((set_type (params 11) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 12) (verify (or (eq (sender) (attr (data) \"administrator\" 76) 76) (and (invert (attr (data) \"paused\" 91) 14) (or (eq (attr (params 11) \"from_\" 15) (sender) 15) (ge (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 16) \"approvals\" 16) (sender) 16) (attr (params 11) \"value\" 16) 16) 15) 14) 13) 13) (ifBlock (invert (contains (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 33) 33) ((set (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 34) (record 34 (approvals (map 34 )) (balance (literal (intOrNat 0) 34))) 34)) 33) (verify (ge (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 18) \"balance\" 18) (attr (params 11) \"value\" 16) 18) 18) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 19) \"balance\" 19) (attr (params 11) \"value\" 16) 19) 19) \"Some\" \"None\" 19) 19) (set (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (add (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"to_\" 17) 20) \"balance\" 20) (attr (params 11) \"value\" 16) 20) 20) (ifBlock (and (neq (attr (params 11) \"from_\" 15) (sender) 21) (invert (eq (sender) (attr (data) \"administrator\" 76) 76) 21) 21) ((set (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 28) (attr (params 11) \"from_\" 15) 22) \"approvals\" 22) (sender) 22) (attr (params 11) \"value\" 16) 22) 22) \"Some\" \"None\" 22) 22)) 21))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1492, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": "(static_id 1 28)", "export": "(storage (record 28 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 32 ) (bigmap (unknown 116) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 32)) (paused (literal (bool False) 28)) (state (literal (intOrNat 0) 28)) (tokenAddress (literal (local-address (static_id 0 8)) 8)) (totalSupply (literal (intOrNat 0) 28)) (underlyingBalance (literal (nat 0) 39)))\nstorage_type (())\nmessages ((approve True ((set_type (params 82) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 83) (ifBlock (invert (contains (attr (data) \"balances\" 95) (sender) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (sender) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (invert (attr (data) \"paused\" 148) 89) 89) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 95) (sender) 90) \"approvals\" 90) (attr (params 82) \"spender\" 90) (literal (intOrNat 0) 90) 90) (literal (intOrNat 0) 91) 91) (eq (attr (params 82) \"value\" 91) (literal (intOrNat 0) 91) 91) 91) (literal (string \"UnsafeAllowanceChange\") 91) 91) (set (getItem (attr (getItem (attr (data) \"balances\" 95) (sender) 92) \"approvals\" 92) (attr (params 82) \"spender\" 90) 92) (attr (params 82) \"value\" 91) 92))) (burn True ((set_type (params 123) (record ((address \"address\") (value \"nat\")) None) 124) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 127) 127) 127) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 129) \"balance\" 129) (attr (params 123) \"value\" 129) 129) 129) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (attr (params 123) \"value\" 129) 130) 130) \"Some\" \"None\" 130) 130) (set (attr (data) \"totalSupply\" 131) (openVariant (isNat (sub (attr (data) \"totalSupply\" 131) (attr (params 123) \"value\" 129) 131) 131) \"Some\" \"None\" 131) 131))) (deposit True ((set_type (params 45) \"nat\" 46) (defineLocal \"newTokens\" (mul (params 45) (literal (intOrNat 1000000000000000000) 49) 49) 49) (ifBlock (neq (attr (data) \"totalSupply\" 131) (literal (nat 0) 50) 50) ((defineLocal \"newUnderlyingBalance\" (add (attr (data) \"underlyingBalance\" 51) (params 45) 51) 51) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 45) (literal (intOrNat 1000000000000000000) 52) 52) (getLocal \"newUnderlyingBalance\" 52) 52) 52) (set (getLocal \"newTokens\" 1498) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 53) (attr (data) \"totalSupply\" 131) 53) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 53) (getLocal \"fractionOfPoolOwnership\" 53) 53) 53) \"Some\" \"None\" 53) 53) 53)) 50) (set (attr (data) \"underlyingBalance\" 51) (add (attr (data) \"underlyingBalance\" 51) (params 45) 56) 56) (set (operations 69) (cons (transfer (record 59 (from_ (sender)) (to_ (to_address (self) \"None\")) (value (params 45))) (literal (mutez 0) 69) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 64) \"Some\" \"None\" 64) 69) (operations 69) 69) 69) (set (operations 81) (cons (transfer (record 72 (address (sender)) (value (getLocal \"newTokens\" 74))) (literal (mutez 0) 81) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 76) \"Some\" \"None\" 76) 81) (operations 81) 81) 81))) (getAdministrator True ((bind \"__s137\" ((set_type (first (params 143) 1498) \"unit\" 144) (result (attr (data) \"administrator\" 134) 145))) (set_type (second (params 143) 1498) (contract \"address\") 1498) (set (operations 1498) (cons (transfer (getLocal \"__s137\" 1498) (literal (mutez 0) 1498) (second (params 143) 1498) 143) (operations 1498) 1498) 1498))) (getAllowance True ((bind \"__s138\" ((result (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (first (params 103) 1498) \"owner\" 104) 104) \"approvals\" 104) (attr (first (params 103) 1498) \"spender\" 104) 104) 104))) (set_type (second (params 103) 1498) (contract \"nat\") 1498) (set (operations 1498) (cons (transfer (getLocal \"__s138\" 1498) (literal (mutez 0) 1498) (second (params 103) 1498) 103) (operations 1498) 1498) 1498))) (getBalance True ((bind \"__s139\" ((result (attr (getItem (attr (data) \"balances\" 95) (first (params 99) 1498) 100) \"balance\" 100) 100))) (set_type (second (params 99) 1498) (contract \"nat\") 1498) (set (operations 1498) (cons (transfer (getLocal \"__s139\" 1498) (literal (mutez 0) 1498) (second (params 99) 1498) 99) (operations 1498) 1498) 1498))) (getTotalSupply True ((bind \"__s140\" ((set_type (first (params 107) 1498) \"unit\" 108) (result (attr (data) \"totalSupply\" 131) 109))) (set_type (second (params 107) 1498) (contract \"nat\") 1498) (set (operations 1498) (cons (transfer (getLocal \"__s140\" 1498) (literal (mutez 0) 1498) (second (params 107) 1498) 107) (operations 1498) 1498) 1498))) (mint True ((set_type (params 112) (record ((address \"address\") (value \"nat\")) None) 113) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 116) 116) 116) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (attr (params 112) \"value\" 119) 119) 119) (set (attr (data) \"totalSupply\" 131) (add (attr (data) \"totalSupply\" 131) (attr (params 112) \"value\" 119) 120) 120))) (redeem True ((set_type (params 85) \"nat\" 86) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 85) (literal (intOrNat 1000000000000000000) 88) 88) (attr (data) \"totalSupply\" 131) 88) 88) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 89) (attr (data) \"underlyingBalance\" 51) 89) (literal (intOrNat 1000000000000000000) 89) 89) 89) (set (attr (data) \"underlyingBalance\" 51) (openVariant (isNat (sub (attr (data) \"underlyingBalance\" 51) (getLocal \"tokensToReceive\" 92) 92) 92) \"Some\" \"None\" 92) 92) (set (operations 104) (cons (transfer (record 95 (address (sender)) (value (params 85))) (literal (mutez 0) 104) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 99) \"Some\" \"None\" 99) 104) (operations 104) 104) 104) (set (operations 117) (cons (transfer (record 107 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (getLocal \"tokensToReceive\" 110))) (literal (mutez 0) 117) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 112) \"Some\" \"None\" 112) 117) (operations 117) 117) 117))) (setAdministrator True ((set_type (params 137) \"address\" 138) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 139) (set (attr (data) \"administrator\" 134) (params 137) 140))) (setPause True ((set_type (params 151) \"bool\" 152) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 153) (set (attr (data) \"paused\" 148) (params 151) 154))) (transfer True ((set_type (params 68) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 69) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (and (invert (attr (data) \"paused\" 148) 71) (or (eq (attr (params 68) \"from_\" 72) (sender) 72) (ge (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 73) \"approvals\" 73) (sender) 73) (attr (params 68) \"value\" 73) 73) 72) 71) 70) 70) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 75) \"balance\" 75) (attr (params 68) \"value\" 73) 75) 75) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (attr (params 68) \"value\" 73) 76) 76) \"Some\" \"None\" 76) 76) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (attr (params 68) \"value\" 73) 77) 77) (ifBlock (and (neq (attr (params 68) \"from_\" 72) (sender) 78) (invert (eq (sender) (attr (data) \"administrator\" 134) 134) 78) 78) ((set (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (attr (params 68) \"value\" 73) 79) 79) \"Some\" \"None\" 79) 79)) 78))) (updateBalance True ((set_type (params 121) \"unit\" 122) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 0) 125) 125) (literal (string \"bad state\") 125) 125) (set (attr (data) \"state\" 125) (literal (intOrNat 1) 128) 128) (set (operations 137) (cons (transfer (tuple 137 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 131)) (literal (mutez 0) 137) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 66) 132) \"Some\" \"None\" 132) 137) (operations 137) 137) 137))) (updateBalance_callback True ((set_type (params 141) \"nat\" 142) (verify (eq (sender) (attr (data) \"tokenAddress\" 66) 145) (literal (string \"bad sender\") 145) 145) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 1) 148) 148) (literal (string \"bad state\") 148) 148) (set (attr (data) \"state\" 125) (literal (intOrNat 0) 151) 151) (set (attr (data) \"underlyingBalance\" 51) (params 141) 154))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 1498, "show": true, "accept_unknown_types": false}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1503 (address (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)) (value (literal (nat 10) 1501)))", "line_no": 1502, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1502)", "show": true, "valid": "(literal (bool True) 1502)", "voting_powers": "(map 1502 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1514 (address (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)) (value (literal (nat 40) 1512)))", "line_no": 1513, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1513)", "show": true, "valid": "(literal (bool True) 1513)", "voting_powers": "(map 1513 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1525 (address (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 12)) (value (literal (nat 20) 1523)))", "line_no": 1524, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1524)", "show": true, "valid": "(literal (bool True) 1524)", "voting_powers": "(map 1524 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1535 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 10) 1501)))", "line_no": 1534, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1534)", "show": true, "valid": "(literal (bool True) 1534)", "voting_powers": "(map 1534 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1545 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 40) 1512)))", "line_no": 1544, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1544)", "show": true, "valid": "(literal (bool True) 1544)", "voting_powers": "(map 1544 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "approve", "params": "(record 1555 (spender (literal (local-address (static_id 1 28)) 28)) (value (literal (nat 20) 1523)))", "line_no": 1554, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 12)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1554)", "show": true, "valid": "(literal (bool True) 1554)", "voting_powers": "(map 1554 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 10) 1501)", "line_no": 1564, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1564)", "show": true, "valid": "(literal (bool True) 1564)", "voting_powers": "(map 1564 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 40) 1512)", "line_no": 1570, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1570)", "show": true, "valid": "(literal (bool True) 1570)", "voting_powers": "(map 1570 )", "export": true}, {"action": "message", "id": "(static_id 0 8)", "dynamic": false, "message": "mint", "params": "(record 1579 (address (literal (local-address (static_id 1 28)) 28)) (value (literal (intOrNat 10) 1579)))", "line_no": 1578, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 8)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1578)", "show": true, "valid": "(literal (bool True) 1578)", "voting_powers": "(map 1578 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "updateBalance", "params": "(unit)", "line_no": 1588, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1588)", "show": true, "valid": "(literal (bool True) 1588)", "voting_powers": "(map 1588 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "deposit", "params": "(literal (nat 20) 1523)", "line_no": 1591, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 12)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1591)", "show": true, "valid": "(literal (bool True) 1591)", "voting_powers": "(map 1591 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 10) 1501) (literal (intOrNat 1000000000000000000) 1599) 1599)", "line_no": 1598, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1598)", "show": true, "valid": "(literal (bool True) 1598)", "voting_powers": "(map 1598 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "redeem", "params": "(mul (literal (nat 40) 1512) (literal (intOrNat 1000000000000000000) 1605) 1605)", "line_no": 1604, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1604)", "show": true, "valid": "(literal (bool True) 1604)", "voting_powers": "(map 1604 )", "export": true}, {"action": "message", "id": "(static_id 1 28)", "dynamic": false, "message": "redeem", "params": "(attr (getItem (attr (contractData (static_id 1 28) 1604) \"balances\" 1611) (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 12) 1611) \"balance\" 1611)", "line_no": 1610, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 12)", "chain_id": "", "time": "(literal (timestamp 0) 28)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 1610)", "show": true, "valid": "(literal (bool True) 1610)", "voting_powers": "(map 1610 )", "export": true}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 1610) \"totalSupply\" 1617) (literal (nat 0) 1617) 1617)", "line_no": 1617}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 1610) \"balances\" 1618) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 1618) \"balance\" 1618) (literal (nat 0) 1618) 1618)", "line_no": 1618}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 1610) \"balances\" 1618) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11) 1619) \"balance\" 1619) (literal (nat 0) 1619) 1619)", "line_no": 1619}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 1 28) 1610) \"balances\" 1618) (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 12) 1620) \"balance\" 1620) (literal (nat 0) 1620) 1620)", "line_no": 1620}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1578) \"balances\" 1623) (literal (local-address (static_id 1 28)) 28) 1623) \"balance\" 1623) (literal (nat 0) 1623) 1623)", "line_no": 1623}, {"action": "verify", "condition": "(eq (attr (contractData (static_id 1 28) 1610) \"underlyingBalance\" 1624) (literal (nat 0) 1624) 1624)", "line_no": 1624}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1578) \"balances\" 1623) (literal (address \"tz1LLNkQK4UQV6QcFShiXJ2vT2ELw449MzAA\") 10) 1628) \"balance\" 1628) (literal (nat 12) 1628) 1628)", "line_no": 1628}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1578) \"balances\" 1623) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 11) 1629) \"balance\" 1629) (literal (nat 47) 1629) 1629)", "line_no": 1629}, {"action": "verify", "condition": "(eq (attr (getItem (attr (contractData (static_id 0 8) 1578) \"balances\" 1623) (literal (address \"tz1R6Ej25VSerE3MkSoEEeBjKHCDTFbpKuSX\") 12) 1630) \"balance\" 1630) (literal (nat 21) 1630) 1630)", "line_no": 1630}], "decompile": false, "kind": "test"}, {"shortname": "PoolContract", "longname": "PoolContract", "scenario": [{"action": "newContract", "id": "(static_id 0 28)", "export": "(storage (record 28 (administrator (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (balances (type_annotation (big_map 32 ) (bigmap (unknown 1) (record ((approvals (map \"address\" \"nat\")) (balance \"nat\")) None)) 32)) (paused (literal (bool False) 28)) (state (literal (intOrNat 0) 28)) (tokenAddress (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 23)) (totalSupply (literal (intOrNat 0) 28)) (underlyingBalance (literal (nat 0) 39)))\nstorage_type (())\nmessages ((approve True ((set_type (params 82) (record ((spender \"address\") (value \"nat\")) (Some ((\"spender\") (\"value\")))) 83) (ifBlock (invert (contains (attr (data) \"balances\" 95) (sender) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (sender) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (invert (attr (data) \"paused\" 148) 89) 89) (verify (or (eq (getItemDefault (attr (getItem (attr (data) \"balances\" 95) (sender) 90) \"approvals\" 90) (attr (params 82) \"spender\" 90) (literal (intOrNat 0) 90) 90) (literal (intOrNat 0) 91) 91) (eq (attr (params 82) \"value\" 91) (literal (intOrNat 0) 91) 91) 91) (literal (string \"UnsafeAllowanceChange\") 91) 91) (set (getItem (attr (getItem (attr (data) \"balances\" 95) (sender) 92) \"approvals\" 92) (attr (params 82) \"spender\" 90) 92) (attr (params 82) \"value\" 91) 92))) (burn True ((set_type (params 123) (record ((address \"address\") (value \"nat\")) None) 124) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 127) 127) 127) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 129) \"balance\" 129) (attr (params 123) \"value\" 129) 129) 129) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 123) \"address\" 129) 130) \"balance\" 130) (attr (params 123) \"value\" 129) 130) 130) \"Some\" \"None\" 130) 130) (set (attr (data) \"totalSupply\" 131) (openVariant (isNat (sub (attr (data) \"totalSupply\" 131) (attr (params 123) \"value\" 129) 131) 131) \"Some\" \"None\" 131) 131))) (deposit True ((set_type (params 45) \"nat\" 46) (defineLocal \"newTokens\" (mul (params 45) (literal (intOrNat 1000000000000000000) 49) 49) 49) (ifBlock (neq (attr (data) \"totalSupply\" 131) (literal (nat 0) 50) 50) ((defineLocal \"newUnderlyingBalance\" (add (attr (data) \"underlyingBalance\" 51) (params 45) 51) 51) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 45) (literal (intOrNat 1000000000000000000) 52) 52) (getLocal \"newUnderlyingBalance\" 52) 52) 52) (set (getLocal \"newTokens\" -1) (truediv (mul (getLocal \"fractionOfPoolOwnership\" 53) (attr (data) \"totalSupply\" 131) 53) (openVariant (isNat (sub (literal (intOrNat 1000000000000000000) 53) (getLocal \"fractionOfPoolOwnership\" 53) 53) 53) \"Some\" \"None\" 53) 53) 53)) 50) (set (attr (data) \"underlyingBalance\" 51) (add (attr (data) \"underlyingBalance\" 51) (params 45) 56) 56) (set (operations 69) (cons (transfer (record 59 (from_ (sender)) (to_ (to_address (self) \"None\")) (value (params 45))) (literal (mutez 0) 69) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 64) \"Some\" \"None\" 64) 69) (operations 69) 69) 69) (set (operations 81) (cons (transfer (record 72 (address (sender)) (value (getLocal \"newTokens\" 74))) (literal (mutez 0) 81) (openVariant (contract \"mint\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 76) \"Some\" \"None\" 76) 81) (operations 81) 81) 81))) (getAdministrator True ((bind \"__s141\" ((set_type (first (params 143) -1) \"unit\" 144) (result (attr (data) \"administrator\" 134) 145))) (set_type (second (params 143) -1) (contract \"address\") -1) (set (operations -1) (cons (transfer (getLocal \"__s141\" -1) (literal (mutez 0) -1) (second (params 143) -1) 143) (operations -1) -1) -1))) (getAllowance True ((bind \"__s142\" ((result (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (first (params 103) -1) \"owner\" 104) 104) \"approvals\" 104) (attr (first (params 103) -1) \"spender\" 104) 104) 104))) (set_type (second (params 103) -1) (contract \"nat\") -1) (set (operations -1) (cons (transfer (getLocal \"__s142\" -1) (literal (mutez 0) -1) (second (params 103) -1) 103) (operations -1) -1) -1))) (getBalance True ((bind \"__s143\" ((result (attr (getItem (attr (data) \"balances\" 95) (first (params 99) -1) 100) \"balance\" 100) 100))) (set_type (second (params 99) -1) (contract \"nat\") -1) (set (operations -1) (cons (transfer (getLocal \"__s143\" -1) (literal (mutez 0) -1) (second (params 99) -1) 99) (operations -1) -1) -1))) (getTotalSupply True ((bind \"__s144\" ((set_type (first (params 107) -1) \"unit\" 108) (result (attr (data) \"totalSupply\" 131) 109))) (set_type (second (params 107) -1) (contract \"nat\") -1) (set (operations -1) (cons (transfer (getLocal \"__s144\" -1) (literal (mutez 0) -1) (second (params 107) -1) 107) (operations -1) -1) -1))) (mint True ((set_type (params 112) (record ((address \"address\") (value \"nat\")) None) 113) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (eq (sender) (to_address (self) \"None\") 116) 116) 116) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 112) \"address\" 118) 119) \"balance\" 119) (attr (params 112) \"value\" 119) 119) 119) (set (attr (data) \"totalSupply\" 131) (add (attr (data) \"totalSupply\" 131) (attr (params 112) \"value\" 119) 120) 120))) (redeem True ((set_type (params 85) \"nat\" 86) (defineLocal \"fractionOfPoolOwnership\" (truediv (mul (params 85) (literal (intOrNat 1000000000000000000) 88) 88) (attr (data) \"totalSupply\" 131) 88) 88) (defineLocal \"tokensToReceive\" (truediv (mul (getLocal \"fractionOfPoolOwnership\" 89) (attr (data) \"underlyingBalance\" 51) 89) (literal (intOrNat 1000000000000000000) 89) 89) 89) (set (attr (data) \"underlyingBalance\" 51) (openVariant (isNat (sub (attr (data) \"underlyingBalance\" 51) (getLocal \"tokensToReceive\" 92) 92) 92) \"Some\" \"None\" 92) 92) (set (operations 104) (cons (transfer (record 95 (address (sender)) (value (params 85))) (literal (mutez 0) 104) (openVariant (contract \"burn\" (record ((address \"address\") (value \"nat\")) (Some ((\"address\") (\"value\")))) (to_address (self) \"None\") 99) \"Some\" \"None\" 99) 104) (operations 104) 104) 104) (set (operations 117) (cons (transfer (record 107 (from_ (to_address (self) \"None\")) (to_ (sender)) (value (getLocal \"tokensToReceive\" 110))) (literal (mutez 0) 117) (openVariant (contract \"transfer\" (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) (attr (data) \"tokenAddress\" 66) 112) \"Some\" \"None\" 112) 117) (operations 117) 117) 117))) (setAdministrator True ((set_type (params 137) \"address\" 138) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 139) (set (attr (data) \"administrator\" 134) (params 137) 140))) (setPause True ((set_type (params 151) \"bool\" 152) (verify (eq (sender) (attr (data) \"administrator\" 134) 134) 153) (set (attr (data) \"paused\" 148) (params 151) 154))) (transfer True ((set_type (params 68) (record ((from_ \"address\") (to_ \"address\") (value \"nat\")) (Some ((\"from_ as from\") ((\"to_ as to\") (\"value\"))))) 69) (verify (or (eq (sender) (attr (data) \"administrator\" 134) 134) (and (invert (attr (data) \"paused\" 148) 71) (or (eq (attr (params 68) \"from_\" 72) (sender) 72) (ge (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 73) \"approvals\" 73) (sender) 73) (attr (params 68) \"value\" 73) 73) 72) 71) 70) 70) (ifBlock (invert (contains (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 95) 95) ((set (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 96) (record 96 (approvals (map 96 )) (balance (literal (intOrNat 0) 96))) 96)) 95) (verify (ge (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 75) \"balance\" 75) (attr (params 68) \"value\" 73) 75) 75) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (openVariant (isNat (sub (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 76) \"balance\" 76) (attr (params 68) \"value\" 73) 76) 76) \"Some\" \"None\" 76) 76) (set (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (add (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"to_\" 74) 77) \"balance\" 77) (attr (params 68) \"value\" 73) 77) 77) (ifBlock (and (neq (attr (params 68) \"from_\" 72) (sender) 78) (invert (eq (sender) (attr (data) \"administrator\" 134) 134) 78) 78) ((set (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (openVariant (isNat (sub (getItem (attr (getItem (attr (data) \"balances\" 95) (attr (params 68) \"from_\" 72) 79) \"approvals\" 79) (sender) 79) (attr (params 68) \"value\" 73) 79) 79) \"Some\" \"None\" 79) 79)) 78))) (updateBalance True ((set_type (params 121) \"unit\" 122) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 0) 125) 125) (literal (string \"bad state\") 125) 125) (set (attr (data) \"state\" 125) (literal (intOrNat 1) 128) 128) (set (operations 137) (cons (transfer (tuple 137 (to_address (self) \"None\") (self_entry_point \"updateBalance_callback\" 131)) (literal (mutez 0) 137) (openVariant (contract \"getBalance\" (tuple \"address\" (contract \"nat\")) (attr (data) \"tokenAddress\" 66) 132) \"Some\" \"None\" 132) 137) (operations 137) 137) 137))) (updateBalance_callback True ((set_type (params 141) \"nat\" 142) (verify (eq (sender) (attr (data) \"tokenAddress\" 66) 145) (literal (string \"bad sender\") 145) 145) (verify (eq (attr (data) \"state\" 125) (literal (intOrNat 1) 148) 148) (literal (string \"bad state\") 148) 148) (set (attr (data) \"state\" 125) (literal (intOrNat 0) 151) 151) (set (attr (data) \"underlyingBalance\" 51) (params 141) 154))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": -1, "show": true, "accept_unknown_types": false}], "decompile": false, "kind": "compilation"}]